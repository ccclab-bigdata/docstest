<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quickstart Â· NetCDF.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>NetCDF.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><span class="toctext">Manual</span><ul><li class="current"><a class="toctext" href>Quickstart</a><ul class="internal"><li><a class="toctext" href="#Reading-a-file-1">Reading a file</a></li><li><a class="toctext" href="#A-more-advanced-example-1">A more advanced example</a></li></ul></li><li><a class="toctext" href="../highlevel/">High-level interface</a></li><li><a class="toctext" href="../intermediate/">Medium-level interface</a></li><li><a class="toctext" href="../strings/">Short note on reading and writing NC<em>CHAR and NC</em>STRING variables</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Quickstart</a></li></ul></nav><hr/><div id="topbar"><span>Quickstart</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Quickstart-1" href="#Quickstart-1">Quickstart</a></h1><h2><a class="nav-anchor" id="Reading-a-file-1" href="#Reading-a-file-1">Reading a file</a></h2><p>The most common task is probably to just read a NetCDF file into memory. This is done with:</p><pre><code class="language-none">ncread(filename, varname)</code></pre><p>This reads the whole variable into memory and returns it as a Julia array. To read only a slice of a NetCDF file, there are optional <code>start</code> and <code>count</code> keyword arguments, where on can specify the starting index and count along each dimension.</p><h2><a class="nav-anchor" id="A-more-advanced-example-1" href="#A-more-advanced-example-1">A more advanced example</a></h2><p>In this example we show how to create a NetCDF file from scratch, write some data to it and read it back in afterwards. First of all we create an array with top-of the atmosphere radiation data:</p><pre><code class="language-">using NetCDF
include(joinpath(Pkg.dir(&quot;NetCDF&quot;),&quot;examples&quot;,&quot;toa.jl&quot;))

# Define longitudes and latitudes, day and timesteps
lat=collect(-89.5:89.5)
lon=collect(-179.5:179.5)
day=1
tim=collect(0:23)

# Create radiation array
rad = [g_pot(x2,x1,day,x3) for x1=lon, x2=lat, x3=tim];
</code></pre><p>The resulting array is a 3-dimensional array with dimensions lon-lat-time, resembling approximately the hourly top of atmosphere radiation on January 1st. For documentation purposes we want to add atributes to the variable as well as the dimensions. Throughout this package, attributes are represented <code>Dict{String}</code>s:</p><div><pre><code class="language-julia">varatts = Dict(&quot;longname&quot; =&gt; &quot;Radiation at the top of the atmosphere&quot;,
          &quot;units&quot;    =&gt; &quot;W/m^2&quot;)
lonatts = Dict(&quot;longname&quot; =&gt; &quot;Longitude&quot;,
          &quot;units&quot;    =&gt; &quot;degrees east&quot;)
latatts = Dict(&quot;longname&quot; =&gt; &quot;Latitude&quot;,
          &quot;units&quot;    =&gt; &quot;degrees north&quot;)
timatts = Dict(&quot;longname&quot; =&gt; &quot;Time&quot;,
          &quot;units&quot;    =&gt; &quot;hours since 01-01-2000 00:00:00&quot;);</code></pre><pre><code class="language-none">Dict{String,String} with 2 entries:
  &quot;units&quot;    =&gt; &quot;hours since 01-01-2000 00:00:00&quot;
  &quot;longname&quot; =&gt; &quot;Time&quot;</code></pre></div><p>Now we have all the meta-information ready to create the actual file:</p><pre><code class="language-">fn = joinpath(tempdir(),&quot;radiation.nc&quot;)
isfile(fn) &amp;&amp; rm(fn)
nccreate(fn,&quot;rad&quot;,&quot;lon&quot;,lon,lonatts,&quot;lat&quot;,lat,latatts,&quot;time&quot;,tim,timatts,atts=varatts);
nothing # hide</code></pre><p>Once the file is created we can write the actual data to it:</p><pre><code class="language-">ncwrite(rad,fn,&quot;rad&quot;);</code></pre><p>This does not yet ensure that the data is actually written to the file, it might still be cached by the NetCDF library. In order to write and close the file we run <code>ncclose</code>:</p><div><pre><code class="language-julia">ncclose(fn)</code></pre><pre><code class="language-none">File /tmp/radiation.nc not currently opened.</code></pre></div><p>Now we assume we just retrieved this radiation NetCDF file and want to get some information about it. This is done using <code>ncinfo</code>:</p><pre><code class="language-">ncinfo(fn)</code></pre><p>Here we learn the most important information about the file, which variables it contains, the variable dimensions and their attributes. We decide to read the radiation variable:</p><pre><code class="language-">x=ncread(fn,&quot;rad&quot;)
size(x)</code></pre><p>This reads the whole array at once. If we only want to read a certain part of the variable, for example if we only want to plot the time series at a certain location, we can use the <code>start</code> and <code>count</code> keywords:</p><pre><code class="language-">ts = ncread(fn,&quot;rad&quot;,start=[180,45,1], count=[1,1,-1])</code></pre><p>In order to correctly label the time steps we retrieve the time information from the file:</p><pre><code class="language-">tvec = Base.Dates.DateTime(2001,1,1)+Base.Dates.Hour.(ncread(fn,&quot;time&quot;))</code></pre><p>Now we can generate the plot:</p><pre><code class="language-none">plot(tvec,ts)</code></pre><p>Another example would be to generate a heatmap plot of the solar radiation at 12am UTC:</p><pre><code class="language-none">lons = ncread(fn,&quot;lon&quot;)
lats = ncread(fn,&quot;lat&quot;)
m    = ncread(fn,&quot;rad&quot;,start=[1,1,12],count=[-1,-1,1])
plot(heatmap(x=lons,y=lats,z=m))</code></pre><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../highlevel/"><span class="direction">Next</span><span class="title">High-level interface</span></a></footer></article></body></html>
