<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Medium-level interface · NetCDF.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>NetCDF.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../quickstart/">Quickstart</a></li><li><a class="toctext" href="../highlevel/">High-level interface</a></li><li class="current"><a class="toctext" href>Medium-level interface</a><ul class="internal"><li><a class="toctext" href="#Open-a-file-1">Open a file</a></li><li><a class="toctext" href="#Getting-information-1">Getting information</a></li><li><a class="toctext" href="#Reading-data-1">Reading data</a></li><li><a class="toctext" href="#Writing-data-1">Writing data</a></li><li><a class="toctext" href="#Creating-files-1">Creating files</a></li><li><a class="toctext" href="#Miscellaneous-1">Miscellaneous</a></li><li><a class="toctext" href="#Interface-for-creating-files-1">Interface for creating files</a></li></ul></li><li><a class="toctext" href="../strings/">Short note on reading and writing NC<em>CHAR and NC</em>STRING variables</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Medium-level interface</a></li></ul></nav><hr/><div id="topbar"><span>Medium-level interface</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Medium-level-interface-1" href="#Medium-level-interface-1">Medium-level interface</a></h1><h2><a class="nav-anchor" id="Open-a-file-1" href="#Open-a-file-1">Open a file</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NetCDF.open" href="#NetCDF.open"><code>NetCDF.open</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">NetCDF.open(fil::AbstractString,v::AbstractString)</code></pre><p>opens a NetCDF variable <code>v</code> in the NetCDF file <code>fil</code> and returns an <code>NcVar</code> handle that implements the AbstractArray interface for reading and writing.</p><p><strong>Keyword arguments</strong></p><ul><li><code>mode</code> mode in which the file is opened, defaults to <code>NC_NOWRITE</code>, choose <code>NC_WRITE</code> for write access</li><li><code>readdimvar</code> determines if dimension variables will be read into the file structure, default is <code>false</code></li></ul></div></div><div><div><pre><code class="language-none">NetCDF.open(fil::AbstractString)</code></pre><p>opens the NetCDF file <code>fil</code> and returns a <code>NcFile</code> handle.</p><p><strong>Keyword arguments</strong></p><ul><li><code>mode</code> mode in which the file is opened, defaults to <code>NC_NOWRITE</code>, choose <code>NC_WRITE</code> for write access</li><li><code>readdimvar</code> determines if dimension variables will be read into the file structure, default is <code>false</code></li></ul></div></div></section><h2><a class="nav-anchor" id="Getting-information-1" href="#Getting-information-1">Getting information</a></h2><p>The <code>NetCDF.open</code> function returns an object of type <code>NcFile</code> which contains meta-Information about the file and associated variables. You can index the NcFile object <code>nc[varname]</code> to retrieve an NcVar object and retrieve information about it. You can run <code>names(nc)</code> to get a list of available variables.</p><p>Most of the following functions of the medium-level interface will use either an <code>NcFile</code> or an <code>NcVar</code> object as their first argument.</p><h2><a class="nav-anchor" id="Reading-data-1" href="#Reading-data-1">Reading data</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NetCDF.readvar" href="#NetCDF.readvar"><code>NetCDF.readvar</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">NetCDF.readvar(v::NcVar;start::Vector=ones(UInt,ndims(d)),count::Vector=size(d))</code></pre><p>Reads the values from the file associated to the <code>NcVar</code> object <code>v</code> and returns them. By default the whole variable is read</p><p><strong>Keyword arguments</strong></p><ul><li><code>start</code> Vector of length <code>ndim(v)</code> setting the starting index for each dimension</li><li><code>count</code> Vector of length <code>ndim(v)</code> setting the count of values to be read along each dimension. The value -1 is treated as a special case to read all values from this dimension</li></ul><p><strong>Example</strong></p><p>Assume <code>v</code> is a NetCDF variable with dimensions (3,3,10).</p><pre><code class="language-none">x = NetCDF.readvar(v, start=[1,2,1], count=[3,1,-1])</code></pre><p>This reads all values from the first and last dimension and only the second value from the second dimension.</p></div></div><div><div><pre><code class="language-none">NetCDF.readvar{T,N}(v::NcVar{T,N},I::Union{Integer, UnitRange, Colon}...)</code></pre><p>Reads data from a NetCDF file with array-style indexing. <code>Integer</code>s and <code>UnitRange</code>s and <code>Colon</code>s are valid indices for each dimension.</p></div></div></section><h2><a class="nav-anchor" id="Writing-data-1" href="#Writing-data-1">Writing data</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NetCDF.putvar" href="#NetCDF.putvar"><code>NetCDF.putvar</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">NetCDF.putvar(v::NcVar,vals::Array;start::Vector=ones(Int,length(size(vals))),count::Vector=[size(vals)...])</code></pre><p>Writes the values from the array <code>vals</code> to a netcdf file. <code>v</code> is the NcVar handle of the respective variable and <code>vals</code> an array with the same dimension as the variable in the netcdf file.</p><p><strong>Keyword arguments</strong></p><ul><li><code>start</code> Vector of length <code>ndim(v)</code> setting the starting index for each dimension</li><li><code>count</code> Vector of length <code>ndim(v)</code> setting the count of values to be read along each dimension. The value -1 is treated as a special case to read all values from this dimension</li></ul></div></div><div><div><pre><code class="language-none">NetCDF.putvar(v::NcVar, val, i...)</code></pre><p>Writes the value(s) <code>val</code> to the variable <code>v</code> while the indices are given in in an array-style indexing manner.</p></div></div></section><h2><a class="nav-anchor" id="Creating-files-1" href="#Creating-files-1">Creating files</a></h2><p>To create a netCDF file you first have to define the dimensions and variables that it is supposed to hold. As representations for netCDF dimensions and variables there are the predefined NcVar and NcDim types. An NcDim object is created by:</p><pre><code class="language-none">NcDim(dimname, dimlength, atts=Dict{Any,Any}(), values=[], unlimited=false)</code></pre><p>here dimname is the dimension name, dimlength is the dimension length. The optional argument values is a 1D array of values that are written to the dimension variable and the optional argument atts is a Dict holding pairs of attribute names and values. Setting <code>unlimited=true</code> creates an unlimited dimension.</p><p>After defining the dimensions, you can create NcVar objects with</p><pre><code class="language-none">NcVar(varname , dimlist; atts=Dict{Any,Any}(), t=Float64, compress=-1)</code></pre><p>Here <em>varname</em> is the name of the variable, <em>dimlist</em> an array of type NcDim holding the dimensions associated to the variable, varattributes is a Dict holding pairs of attribute names and values. <em>t</em> is the data type that should be used for storing the variable.  You can either specify a Julia type(Int16, Int32, Float32, Float64) which will be translated to(NC<em>SHORT, NC</em>INT, NC<em>FLOAT, NC</em>DOUBLE) or directly specify one of the latter list. You can also set the compression level of the variable by setting <em>compress</em> to a number in the range 1..9 This has only an effect in netCDF4 files.</p><p>Having defined the variables, the netCDF file can be created:</p><pre><code class="language-none">netCDF.create(filename, varlist, gatts=Dict{Any,Any}(),mode=NC_netCDF4)</code></pre><p>Here, filename is the name of the file to be created and varlist an array of NcVar holding the variables that should appear in the file. In the optional argument <em>gatts</em> you can specify a Dict containing global attributes and mode is the file type you want to create(NC<em>netCDF4, NC</em>CLASSIC<em>MODEL or NC</em>64BIT_OFFSET).</p><h2><a class="nav-anchor" id="Miscellaneous-1" href="#Miscellaneous-1">Miscellaneous</a></h2><p>once you have finished reading, writing or editing your files you can close the file with</p><pre><code class="language-none">netCDF.close(nc)</code></pre><p>If you just want to synchronize your changes to the disk, run</p><pre><code class="language-none">netCDF.sync(nc)</code></pre><p>where nc is a netCDF file handler.</p><h2><a class="nav-anchor" id="Interface-for-creating-files-1" href="#Interface-for-creating-files-1">Interface for creating files</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NetCDF.NcDim" href="#NetCDF.NcDim"><code>NetCDF.NcDim</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">NcDim</code></pre><p>Represents a NetCDF dimension of name <code>name</code> optionally holding the dimension values.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NetCDF.NcVar" href="#NetCDF.NcVar"><code>NetCDF.NcVar</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">NcVar</code></pre><p><code>NcVar{T,N,M}</code> represents a NetCDF variable. It is a subtype of AbstractArray{T,N}, so normal indexing using <code>[]</code> will work for reading and writing data to and from a NetCDF file. <code>NcVar</code> objects are returned by <code>NetCDF.open</code>, by indexing an <code>NcFile</code> object (e.g. <code>myfile[&quot;temperature&quot;]</code>) or, when creating a new file, by its constructor. The type parameter <code>M</code> denotes the NetCDF data type of the variable, which may or may not correspond to the Julia Data Type.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NetCDF.create" href="#NetCDF.create"><code>NetCDF.create</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">NetCDF.create(name::String,varlist::Array{NcVar};gatts::Dict=Dict{Any,Any}(),mode::UInt16=NC_NETCDF4)</code></pre><p>Creates a new NetCDF file. Here, <code>name</code>  is the name of the file to be created and <code>varlist</code> an array of <code>NcVar</code> holding the variables that should appear in the file.</p><p><strong>Keyword arguments</strong></p><ul><li><code>gatts</code> a Dict containing global attributes of the NetCDF file</li><li><code>mode</code> NetCDF file type (NC<em>NETCDF4, NC</em>CLASSIC<em>MODEL or NC</em>64BIT<em>OFFSET), defaults to NC</em>NETCDF4</li></ul></div></div></section><footer><hr/><a class="previous" href="../highlevel/"><span class="direction">Previous</span><span class="title">High-level interface</span></a><a class="next" href="../strings/"><span class="direction">Next</span><span class="title">Short note on reading and writing NC<em>CHAR and NC</em>STRING variables</span></a></footer></article></body></html>
