<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Short note on reading and writing NCCHAR and NCSTRING variables Â· NetCDF.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>NetCDF.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../quickstart/">Quickstart</a></li><li><a class="toctext" href="../highlevel/">High-level interface</a></li><li><a class="toctext" href="../intermediate/">Medium-level interface</a></li><li class="current"><a class="toctext" href>Short note on reading and writing NC<em>CHAR and NC</em>STRING variables</a><ul class="internal"><li><a class="toctext" href="#NC_STRING-variables-1">NC_STRING variables</a></li><li><a class="toctext" href="#NC_CHAR-variables-1">NC_CHAR variables</a></li></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Short note on reading and writing NC<em>CHAR and NC</em>STRING variables</a></li></ul></nav><hr/><div id="topbar"><span>Short note on reading and writing NCCHAR and NCSTRING variables</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Short-note-on-reading-and-writing-NC*CHAR-and-NC*STRING-variables-1" href="#Short-note-on-reading-and-writing-NC*CHAR-and-NC*STRING-variables-1">Short note on reading and writing NC<em>CHAR and NC</em>STRING variables</a></h1><p>There are two common types for storing String data in NetCDF variables. The first is <code>NC_CHAR</code>, where a 1D array of strings is stored in a 2D <code>char**</code> array. Here the user must define the maximum string length and add a respective NetCDF dimension. Since NetCDF4 there is the <code>NC_STRING</code> data type that allows  the direct definition of String variables so that an N-dimensional String array directly maps to an N-dimensional  array in the NetCDF file structure.</p><h2><a class="nav-anchor" id="NC_STRING-variables-1" href="#NC_STRING-variables-1">NC_STRING variables</a></h2><p>In this package, the Julia type <code>String</code> maps to the <code>NC_STRING</code> datatype, which means that creating a variable with any of</p><pre><code class="language-none">nccreate(filename, varname, dims..., t=String)</code></pre><p>or</p><pre><code class="language-none">NcVar(varname,dims,t=String)</code></pre><p>will result in a NetCDF variable of type <code>NC_STRING</code>. You can directly write an <code>Array{String}</code> of matching shape to these variables. Similarly, calling <code>ncread</code> or <code>NetCDF.readvar</code> on any of these variables will return an <code>Array{String}</code></p><h2><a class="nav-anchor" id="NC_CHAR-variables-1" href="#NC_CHAR-variables-1">NC_CHAR variables</a></h2><p>Dealing with <code>NC_CHAR</code> variables is a bit more complicated. This has 2 reasons. First, the dimensions of the NetCDF variables do not match the dimensions of the resulting string array because of the additional <code>str_len</code> (or similar) axis that is introduced in the NetCDF file. So an n-dimensional String-Array maps to an (n+1)-dimensional <code>NC_CHAR</code> array.</p><p>Second, historically the <code>NC_CHAR</code> type has been used to store compressed data, too. So it is not always desirable to automatically convert these char arrays to strings. Anyhow, here is how you can deal with these variable types:</p><p>Assume you have a NetCDF variable of type <code>NC_CHAR</code> of dimensions (str_len: 10, axis2: 20). Calling <code>x=ncread(...)</code> or <code>x=readvar(...)</code> on this variable will return an <code>Array{UInt8,2}</code> with size <code>(10,20)</code> as it is represented on disk. If you You can either use this data directly (if it is numeric) or convert them to a <code>Vector{String}</code> by calling</p><pre><code class="language-none">y=nc_char2string(x)</code></pre><p>which will return a string vector of length 20.</p><p>An example for creating <code>NC_CHAR</code> and writing variables would be the following:</p><pre><code class="language-none">nccreate(filename,varname,&quot;str_len&quot;,20,&quot;DimValues&quot;,5,t=NC_CHAR)
xs = [&quot;a&quot;,&quot;bb&quot;,&quot;ccc&quot;,&quot;dddd&quot;,&quot;eeeee&quot;]
ncwrite(filename,varname,nc_string2char(xs))</code></pre><p>The call of <code>string2char</code> will convert the <code>Vector{String}</code> to a <code>Matrix{UInt8}</code>. which can be written to the NetCDF file.</p><footer><hr/><a class="previous" href="../intermediate/"><span class="direction">Previous</span><span class="title">Medium-level interface</span></a></footer></article></body></html>
