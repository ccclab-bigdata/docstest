<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme · Format.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Format.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li><a class="toctext" href="#Getting-Started-1">Getting Started</a></li><li><a class="toctext" href="#Python-style-Types-and-Functions-1">Python-style Types and Functions</a></li><li><a class="toctext" href="#C-style-functions-1">C-style functions</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Format-1" href="#Format-1">Format</a></h1><p>This package offers Python-style general formatting and c-style numerical formatting (for speed).</p><table><tr><th><strong>Info</strong></th><th><strong>Windows</strong></th><th><strong>Linux &amp; MacOS</strong></th><th><strong>Package Evaluator</strong></th><th><strong>CodeCov</strong></th><th><strong>Coveralls</strong></th></tr><tr><td>[![][license-img]][license-url]</td><td>[![][app-s-img]][app-s-url]</td><td>[![][travis-s-img]][travis-url]</td><td>[![][pkg-s-img]][pkg-s-url]</td><td>[![][codecov-img]][codecov-url]</td><td>[![][coverall-s-img]][coverall-s-url]</td></tr><tr><td>[![][gitter-img]][gitter-url]</td><td>[![][app-m-img]][app-m-url]</td><td>[![][travis-m-img]][travis-url]</td><td>[![][pkg-m-img]][pkg-m-url]</td><td>[![][codecov-img]][codecov-url]</td><td>[![][coverall-m-img]][coverall-m-url]</td></tr></table><p>[license-img]:  http://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat [license-url]:  LICENSE.md</p><p>[gitter-img]:   https://badges.gitter.im/Join%20Chat.svg [gitter-url]:   https://gitter.im/JuliaString/Lobby?utm<em>source=badge&amp;utm</em>medium=badge&amp;utm_campaign=pr-badge</p><p>[travis-url]:   https://travis-ci.org/JuliaString/Format.jl [travis-s-img]: https://travis-ci.org/JuliaString/Format.jl.svg [travis-m-img]: https://travis-ci.org/JuliaString/Format.jl.svg?branch=master</p><p>[app-s-url]:    https://ci.appveyor.com/project/ScottPJones/format-jl [app-m-url]:    https://ci.appveyor.com/project/ScottPJones/format-jl/branch/master [app-s-img]:    https://ci.appveyor.com/api/projects/status/9wb580eyjv4k3iej?svg=true [app-m-img]:    https://ci.appveyor.com/api/projects/status/9wb580eyjv4k3iej/branch/master?svg=true</p><p>[pkg-s-url]:    http://pkg.julialang.org/?pkg=Format [pkg-m-url]:    http://pkg.julialang.org/?pkg=Format [pkg-s-img]:    http://pkg.julialang.org/badges/Format<em>0.6.svg [pkg-m-img]:    http://pkg.julialang.org/badges/Format</em>0.7.svg</p><p>[codecov-url]:  https://codecov.io/gh/JuliaString/Format.jl [codecov-img]:  https://codecov.io/gh/JuliaString/Format.jl/branch/master/graph/badge.svg</p><p>[coverall-s-url]: https://coveralls.io/github/JuliaString/Format.jl [coverall-m-url]: https://coveralls.io/github/JuliaString/Format.jl?branch=master [coverall-s-img]: https://coveralls.io/repos/github/JuliaString/Format.jl/badge.svg [coverall-m-img]: https://coveralls.io/repos/github/JuliaString/Format.jl/badge.svg?branch=master</p><h2><a class="nav-anchor" id="Getting-Started-1" href="#Getting-Started-1">Getting Started</a></h2><p>This package is pure Julia.  It is now registered, so it can be added simply with <code>Pkg.add(&quot;Format&quot;)</code>. It is forked off of <a href="https://github.com/JuliaIO/Formatting.jl">Formatting.jl</a>, and I try to keep the oldmaster branch up to date with the master branch of that, and cherry pick or port all necessary changes to <code>Format</code>).</p><p>To start using the package, you can simply write</p><pre><code class="language-julia">using Format</code></pre><p>This package depends on Julia of version 0.6 or above, and. The package is MIT-licensed.</p><h2><a class="nav-anchor" id="Python-style-Types-and-Functions-1" href="#Python-style-Types-and-Functions-1">Python-style Types and Functions</a></h2><h4><a class="nav-anchor" id="Types-to-Represent-Formats-1" href="#Types-to-Represent-Formats-1">Types to Represent Formats</a></h4><p>This package has two types <span>$FormatSpec$</span> and <span>$FormatExpr$</span> to represent a format specification.</p><p>In particular, <span>$FormatSpec$</span> is used to capture the specification of a single entry. One can compile a format specification string into a <span>$FormatSpec$</span> instance as</p><pre><code class="language-julia">fspec = FormatSpec(&quot;d&quot;)
fspec = FormatSpec(&quot;&lt;8.4f&quot;)</code></pre><p>Please refer to <a href="http://docs.python.org/2/library/string.html#formatspec">Python&#39;s format specification language</a> for details.</p><p><span>$FormatExpr$</span> captures a formatting expression that may involve multiple items. One can compile a formatting string into a <span>$FormatExpr$</span> instance as</p><pre><code class="language-julia">fe = FormatExpr(&quot;{1} + {2}&quot;)
fe = FormatExpr(&quot;{1:d} + {2:08.4e} + {3|&gt;abs2}&quot;)</code></pre><p>Please refer to <a href="http://docs.python.org/2/library/string.html#format-string-syntax">Python&#39;s format string syntax</a> for details.</p><p><strong>Note:</strong> If the same format is going to be applied for multiple times. It is more efficient to first compile it.</p><h4><a class="nav-anchor" id="Formatted-Printing-1" href="#Formatted-Printing-1">Formatted Printing</a></h4><p>One can use <span>$printfmt$</span> and <span>$printfmtln$</span> for formatted printing:</p><ul><li><p><strong>printfmt</strong>(io, fe, args...)</p></li><li><p><strong>printfmt</strong>(fe, args...)</p><p>Print given arguments using given format <span>$fe$</span>. Here <span>$fe$</span> can be a formatting string, an instance of <span>$FormatSpec$</span> or <span>$FormatExpr$</span>.</p><p><strong>Examples</strong></p><p>```julia   printfmt(&quot;{1:&gt;4s} + {2:.2f}&quot;, &quot;abc&quot;, 12) # –&gt; print(&quot; abc + 12.00&quot;)   printfmt(&quot;{} = {:#04x}&quot;, &quot;abc&quot;, 12) # –&gt; print(&quot;abc = 0x0c&quot;) </p><p>fs = FormatSpec(&quot;#04x&quot;)   printfmt(fs, 12)   # –&gt; print(&quot;0x0c&quot;)</p><p>fe = FormatExpr(&quot;{} = {:#04x}&quot;)   printfmt(fe, &quot;abc&quot;, 12)   # –&gt; print(&quot;abc = 0x0c&quot;)   ```</p><p><strong>Notes</strong></p><p>If the first argument is a string, it will be first compiled into a <span>$FormatExpr$</span>, which implies that you can not use specification-only string in the first argument.</p><p>```julia   printfmt(&quot;{1:d}&quot;, 10)   # OK, &quot;{1:d}&quot; can be compiled into a FormatExpr instance   printfmt(&quot;d&quot;, 10)       # Error, &quot;d&quot; can not be compiled into a FormatExpr instance                           # such a string to specify a format specification for single argument</p><p>printfmt(FormatSpec(&quot;d&quot;), 10)  # OK   printfmt(FormatExpr(&quot;{1:d}&quot;, 10)) # OK   ```</p></li></ul><ul><li><p><strong>printfmtln</strong>(io, fe, args...)</p></li><li><p><strong>printfmtln</strong>(fe, args...)</p><p>Similar to <span>$printfmt$</span> except that this function print a newline at the end.</p></li></ul><h4><a class="nav-anchor" id="Formatted-String-1" href="#Formatted-String-1">Formatted String</a></h4><p>One can use <span>$pyfmt$</span> to format a single value into a string, or <span>$format$</span> to format one to multiple arguments into a string using an format expression.</p><ul><li><p><strong>pyfmt</strong>(fspec, a)</p><p>Format a single value using a format specification given by <span>$fspec$</span>, where <span>$fspec$</span> can be either a string or an instance of <span>$FormatSpec$</span>.</p></li><li><p><strong>format</strong>(fe, args...)</p><p>Format arguments using a format expression given by <span>$fe$</span>, where <span>$fe$</span> can be either a string or an instance of <span>$FormatSpec$</span>.</p></li></ul><h4><a class="nav-anchor" id="Difference-from-Python&#39;s-Format-1" href="#Difference-from-Python&#39;s-Format-1">Difference from Python&#39;s Format</a></h4><p>At this point, this package implements a subset of Python&#39;s formatting language (with slight modification). Here is a summary of the differences:</p><ul><li><p><span>$g$</span> and <span>$G$</span> for floating point formatting have not been supported yet. Please use <span>$f$</span>, <span>$e$</span>, or <span>$E$</span> instead.</p></li><li><p>The package currently provides default alignment, left alignment <span>$&lt;$</span> and right alignment <span>$&gt;$</span>. Other form of alignment such as centered alignment <span>$^$</span> has not been supported yet.</p></li><li><p>In terms of argument specification, it supports natural ordering (e.g. <span>${} + {}$</span>), explicit position (e.g. <span>${1} + {2}$</span>). It hasn&#39;t supported named arguments or fields extraction yet. Note that mixing these two modes is not allowed (e.g. <span>${1} + {}$</span>).</p></li><li><p>The package provides support for filtering (for explicitly positioned arguments), such as <span>${1|&gt;lowercase}$</span> by allowing one to embed the <span>$|&gt;$</span> operator, which the Python counter part does not support.</p></li></ul><h2><a class="nav-anchor" id="C-style-functions-1" href="#C-style-functions-1">C-style functions</a></h2><p>The c-style part of this package aims to get around the limitation that <code>@sprintf</code> has to take a literal string argument. The core part is basically a c-style print formatter using the standard <code>@sprintf</code> macro. It also adds functionalities such as commas separator (thousands), parenthesis for negatives, stripping trailing zeros, and mixed fractions.</p><h3><a class="nav-anchor" id="Usage-and-Implementation-1" href="#Usage-and-Implementation-1">Usage and Implementation</a></h3><p>The idea here is that the package compiles a function only once for each unique format string within the <code>Format.*</code> name space, so repeated use is faster. Unrelated parts of a session using the same format string would reuse the same function, avoiding redundant compilation. To avoid the proliferation of functions, we limit the usage to only 1 argument. Practical consideration would suggest that only dozens of functions would be created in a session, which seems manageable.</p><p>Usage</p><pre><code class="language-julia">using Format

fmt = &quot;%10.3f&quot;
s = cfmt( fmt, 3.14159 ) # usage 1. Quite performant. Easiest to switch to.

fmtrfunc = generate_formatter( fmt ) # usage 2. This bypass repeated lookup of cached function. Most performant.
s = fmtrfunc( 3.14159 )

s = format( 3.14159, precision=3 ) # usage 3. Most flexible, with some non-printf options. Least performant.</code></pre><h3><a class="nav-anchor" id="Speed-1" href="#Speed-1">Speed</a></h3><p><code>cfmt</code>: Speed penalty is about 20% for floating point and 30% for integers.</p><p>If the formatter is stored and used instead (see the example using <code>generate_formatter</code> above), the speed penalty reduces to 10% for floating point and 15% for integers.</p><h3><a class="nav-anchor" id="Commas-1" href="#Commas-1">Commas</a></h3><p>This package also supplements the lack of thousand separator e.g. <code>&quot;%&#39;d&quot;</code>, <code>&quot;%&#39;f&quot;</code>, <code>&quot;%&#39;s&quot;</code>.</p><p>Note: <code>&quot;%&#39;s&quot;</code> behavior is that for small enough floating point (but not too small), thousand separator would be used. If the number needs to be represented by <code>&quot;%e&quot;</code>, no separator is used.</p><h3><a class="nav-anchor" id="Flexible-format-function-1" href="#Flexible-format-function-1">Flexible <code>format</code> function</a></h3><p>This package contains a run-time number formatter <code>format</code> function, which goes beyond the standard <code>sprintf</code> functionality.</p><p>An example:</p><pre><code class="language-julia">s = format( 1234, commas=true ) # 1,234
s = format( -1234, commas=true, parens=true ) # (1,234)</code></pre><p>The keyword arguments are (Bold keywards are not printf standard)</p><ul><li>width. Integer. Try to fit the output into this many characters. May not be successful.  Sacrifice space first, then commas.</li><li>precision. Integer. How many decimal places.</li><li>leftjustified. Boolean</li><li>zeropadding. Boolean</li><li>commas. Boolean. Thousands-group separator.</li><li>signed. Boolean. Always show +/- sign?</li><li>positivespace. Boolean. Prepend an extra space for positive numbers? (so they align nicely with negative numbers)</li><li><strong>parens</strong>. Boolean. Use parenthesis instead of &quot;-&quot;. e.g. <code>(1.01)</code> instead of <code>-1.01</code>. Useful in finance. Note that you cannot use <code>signed</code> and <code>parens</code> option at the same time.</li><li><strong>stripzeros</strong>. Boolean. Strip trailing &#39;0&#39; to the right of the decimal (and to the left of &#39;e&#39;, if any ).<ul><li>It may strip the decimal point itself if all trailing places are zeros.</li><li>This is true by default if precision is not given, and vice versa.</li></ul></li><li>alternative. Boolean. See <code>#</code> alternative form explanation in standard printf documentation</li><li>conversion. length=1 string. Default is type dependent. It can be one of <code>aAeEfFoxX</code>. See standard printf documentation.</li><li><strong>mixedfraction</strong>. Boolean. If the number is rational, format it in mixed fraction e.g. <code>1_1/2</code> instead of <code>3/2</code></li><li><strong>mixedfractionsep</strong>. Default <code>_</code></li><li><strong>fractionsep</strong>. Default <code>/</code></li><li><strong>fractionwidth</strong>. Integer. Try to pad zeros to the numerator until the fractional part has this width</li><li><strong>tryden</strong>. Integer. Try to use this denominator instead of a smaller one. No-op if it&#39;d lose precision.</li><li><strong>suffix</strong>. String. This strings will be appended to the output. Useful for units/%</li><li><strong>autoscale</strong>. Symbol, default <code>:none</code>. It could be <code>:metric</code>, <code>:binary</code>, or <code>:finance</code>.<ul><li><code>:metric</code> implements common SI symbols for large and small numbers e.g. <code>M</code>, <code>k</code>, <code>μ</code>, <code>n</code></li><li><code>:binary</code> implements common ISQ symbols for large numbers e.g. <code>Ti</code>, <code>Gi</code>, <code>Mi</code>, <code>Ki</code></li><li><code>:finance</code> implements common finance/news symbols for large numbers e.g. <code>b</code> (billion), <code>m</code> (millions)</li></ul></li></ul><p>See the test script for more examples.</p><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
