<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Docstrings · ExpectationStubs.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>ExpectationStubs.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Readme</a></li><li class="current"><a class="toctext" href>Docstrings</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Docstrings</a></li></ul></nav><hr/><div id="topbar"><span>Docstrings</span><a class="fa fa-bars" href="#"></a></div></header><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.@expect" href="#ExpectationStubs.@expect"><code>ExpectationStubs.@expect</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@expect(defn)</code></pre><p>Prepares a stub, lets it know to expect a function call matching the <code>defn</code>, and to return the result.</p><p>Has several forms, which align to julia function declations. Examples:</p><ul><li><code>@expect(foo(1, 1.5)=10)</code> this prepares the stub <code>foo</code>, to return 10, if it gets given the input <code>(1, 1.5)</code></li><li><code>@expect(foo(3, ::Int)=20)</code> this prepares the stub <code>foo</code>, to return 20, if it gets given the input with first arguement 3, and second argument any <code>Int</code></li><li><code>@expect(foo(5, ::Any)=30)</code> this prepares the stub <code>foo</code>, to return 30, if it gets given the input with first arguement 5, and second argument any type</li><li><code>@expect(foo(Any, ::Any)=40)</code> this prepares the stub <code>foo</code>, to return 40, if it is given 2 arguements</li></ul><p>Notes that you can not for the same stub both the declare that it is bound by type (i.e. that it can take anything of a given type), and declare that it is bound by value, for the same parameter.</p><p>Note that the result can not depend on the arguments of the function. This is intentional, as it is there to keep your Stubs simple and to the point. So you don&#39;t end up needing to test your tests.</p><p>Currently does not support KWArgs.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.@stub" href="#ExpectationStubs.@stub"><code>ExpectationStubs.@stub</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@stub(name)</code></pre><p>Declares that you will be making a stub function called <code>name</code>. The key difference between a stub and a julia function, is that stubs can have values for arguements declared, which must match, as well as having types which must match. Also they are simpler, in that they can not varying their return result based on argument.</p><p>Once you have declared a stub, you should use <code>@expect</code> to declare what it should respond to.</p><p>Calling methods that do not exist (with values provided), will result in Errors. This is intentional, as the stub exists to check that your function is only called with the arguements that you say are valid.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.@usecount" href="#ExpectationStubs.@usecount"><code>ExpectationStubs.@usecount</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@usecount(defn)</code></pre><p>Like <code>@used</code> but returns the count of how many times the particular expectation  was called.</p><p>Syntax is the same.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.@used" href="#ExpectationStubs.@used"><code>ExpectationStubs.@used</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@used(defn)</code></pre><p>Returns true if a particular expectionation was used. Syntax is similar to <code>@expect</code></p><p>Like <code>@expect</code> the key can be a value or a type. It does not have to match to the one that was used in <code>@expect</code></p><p>Normally one would used this inside a test:</p><ul><li><code>@test @used(foo(1, 1.5))</code> test that <code>foo</code> was called with <code>(1, 1.5)</code></li><li><code>@test @used(foo(3, ::Int))</code> test the <code>foo</code> was called with 3 and some Int</li><li><code>@test !@used(foo(5, ::Any))</code> test that <code>foo</code> was never called with the first arg 5 (and exactly 2 args)</li><li><code>@test !@used(foo(Any, ::Any))</code> test tjat <code>foo</code> was never alled with 2 args</li></ul></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.DoNotCare" href="#ExpectationStubs.DoNotCare"><code>ExpectationStubs.DoNotCare</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">DoNotCare{T}</code></pre><p>A type that is equal to all things that are of type &lt;:T. For internal use. Will interact weirdly with hash based dicts</p></div></div></section><pre><code class="language-none">ExpectationStubs.ExpectationStubs</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.ExpectationValueMismatchError" href="#ExpectationStubs.ExpectationValueMismatchError"><code>ExpectationStubs.ExpectationValueMismatchError</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>ExpectationValueMismatchError</p><p>Similar to a julia MethodError This is thrown if a call was made on a stub, but the values/types did not match those that were expected.</p></div></div></section><pre><code class="language-none">ExpectationStubs.Stub</code></pre><pre><code class="language-none">ExpectationStubs.SyntaxError</code></pre><pre><code class="language-none">ExpectationStubs.VectorDict</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.all_expectations_used" href="#ExpectationStubs.all_expectations_used"><code>ExpectationStubs.all_expectations_used</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">all_expectations_used(stub::Stub)</code></pre><p>Checks that every expectation setup for the stub was actually used. It is good to have this as a sanity check at the end of your test script using the stub.</p></div></div></section><pre><code class="language-none">ExpectationStubs.eval</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.get_all_matches" href="#ExpectationStubs.get_all_matches"><code>ExpectationStubs.get_all_matches</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_all_matches(vd::VectorDict, key)</code></pre><p>Returns all values matching the key</p></div></div></section><pre><code class="language-none">ExpectationStubs.include</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.name_argvals_and_sig" href="#ExpectationStubs.name_argvals_and_sig"><code>ExpectationStubs.name_argvals_and_sig</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">name_argvals_and_sig(defn)</code></pre><p>Does the extraction of these as is needed for <code>@used</code> and <code>@usedcounts</code></p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.onlyesc" href="#ExpectationStubs.onlyesc"><code>ExpectationStubs.onlyesc</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">onlyesc(v)</code></pre><p>Like <code>esc</code>, except it ignores things that can not be escaped. Eg literals.</p><p>Internal use</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.split_vals_and_sig" href="#ExpectationStubs.split_vals_and_sig"><code>ExpectationStubs.split_vals_and_sig</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">split_vals_and_sig(argsexpr)</code></pre><p>Takes an expression from a function definition&#39;s args eg <code>:([a::Int, ::Integer])</code> and breaks it down into the values, and the types. When value is not given it subsitutes <code>DoNotCare()</code>, when type is not given it subsitutes <code>typeof(val)</code> Returns a tuple of each, with all things in expression/symbol form.</p><p>Internal use</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExpectationStubs.usecount" href="#ExpectationStubs.usecount"><code>ExpectationStubs.usecount</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">usecount(stub:Stub, arg)</code></pre><p>Returns how many times the <code>stub</code> has been called with a matching argument</p></div></div></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Readme</span></a></footer></article></body></html>
