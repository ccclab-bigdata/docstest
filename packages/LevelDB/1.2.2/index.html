<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme Â· LevelDB.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>LevelDB.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li><a class="toctext" href="#Install-LevelDB-1">Install LevelDB</a></li><li><a class="toctext" href="#Run-Testing-Code-1">Run Testing Code</a></li><li><a class="toctext" href="#Create/Open/Close-a-LevelDB-database-1">Create/Open/Close a LevelDB database</a></li><li><a class="toctext" href="#Read-and-Write-Operations-1">Read and Write Operations</a></li><li><a class="toctext" href="#Batched-Write-1">Batched Write</a></li><li><a class="toctext" href="#General-for-loop-1">General for loop</a></li><li><a class="toctext" href="#Author-1">Author</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="LevelDB-1" href="#LevelDB-1">LevelDB</a></h1><p>LevelDB is Google&#39;s open source on-disk key-value storage library that provides an ordered mapping from string keys to binary values. In many applications where only key based accesses are needed, it tends to be a faster alternative than databases.  LevelDB was written in C++ with a C calling API included. This module provides a Julia interface to LevelDB using Julia&#39;s  ccall mechanism.</p><h2><a class="nav-anchor" id="Install-LevelDB-1" href="#Install-LevelDB-1">Install LevelDB</a></h2><p>You can build LevelDB from its source code at https://github.com/google/leveldb. Please install the final dynamic library into a system directory such as /usr/lib or make sure libleveldb.so is in one of your LD<em>LIBRARY</em>PATH directories.</p><h2><a class="nav-anchor" id="Run-Testing-Code-1" href="#Run-Testing-Code-1">Run Testing Code</a></h2><pre><code class="language-none">julia test/runtests.jl</code></pre><p>This will exercise batched and non-batched writes and reads for string and float array values.</p><h2><a class="nav-anchor" id="Create/Open/Close-a-LevelDB-database-1" href="#Create/Open/Close-a-LevelDB-database-1">Create/Open/Close a LevelDB database</a></h2><pre><code class="language-none">function open_db(file_path, create_if_missing)</code></pre><p>Here file<em>path is the full path to a directory that hosts a LevelDB database, create</em>if_missing is a boolean flag when true the database will be created if it does not exist.  The return value is a database object for passing to read/write calls.</p><pre><code class="language-none">function close_db(db)</code></pre><p>Close a database, db is the object returned from a open_db call.</p><h2><a class="nav-anchor" id="Read-and-Write-Operations-1" href="#Read-and-Write-Operations-1">Read and Write Operations</a></h2><pre><code class="language-none">function db_put(db, key, value, val_len)</code></pre><p>key is a string, value is a pointer to a byte array, val_len is its length</p><pre><code class="language-none">function db_get(db, key)</code></pre><p>Return value is a UInt8 array, one can use the reinterpret Julia function to cast it into the right array type (see test code).</p><pre><code class="language-none">function db_delete(db, key)</code></pre><h2><a class="nav-anchor" id="Batched-Write-1" href="#Batched-Write-1">Batched Write</a></h2><p>LevelDB supports grouping a number of put operations into a WriteBatch, the batch will either succeed as a whole or fail altogether, behaving like an atomic update.</p><pre><code class="language-none">function create_write_batch()</code></pre><p>Create a WriteBatch object.</p><pre><code class="language-none">function batch_put(batch, key, value, val_len)</code></pre><p>Add one key value Put operation into a WriteBatch</p><pre><code class="language-none">function write_batch(db, batch)</code></pre><p>Commit the WriteBatch into the database as an atomic write.</p><h2><a class="nav-anchor" id="General-for-loop-1" href="#General-for-loop-1">General for loop</a></h2><pre><code class="language-none">range = db_range(db, &quot;key_start&quot;, &quot;key_end&quot;)
for (k, v) in range
  #do something
end</code></pre><p>Note: if you <code>break</code> the loop, you had to manually close the range by <code>range_close(range)</code>.</p><h2><a class="nav-anchor" id="Author-1" href="#Author-1">Author</a></h2><p>Jerry Zhenlei Cai ( jpenguin@gmail dot com )</p><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
