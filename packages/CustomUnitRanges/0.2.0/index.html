<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme · CustomUnitRanges.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>CustomUnitRanges.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li class="toplevel"><a class="toctext" href="#What&#39;s-in-this-package-1">What&#39;s in this package</a></li><li class="toplevel"><a class="toctext" href="#Usage-1">Usage</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="CustomUnitRanges-1" href="#CustomUnitRanges-1">CustomUnitRanges</a></h1><p><a href="https://travis-ci.org/JuliaArrays/CustomUnitRanges.jl"><img src="https://travis-ci.org/JuliaArrays/CustomUnitRanges.jl.svg?branch=master" alt="Build Status"/></a></p><p><a href="http://codecov.io/github/JuliaArrays/CustomUnitRanges.jl?branch=master"><img src="http://codecov.io/github/JuliaArrays/CustomUnitRanges.jl/coverage.svg?branch=master" alt="codecov.io"/></a></p><p>This Julia package supports the creation of array types with &quot;unconventional&quot; indices, i.e., when the indices may not start at 1. With this package, each custom array type can have a corresponding <code>indices</code> range type, consequently providing a means for consistency in allocation by <code>similar</code>.</p><p>See http://docs.julialang.org/en/latest/devdocs/offset-arrays.html for more information about defining and using array types with non-1 indices.</p><h1><a class="nav-anchor" id="What&#39;s-in-this-package-1" href="#What&#39;s-in-this-package-1">What&#39;s in this package</a></h1><p>Currently this package defines two <code>AbstractUnitRange</code> types:</p><ul><li><p><code>ZeroRange</code>, where <code>ZeroRange(n)</code> is the equivalent of <code>0:n-1</code>, except that Julia&#39;s type system knows that the lower bound is 0. (This is analogous to <code>Base</code>&#39;s <code>OneTo</code> type.) This is useful for defining arrays that are indexed starting with 0.</p></li><li><p><code>URange</code>, a parallel to <code>UnitRange</code>, for defining arbitrary range indices.</p></li></ul><h1><a class="nav-anchor" id="Usage-1" href="#Usage-1">Usage</a></h1><p>This package has a somewhat atypical usage: you should <code>include</code> files from this repository at the source level. The reason is that this package&#39;s range types should be <strong>private</strong> to the module that needs them; consequently you don&#39;t want to define a module in the global namespace.</p><p>Instead, suppose you&#39;re defining an array type that supports arbitrary indices. In broad terms, your module might look like this:</p><pre><code class="language-jl">module MyArrayType

using CustomUnitRanges: filename_for_urange
include(filename_for_urange)

struct MyArray{T,N} &lt;: AbstractArray{T,N}
    ...
end

indices(A::MyArray) = map(URange, #=starting indices=#, #=ending indices=#)

...

end</code></pre><p>Here,</p><pre><code class="language-none">using CustomUnitRanges: filename_for_urange</code></pre><p>brings a non-exported string, <code>filename_for_urange</code>, into the scope of <code>MyArrayType</code>. The key line is the <code>include(filename_for_urange)</code> statement, which will load (at source-level) the code for the <code>URange</code> type into your <code>MyArrayType</code> module.  We chose <code>&quot;URange.jl&quot;</code> because here we want arbitrary indices; had we wanted zero-based indices, we would have chosen <code>&quot;ZeroRange.jl&quot;</code> instead. Second, note that the output of <code>indices</code> is a <code>URange</code> type. More specifically, it&#39;s creating a tuple of <code>MyArrayType.URange</code>–-there is no &quot;global&quot; <code>URange</code> type, so the indices-tuple is therefore <em>specific to this package</em>.</p><p>The important result is that two packages, defining <code>MyArray</code> and <code>OtherArray</code>, can independently exploit <code>URange</code>.  If <code>MyArrayType</code> includes the specialization</p><pre><code class="language-jl">function Base.similar(f::Union{Type,Function}, shape::Tuple{URange,Vararg{URange}}
    MyArray(f(map(length, shape)), #=something for the offset=#)
end</code></pre><p>and similarly for <code>OtherArrayType</code>. Then, if <code>A</code> is a <code>MyArray</code> and <code>B</code> is an <code>OtherArray</code>,</p><ul><li><code>similar(Array{Int}, indices(A))</code> will create another <code>MyArray</code></li><li><code>similar(Array{Int}, indices(B))</code> will create another <code>OtherArray</code></li></ul><p>despite the fact that they both use <code>URange</code>.</p><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
