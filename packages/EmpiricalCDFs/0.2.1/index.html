<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>EmpiricalCDFs · EmpiricalCDFs.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>EmpiricalCDFs.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>EmpiricalCDFs</a><ul class="internal"><li><a class="toctext" href="#Contents-1">Contents</a></li><li><a class="toctext" href="#Index-1">Index</a></li><li><a class="toctext" href="#Empirical-CDF-types-1">Empirical CDF types</a></li><li><a class="toctext" href="#Functions-1">Functions</a></li><li><a class="toctext" href="#Text-file-output-1">Text file output</a></li><li><a class="toctext" href="#Binary-IO-1">Binary IO</a></li><li><a class="toctext" href="#Comparison-with-ecdf-1">Comparison with <code>ecdf</code></a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>EmpiricalCDFs</a></li></ul></nav><hr/><div id="topbar"><span>EmpiricalCDFs</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="EmpiricalCDFs-1" href="#EmpiricalCDFs-1">EmpiricalCDFs</a></h1><p><em>Empirical cumulative distribution functions</em></p><p>The source repository is <a href="https://github.com/jlapeyre/EmpiricalCDFs.jl">https://github.com/jlapeyre/EmpiricalCDFs.jl</a>.</p><p>Provides <a href="https://en.wikipedia.org/wiki/Empirical_distribution_function">empirical cumulative distribution functions (CDFs)</a> (or &quot;empirical distribution functions&quot; as they are know to probabalists).</p><p><em>EmpiricalCDFs</em> implements empirical CDFs; building, evaluating, random sampling, evaluating the inverse, etc.  It is useful especially for examining the tail of the CDF obtained from streaming a large number of data, more than can be stored in memory.  For this purpose, you specify a lower cutoff; data points below this value will be silently rejected, but the resulting CDF will still be properly normalized. This ability to process and filter data <a href="https://en.wikipedia.org/wiki/Online_algorithm">online</a> is absent in <code>StatsBase.ecdf</code>.</p><pre><code class="language-julia"> cdf = EmpiricalCDF()
 push!(cdf,x)
 ...
 print(io,cdf)

# reject points `x &lt; xmin` to use less memory
 cdf = EmpiricalCDF(xmin)</code></pre><h3><a class="nav-anchor" id="Warning-about-sorting-1" href="#Warning-about-sorting-1">Warning about sorting</a></h3><p>Before using the cdf, you must call <code>sort!(cdf)</code>. For efficiency data is not sorted as it is inserted. The exception is <code>print</code>, which does sort the cdf before printing.</p><h2><a class="nav-anchor" id="Contents-1" href="#Contents-1">Contents</a></h2><ul><li><a href="#EmpiricalCDFs-1">EmpiricalCDFs</a></li><ul><li><a href="#Contents-1">Contents</a></li><li><a href="#Index-1">Index</a></li><li><a href="#Empirical-CDF-types-1">Empirical CDF types</a></li><li><a href="#Functions-1">Functions</a></li><li><a href="#Text-file-output-1">Text file output</a></li><li><a href="#Binary-IO-1">Binary IO</a></li><li><a href="#Comparison-with-ecdf-1">Comparison with <code>ecdf</code></a></li></ul></ul><h2><a class="nav-anchor" id="Index-1" href="#Index-1">Index</a></h2><ul><li><a href="#EmpiricalCDFs.AbstractEmpiricalCDF"><code>EmpiricalCDFs.AbstractEmpiricalCDF</code></a></li><li><a href="#EmpiricalCDFs.CDFfile"><code>EmpiricalCDFs.CDFfile</code></a></li><li><a href="#EmpiricalCDFs.EmpiricalCDF"><code>EmpiricalCDFs.EmpiricalCDF</code></a></li><li><a href="#EmpiricalCDFs.EmpiricalCDFHi"><code>EmpiricalCDFs.EmpiricalCDFHi</code></a></li><li><a href="#Base.append!"><code>Base.append!</code></a></li><li><a href="#Base.print"><code>Base.print</code></a></li><li><a href="#Base.push!"><code>Base.push!</code></a></li><li><a href="#Base.rand"><code>Base.rand</code></a></li><li><a href="#Base.sort!"><code>Base.sort!</code></a></li><li><a href="#EmpiricalCDFs.counts"><code>EmpiricalCDFs.counts</code></a></li><li><a href="#EmpiricalCDFs.data"><code>EmpiricalCDFs.data</code></a></li><li><a href="#EmpiricalCDFs.finv"><code>EmpiricalCDFs.finv</code></a></li><li><a href="#EmpiricalCDFs.getcdf"><code>EmpiricalCDFs.getcdf</code></a></li><li><a href="#EmpiricalCDFs.header"><code>EmpiricalCDFs.header</code></a></li><li><a href="#EmpiricalCDFs.linprint"><code>EmpiricalCDFs.linprint</code></a></li><li><a href="#EmpiricalCDFs.logprint"><code>EmpiricalCDFs.logprint</code></a></li><li><a href="#EmpiricalCDFs.readcdf"><code>EmpiricalCDFs.readcdf</code></a></li><li><a href="#EmpiricalCDFs.readcdfinfo"><code>EmpiricalCDFs.readcdfinfo</code></a></li><li><a href="#EmpiricalCDFs.save"><code>EmpiricalCDFs.save</code></a></li><li><a href="#EmpiricalCDFs.version"><code>EmpiricalCDFs.version</code></a></li></ul><h2><a class="nav-anchor" id="Empirical-CDF-types-1" href="#Empirical-CDF-types-1">Empirical CDF types</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.AbstractEmpiricalCDF" href="#EmpiricalCDFs.AbstractEmpiricalCDF"><code>EmpiricalCDFs.AbstractEmpiricalCDF</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">AbstractEmpiricalCDF</code></pre><p>Concrete types are <code>EmpiricalCDF</code> and <code>EmpiricalCDFHi</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.EmpiricalCDF" href="#EmpiricalCDFs.EmpiricalCDF"><code>EmpiricalCDFs.EmpiricalCDF</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">EmpiricalCDF()</code></pre><p>Return an empirical CDF. After inserting elements with <code>push!</code> or <code>append!</code>, and before being accessed using any of the functions below, the CDF must be sorted with <code>sort!</code>.</p><p><code>EmpiricalCDF</code> and <code>EmpiricalCDFHi</code> are callable objects.</p><pre><code class="language-julia-repl">julia&gt; cdf = EmpiricalCDF();
julia&gt; append!(cdf,randn(10^6));
julia&gt; sort!(cdf);
julia&gt; cdf(0.0)
0.499876
julia&gt; cdf(1.0)
0.840944
julia&gt; cdf(-1.0)
0.158494</code></pre><p>In this example, we collected <span>$10^6$</span> samples from the unit normal distribution. About half of the samples are greater than zero. Approximately the same mass is between zero and one as is between zero and minus one.</p></div></div><div><div><pre><code class="language-none">EmpiricalCDF(lowreject::Real)</code></pre><p>If <code>lowereject</code> is finite return <code>EmpiricalCDFHi(lowreject)</code>. Otherwise return <code>EmpiricalCDF()</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.EmpiricalCDFHi" href="#EmpiricalCDFs.EmpiricalCDFHi"><code>EmpiricalCDFs.EmpiricalCDFHi</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">EmpiricalCDFHi{T &lt;: Real} &lt;: AbstractEmpiricalCDF</code></pre><p>Empirical CDF with lower cutoff. That is, keep only the tail.</p></div></div></section><h2><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.push!" href="#Base.push!"><code>Base.push!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">push!(cdf::EmpiricalCDF,x::Real)</code></pre><p>add the sample <code>x</code> to <code>cdf</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.append!" href="#Base.append!"><code>Base.append!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">append!(cdf::EmpiricalCDF, a::AbstractArray)</code></pre><p>add samples in <code>a</code> to <code>cdf</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.sort!" href="#Base.sort!"><code>Base.sort!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">sort!(cdf::AbstractEmpiricalCDF)</code></pre><p>Sort the data collected in <code>cdf</code>. You must call <code>sort!</code> before using <code>cdf</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.data" href="#EmpiricalCDFs.data"><code>EmpiricalCDFs.data</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">data(cdf::AbstractEmpiricalCDF)</code></pre><p>return the array holding samples for <code>cdf</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.counts" href="#EmpiricalCDFs.counts"><code>EmpiricalCDFs.counts</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">counts(cdf::AbstractEmpiricalCDF)</code></pre><p>return the number of counts added to <code>cdf</code>. This includes counts that may have been discarded because they are below of the cutoff.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.rand" href="#Base.rand"><code>Base.rand</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">rand(cdf::EmpiricalCDF)</code></pre><p>Pick a random sample from the distribution represented by <code>cdf</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.finv" href="#EmpiricalCDFs.finv"><code>EmpiricalCDFs.finv</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">finv(cdf::AbstractEmpiricalCDF) --&gt; Function</code></pre><p>Return the functional inverse of <code>cdf</code>. <code>cdf</code> is a callable object. <code>finv(cdf)</code> returns a function that captures <code>cdf</code> in a closure.</p><p>The following example begins with <code>cdf</code> containing <span>$10^6$</span> samples from the unit normal distribution.</p><pre><code class="language-julia-repl">julia&gt; icdf = finv(cdf);
julia&gt; icdf(.5)
-0.00037235611091389375
julia&gt; icdf(1.0-eps())
4.601393290425543
julia&gt; maximum(cdf)
4.601393290425543</code></pre></div></div></section><p>Methods are defined on <code>AbstractEmpiricalCDF</code> for the following functions: <code>length</code>, <code>minimum</code>, <code>maximum</code>, <code>extrema</code>, <code>mean</code>, <code>median</code>, <code>std</code>, <code>quantile</code>.</p><h2><a class="nav-anchor" id="Text-file-output-1" href="#Text-file-output-1">Text file output</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.print" href="#Base.print"><code>Base.print</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">print(io::IO, cdf::AbstractEmpiricalCDF)</code></pre><p>Call logprint(io,cdf)</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.linprint" href="#EmpiricalCDFs.linprint"><code>EmpiricalCDFs.linprint</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>linprint(io::IO ,cdf::AbstractEmpiricalCDF, n=2000)</code> print (not more than) <code>n</code> linearly spaced points after sorting the data.</p></div></div><div><div><pre><code class="language-none">linprint(fn::String, cdf::AbstractEmpiricalCDF, n=2000)</code></pre><p>print <code>cdf</code> to file <code>fn</code>. Print no more than <code>n</code> linearly spaced points.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.logprint" href="#EmpiricalCDFs.logprint"><code>EmpiricalCDFs.logprint</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>logprint(io::IO, cdf::EmpiricalCDF, n=2000)</code> print (not more than) <code>n</code> log spaced points after sorting the data.</p></div></div></section><h2><a class="nav-anchor" id="Binary-IO-1" href="#Binary-IO-1">Binary IO</a></h2><p>I found available serialization choices to be too slow. So, very simple, very fast, binary storage and retrieval is provided. By now, or in the future, there will certainly be packages that provide a sufficient or better replacement.</p><p>The type <code>CDFfile</code> supports reading and writing <code>AbstractEmpiricalCDF</code> objects in binary format. Most functions that operate on <code>AbstractEmpiricalCDF</code> also work with <code>CDFfile</code>, with the call being passed to the <code>cdf</code> field.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.CDFfile" href="#EmpiricalCDFs.CDFfile"><code>EmpiricalCDFs.CDFfile</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">CDFfile(cdf::AbstractEmpiricalCDF, header=&quot;&quot;)

struct CDFfile{T &lt;: AbstractEmpiricalCDF}
    cdf::T
    header::String
end</code></pre><p>Binary data file for <code>AbstractEmpiricalCDF</code></p><p>The file format is</p><ul><li>Identifying string</li><li><code>n::Int64</code> number of bytes in the header string</li><li><code>s::String</code> The header string</li><li><code>t::Int64</code> Type of <code>AbstractEmpiricalCDF</code>, 1 or 2. 1 for <code>EmpiricalCDF</code>, 2 for <code>EmpiricalCDFHi</code>.</li><li><code>lowreject::Float64</code> the lower cutoff, only for <code>EmpiricalCDFHi</code>.</li><li><code>npts::Int64</code> number of data points in the CDF</li><li><code>npts</code> data points of type <code>Float64</code></li></ul></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.save" href="#EmpiricalCDFs.save"><code>EmpiricalCDFs.save</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">save(fn::String, cdf::AbstractEmpiricalCDF, header::String=&quot;&quot;)</code></pre><p>write <code>cdf</code> to file <code>fn</code> in a fast binary format.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.readcdf" href="#EmpiricalCDFs.readcdf"><code>EmpiricalCDFs.readcdf</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">readcdf(fn::String)</code></pre><p>Read an empirical CDF from file <code>fn</code>. Return an object <code>cdff</code> of type <code>CDFfile</code>. The header is in field <code>header</code>. The cdf is in in field <code>cdf</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.readcdfinfo" href="#EmpiricalCDFs.readcdfinfo"><code>EmpiricalCDFs.readcdfinfo</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">readcdfinfo(fn::String)</code></pre><p>Return an object containing information about the cdf saved in the binary file <code>fn</code>. The data itself is not read.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.header" href="#EmpiricalCDFs.header"><code>EmpiricalCDFs.header</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">header::String = header(cdff::CDFfile)</code></pre><p>Return the header from <code>cdff</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.getcdf" href="#EmpiricalCDFs.getcdf"><code>EmpiricalCDFs.getcdf</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">cdf::AbstractEmpiricalCDF = getcdf(cdff::CDFfile)</code></pre><p>Return the CDF from <code>cdff</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EmpiricalCDFs.version" href="#EmpiricalCDFs.version"><code>EmpiricalCDFs.version</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">version(cdff::CDFfile)</code></pre><p>Return the version number of the file format.</p></div></div></section><h2><a class="nav-anchor" id="Comparison-with-ecdf-1" href="#Comparison-with-ecdf-1">Comparison with <code>ecdf</code></a></h2><p>This package differs from the  <a href="https://statsbasejl.readthedocs.io/en/latest/empirical.html#ecdf"><code>ecdf</code> function</a> from <a href="https://github.com/JuliaStats/StatsBase.jl"><code>StatsBase.jl</code></a>.</p><ul><li><code>ecdf</code> takes a sorted vector as input and returns a function that looks up the value of the CDF. An instance of <code>EmpiricalCDF</code>, <code>cdf</code>, both stores data, eg via <code>push!(cdf,x)</code>, and looks up the value of the CDF via <code>cdf(x)</code>.</li><li>When computing the CDF at an array of values, <code>ecdf</code>, sorts the input and uses an algorithm that scans the data. Instead, <code>EmpiricalCDFs</code> does a binary search for each element of an input vector. Tests showed that this is typically not slower. If the CDF stores a large number of points relative to the size of the input vector, the second method, the one used by <code>EmpiricalCDFs</code> is faster.</li></ul><footer><hr/></footer></article></body></html>
