<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme · MySQL.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>MySQL.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li><a class="toctext" href="#Table-of-Contents-1">Table of Contents</a></li><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Project-Status-1">Project Status</a></li><li><a class="toctext" href="#Contributing-and-Questions-1">Contributing and Questions</a></li><li><a class="toctext" href="#Documentation-1">Documentation</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="MySQL-1" href="#MySQL-1">MySQL</a></h1><p><em>Package for interfacing with MySQL databases from Julia</em></p><table><tr><th><strong>PackageEvaluator</strong></th><th><strong>Build Status</strong></th></tr><tr><td>[![][pkg-0.6-img]][pkg-0.6-url]</td><td>[![][travis-img]][travis-url] [![][codecov-img]][codecov-url]</td></tr></table><h2><a class="nav-anchor" id="Table-of-Contents-1" href="#Table-of-Contents-1">Table of Contents</a></h2><ul><li><a href="#installation">Installation</a></li><li><a href="#project-status">Project Status</a></li><li><a href="#contributing-and-questions">Contributing and Questions</a></li><li><a href="#documentation">Documentation</a><ul><li><a href="#functions">Functions</a></li><li><a href="#types">Types</a></li><li><a href="#example">Example</a></li></ul></li></ul><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p>The package is registered in <code>METADATA.jl</code> and so can be installed with <code>Pkg.add</code>.</p><pre><code class="language-julia">julia&gt; Pkg.add(&quot;MySQL&quot;)</code></pre><h2><a class="nav-anchor" id="Project-Status-1" href="#Project-Status-1">Project Status</a></h2><p>The package is tested against the current Julia <code>0.6</code> release and nightly on Linux and OS X.</p><h2><a class="nav-anchor" id="Contributing-and-Questions-1" href="#Contributing-and-Questions-1">Contributing and Questions</a></h2><p>Contributions are very welcome, as are feature requests and suggestions. Please open an [issue][issues-url] if you encounter any problems or would just like to ask a question.</p><p>&lt;!– [docs-latest-img]: https://img.shields.io/badge/docs-latest-blue.svg [docs-latest-url]: https://JuliaData.github.io/MySQL.jl/latest –&gt;</p><p>[docs-stable-img]: https://img.shields.io/badge/docs-stable-blue.svg [docs-stable-url]: https://JuliaData.github.io/MySQL.jl/stable</p><p>[travis-img]: https://travis-ci.org/JuliaDatabases/MySQL.jl.svg?branch=master [travis-url]: https://travis-ci.org/JuliaDatabases/MySQL.jl</p><p>[codecov-img]: https://codecov.io/gh/JuliaDatabases/MySQL.jl/branch/master/graph/badge.svg [codecov-url]: https://codecov.io/gh/JuliaDatabases/MySQL.jl</p><p>[issues-url]: https://github.com/JuliaDatabases/MySQL.jl/issues</p><p>[pkg-0.6-img]: http://pkg.julialang.org/badges/MySQL_0.6.svg [pkg-0.6-url]: http://pkg.julialang.org/?pkg=MySQL</p><h2><a class="nav-anchor" id="Documentation-1" href="#Documentation-1">Documentation</a></h2><h3><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h3><h4><a class="nav-anchor" id="MySQL.connect-1" href="#MySQL.connect-1">MySQL.connect</a></h4><pre><code class="language-julia">MySQL.connect(host::String, user::String, passwd::String; db::String = &quot;&quot;, port = &quot;3306&quot;, socket::String = MySQL.API.MYSQL_DEFAULT_SOCKET, opts = Dict())</code></pre><p>Connect to a mysql database. Returns a <a href="#mysqlconnection"><code>MySQL.Connection</code></a> object to be passed to other API functions.</p><p>Options are passed via dictionary. The available keys are below and a descrition of the options can be found in the <a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-options.html">MySQL documentation</a>.</p><pre><code class="language-none">MySQL.API.MYSQL_OPT_CONNECT_TIMEOUT
MySQL.API.MYSQL_OPT_COMPRESS
MySQL.API.MYSQL_OPT_NAMED_PIPE
MySQL.API.MYSQL_INIT_COMMAND
MySQL.API.MYSQL_READ_DEFAULT_FILE
MySQL.API.MYSQL_READ_DEFAULT_GROUP
MySQL.API.MYSQL_SET_CHARSET_DIR
MySQL.API.MYSQL_SET_CHARSET_NAME
MySQL.API.MYSQL_OPT_LOCAL_INFILE
MySQL.API.MYSQL_OPT_PROTOCOL
MySQL.API.MYSQL_SHARED_MEMORY_BASE_NAME
MySQL.API.MYSQL_OPT_READ_TIMEOUT
MySQL.API.MYSQL_OPT_WRITE_TIMEOUT
MySQL.API.MYSQL_OPT_USE_RESULT
MySQL.API.MYSQL_OPT_USE_REMOTE_CONNECTION
MySQL.API.MYSQL_OPT_USE_EMBEDDED_CONNECTION
MySQL.API.MYSQL_OPT_GUESS_CONNECTION
MySQL.API.MYSQL_SET_CLIENT_IP
MySQL.API.MYSQL_SECURE_AUTH
MySQL.API.MYSQL_REPORT_DATA_TRUNCATION
MySQL.API.MYSQL_OPT_RECONNECT
MySQL.API.MYSQL_OPT_SSL_VERIFY_SERVER_CERT
MySQL.API.MYSQL_PLUGIN_DIR
MySQL.API.MYSQL_DEFAULT_AUTH
MySQL.API.MYSQL_OPT_BIND
MySQL.API.MYSQL_OPT_SSL_KEY
MySQL.API.MYSQL_OPT_SSL_CERT
MySQL.API.MYSQL_OPT_SSL_CA
MySQL.API.MYSQL_OPT_SSL_CAPATH
MySQL.API.MYSQL_OPT_SSL_CIPHER
MySQL.API.MYSQL_OPT_SSL_CRL
MySQL.API.MYSQL_OPT_SSL_CRLPATH
MySQL.API.MYSQL_OPT_CONNECT_ATTR_RESET
MySQL.API.MYSQL_OPT_CONNECT_ATTR_ADD
MySQL.API.MYSQL_OPT_CONNECT_ATTR_DELETE
MySQL.API.MYSQL_SERVER_PUBLIC_KEY
MySQL.API.MYSQL_ENABLE_CLEARTEXT_PLUGIN
MySQL.API.MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS</code></pre><h4><a class="nav-anchor" id="MySQL.disconnect-1" href="#MySQL.disconnect-1">MySQL.disconnect</a></h4><pre><code class="language-julia">MySQL.disconnect(conn::MySQL.Connection)</code></pre><p>Disconnect a <code>MySQL.Connection</code> object from the remote database.</p><h4><a class="nav-anchor" id="MySQL.escape-1" href="#MySQL.escape-1">MySQL.escape</a></h4><pre><code class="language-julia">MySQL.escape(conn::MySQL.Connection, str::String) -&gt; String</code></pre><p>Escape an SQL statement</p><h4><a class="nav-anchor" id="MySQL.query-1" href="#MySQL.query-1">MySQL.query</a></h4><pre><code class="language-julia">MySQL.query(conn::MySQL.Connection, sql::String, sink=Data.Table; append::Bool=false) =&gt; sink</code></pre><p>Execute an SQL statement and return the results in the <code>sink</code>, which can be any valid <code>Data.Sink</code> (interface from <a href="https://github.com/JuliaData/DataStreams.jl">DataStreams.jl</a>). By default, a NamedTuple of Vectors is returned.</p><p>Passing <code>append=true</code> as a keyword argument will cause the resultset to be <em>appended</em> to the sink instead of replacing.</p><p>To get the results as a <code>DataFrame</code>, you can just do <code>MySQL.query(conn, sql, DataFrame)</code>.</p><p>See list of DataStreams implementations <a href="https://github.com/JuliaData/DataStreams.jl#list-of-known-implementations">here</a></p><h4><a class="nav-anchor" id="MySQL.execute!-1" href="#MySQL.execute!-1">MySQL.execute!</a></h4><pre><code class="language-julia">MySQL.execute!(conn::MySQL.Connection, sql::String)
MySQL.execute!(stmt::MySQL.Stmt, params)</code></pre><p>Execute an SQL statement without returning results (useful for DDL statements, update, delete, etc.)</p><p>The SQL can either be passed as either a string or a prepared MySQL statement (see <a href="#mysqlstmt">MySQL.Stmt</a>).</p><h4><a class="nav-anchor" id="MySQL.insertid-1" href="#MySQL.insertid-1">MySQL.insertid</a></h4><pre><code class="language-julia">MYSQL.insertid(conn::Connection)</code></pre><p>Get the insert id of the most recently executed SQL statement.</p><h3><a class="nav-anchor" id="Types-1" href="#Types-1">Types</a></h3><h4><a class="nav-anchor" id="MySQL.Connection-1" href="#MySQL.Connection-1">MySQL.Connection</a></h4><pre><code class="language-julia">MySQL.connect(host::String, user::String, passwd::String; db::String = &quot;&quot;, port = &quot;3306&quot;, socket::String = MySQL.API.MYSQL_DEFAULT_SOCKET, opts = Dict())</code></pre><p>A connection to a MySQL database.</p><h4><a class="nav-anchor" id="MySQL.Stmt-1" href="#MySQL.Stmt-1">MySQL.Stmt</a></h4><pre><code class="language-julia">MySQL.Stmt(conn::MySQL.Connection, sql::String) =&gt; MySQL.Stmt</code></pre><p>A prepared SQL statement that may contain <code>?</code> parameter placeholders.</p><p>A <code>MySQL.Stmt</code> may then be executed by calling <code>MySQL.execute!(stmt, params)</code> where <code>params</code> are the values to be bound to the <code>?</code> placeholders in the original SQL statement. Params must be provided for every <code>?</code> and will be matched in the same order they appeared in the original SQL statement.</p><p>Bulk statement execution can be accomplished by &quot;streaming&quot; a param source like:</p><pre><code class="language-julia">Data.stream!(source::Data.Source, stmt::MySQL.Stmt)</code></pre><p>where <code>source</code> is any valid <code>Data.Source</code> (from DataStreams.jl). As with <code>MySQL.execute!</code>, the <code>source</code> must provide enough params and will be matched in the same order.</p><h4><a class="nav-anchor" id="MySQL.Query-1" href="#MySQL.Query-1">MySQL.Query</a></h4><pre><code class="language-julia">MySQL.Query(conn, sql, sink=Data.Table; append::Bool=false) =&gt; MySQL.Query</code></pre><p>Execute an SQL statement and return a <code>MySQL.Query</code> object. Result rows can be iterated as NamedTuples via <code>Data.rows(query)</code> where <code>query</code> is the <code>MySQL.Query</code> object. Results can also be streamed to any valid <code>Data.Sink</code> via <code>Data.stream!(query, sink)</code>.</p><h3><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h3><p>Connect to a database, query a table, write to a table, then close the database connection.</p><pre><code class="language-julia">using MySQL
using DataFrames

conn = MySQL.connect(&quot;localhost&quot;, &quot;root&quot;, &quot;password&quot;, db = &quot;test_db&quot;)

foo = MySQL.query(conn, &quot;&quot;&quot;SELECT COUNT(*) FROM my_first_table;&quot;&quot;&quot;, DataFrame)
num_foo = foo[1,1]

my_stmt = MySQL.Stmt(conn, &quot;&quot;&quot;INSERT INTO my_second_table (&#39;foo_id&#39;,&#39;foo_name&#39;) VALUES (?,?);&quot;&quot;&quot;)

for i = 1:num_foo
  MySQL.execute!(my_stmt, [i, &quot;foo_$i&quot;])
end

MySQL.disconnect(conn)
</code></pre><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
