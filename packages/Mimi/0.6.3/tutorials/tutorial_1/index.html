<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>1 Run an Existing Model Â· Mimi.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Mimi.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><a class="toctext" href="../../installation/">Installation Guide</a></li><li><a class="toctext" href="../../userguide/">User Guide</a></li><li><span class="toctext">Tutorials</span><ul><li><a class="toctext" href="../tutorial_main/">Tutorials Intro</a></li><li class="current"><a class="toctext" href>1 Run an Existing Model</a><ul class="internal"></ul></li><li><a class="toctext" href="../tutorial_2/">2 Modify an Existing Model</a></li><li><a class="toctext" href="../tutorial_3/">3 Create a Model</a></li><li><a class="toctext" href="../tutorial_4/">4 MCS Functionality</a></li></ul></li><li><a class="toctext" href="../../faq/">FAQ</a></li><li><a class="toctext" href="../../reference/">Reference</a></li><li><a class="toctext" href="../../integrationguide/">Integration Guide: Port to v0.5.0</a></li></ul></nav><article id="docs"><header><nav><ul><li>Tutorials</li><li><a href>1 Run an Existing Model</a></li></ul></nav><hr/><div id="topbar"><span>1 Run an Existing Model</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Tutorial-1:-Run-an-Existing-Model-1" href="#Tutorial-1:-Run-an-Existing-Model-1">Tutorial 1: Run an Existing Model</a></h1><p>This tutorial walks through the steps to download, run, and view the output of an existing model.  There are several existing models publically available on Github for the purposes of this tutorial we will use <a href="http://www.fund-model.org">The Climate Framework for Uncertainty, Negotiation and Distribution (FUND)</a>, available on Github <a href="https://github.com/fund-model/fund">here</a>.</p><p>Working through the following tutorial will require:</p><ul><li><a href="https://julialang.org/downloads/">Julia v1.0.0</a> or higher</li><li><a href="https://github.com/anthofflab/Mimi.jl">Mimi v0.6.0</a> </li><li><a href="https://git-scm.com/downloads">Git</a> and <a href="https://github.com">Github</a></li></ul><p>If you have not yet prepared these, go back to the main tutorial page and follow the instructions for their download.  </p><h3><a class="nav-anchor" id="Step-1.-Download-FUND-1" href="#Step-1.-Download-FUND-1">Step 1. Download FUND</a></h3><p>The first step in this process is downloading the FUND model.  First, open your command line interface and navigate to the folder where you would like to download FUND.</p><pre><code class="language-none">cd(&lt;directory-path&gt;) # directory-path is a placeholder for the string describing your desired file path</code></pre><p>Next, clone the FUND repository from Github, enter the repository, and checkout the <code>next</code> branch, which holds the Julia version of FUND.</p><pre><code class="language-none">git clone https://github.com/fund-model/fund.git
cd(&quot;fund&quot;)
git checkout next</code></pre><p>You have now successfully downloaded FUND to your local machine.</p><h3><a class="nav-anchor" id="Step-2.-Run-FUND-1" href="#Step-2.-Run-FUND-1">Step 2. Run FUND</a></h3><p>The next step is to run FUND.  If you wish to first get more aquainted with the model itself, take a look at the provided online documentation.  </p><p>In order to run FUND, you will need to open a Julia REPL (here done with the alias <code>julia</code>) and navigate to the source code folder, labeled <code>src</code>.</p><pre><code class="language-none">Julia 
cd(&lt;fund-directory-path&gt;) # fund-directory-path is a placeholder for the string describing your the file path of the downloaded `fund` folder from Step 1.</code></pre><p>Next, run the main fund file <code>fund.jl</code>.  This file defines a new <a href="https://docs.julialang.org/en/v1/manual/modules/index.html">module</a> called <code>Fund</code>, which exports the function <code>getfund</code>, a function that returns a version of fund allowing for different user specifications.  Note that in order to allow access to the module, we must call <code>using .Fund</code>, where <code>.Fund</code> is a shortcut for <code>Main.Fund</code>, since the <code>Fund</code> module is nested inside the <code>Main</code> module. After creating the model <code>m</code>, simply run the model using the <code>run</code> function.</p><pre><code class="language-none">include(&quot;src/fund.jl&quot;)
using .Fund
m = getfund
run(m)</code></pre><p>Note that these steps should be relatively consistent across models, where a repository for <code>ModelX</code> should contain a primary file <code>ModelX.jl</code> which exports, at minimum, a function named something like <code>getModelX</code> or <code>construct_ModelX</code> which returns a version of the model, and can allow for model customization within the call.</p><p>In this case, the function <code>getfund</code> has the signature</p><pre><code class="language-none">getfund(; nsteps = default_nsteps, datadir = default_datadir, params = default_params)</code></pre><p>Thus there are no required arguments, although the user can input <code>nsteps</code> to define the number of timesteps (years in this case) the model runs for, <code>datadir</code> to define the location of the input data, and <code>params</code>, a dictionary definining the parameters of the model.  For example, if you wish to see only the first 100 timesteps,you may use:</p><pre><code class="language-none">include(&quot;src/fund.jl&quot;)
using .Fund
m = getfund(nsteps = 100)
run(m)</code></pre><h3><a class="nav-anchor" id="Step-3.-Access-Results:-Values-1" href="#Step-3.-Access-Results:-Values-1">Step 3. Access Results: Values</a></h3><p>After the model has been run, you may access the results (the calculated variable values in each component) in a few different ways.</p><p>First of all, you may use the <code>getindex</code> syntax as follows:</p><pre><code class="language-julia">my_model[:ComponentName, :VariableName] # returns the whole array of values
my_model[:ComponentName, :VariableName][100] # returns just the 100th value
</code></pre><p>Indexing into a model with the name of the component and variable will return an array with values from each timestep. You may index into this array to get one value (as in the second line, which returns just the 100th value). Note that if the requested variable is two-dimensional, then a 2-D array will be returned. For example, try taking a look at the <code>income</code> variable of the <code>socioeconomic</code> component using the code below:</p><pre><code class="language-none">m[:socioeconomic, :income] 
m[:socioeconomic, :income][100] </code></pre><p>You may also get data in the form of a dataframe, which will display the corresponding index labels rather than just a raw array. The syntax for this uses <a href="../../reference/#Mimi.getdataframe"><code>getdataframe</code></a> as follows:</p><pre><code class="language-julia">getdataframe(mymodel, :ComponentName=&gt;:Variable) # request one variable from one component
getdataframe(mymodel, :ComponentName=&gt;(:Variable1, :Variable2)) # request multiple variables from the same component
getdataframe(mymodel, :Component1=&gt;:Var1, :Component2=&gt;:Var2) # request variables from different components
</code></pre><p>Try doing this for the <code>income</code> variable of the <code>socioeconomic</code> component using:</p><pre><code class="language-none">getdataframe(m, :socioeconomic=&gt;:income) # request one variable from one component</code></pre><h3><a class="nav-anchor" id="Step-4.-Access-Results:-Plots-and-Graphs-1" href="#Step-4.-Access-Results:-Plots-and-Graphs-1">Step 4. Access Results: Plots and Graphs</a></h3><p>After running the FUND model, you may also explore the results using plots and graphs. </p><p>Mimi provides support for plotting using <a href="https://github.com/vega/vega-lite">VegaLite</a> and <a href="https://github.com/fredo-dedup/VegaLite.jl">VegaLite.jl</a> within the Mimi Explorer UI, and the <a href="https://github.com/JuliaGraphs/LightGraphs.jl">LightGraphs</a> and <a href="https://github.com/JuliaGraphs/MetaGraphs.jl">MetaGraphs</a> for the <a href="../../reference/#Mimi.plot_comp_graph"><code>plot_comp_graph</code></a> function.</p><h4><a class="nav-anchor" id="Explore-1" href="#Explore-1">Explore</a></h4><p>If you wish to explore the results graphically, use the explorer UI, described <a href="http://anthofflab.berkeley.edu/Mimi.jl/stable/userguide/#Plotting-and-the-Explorer-UI-1">here</a> in Section 5 of the Mimi User Guide.</p><p>To explore all variables and parameters of FUND in a dynamic UI app window, use the <a href="../../reference/#Mimi.explore"><code>explore</code></a> function called with the model as the required first argument, and the optional argument of the <code>title</code>  The menu on the left hand side will list each element in a label formatted as <code>component: variable/parameter</code>.</p><pre><code class="language-none">explore(m, &quot;My Window&quot;)</code></pre><p>Alternatively, in order to view just one parameter or variable, call the function <a href="../../reference/#Mimi.explore"><code>explore</code></a> as below to return a plot object and automatically display the plot in a viewer, assuming <a href="../../reference/#Mimi.explore"><code>explore</code></a> is the last command executed.  This call will return the type <code>VegaLite.VLSpec</code>, which you may interact with using the API described in the <a href="https://github.com/fredo-dedup/VegaLite.jl">VegaLite.jl</a> documentation.  For example, <a href="https://github.com/fredo-dedup/VegaLite.jl">VegaLite.jl</a> plots can be saved as <a href="https://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a>, <a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a>, <a href="https://en.wikipedia.org/wiki/PDF">PDF</a> and <a href="https://en.wikipedia.org/wiki/Encapsulated_PostScript">EPS</a> files. you may save a plot by calling the <code>save</code> function.</p><pre><code class="language-julia">run1 = run(my_model)
p = explore(run1, component1, parameter1)
save(&quot;MyFilePath.svg&quot;, p)</code></pre><p>More specifically for our tutorial use of FUND, try:</p><pre><code class="language-julia">p = explore(m, :socioeconomic, :income)
save(&quot;MyFilePath.svg&quot;, p)</code></pre><h4><a class="nav-anchor" id="Component-Graph-1" href="#Component-Graph-1">Component Graph</a></h4><p>In order to view a DAG representing the component ordering and relationships, use the <a href="../../reference/#Mimi.plot_comp_graph"><code>plot_comp_graph</code></a> function to view a plot and optionally save it to a file. This function returns a plot object displayed in the viewer and showing a graph with components as nodes and component connections as edges.</p><pre><code class="language-julia">plot_comp_graph(m; filename = &quot;MyFilePath.png&quot;)</code></pre><h3><a class="nav-anchor" id="Step-4.-Tutorial-2-1" href="#Step-4.-Tutorial-2-1">Step 4. Tutorial 2</a></h3><p>Next, feel free to move on to the second tutorial, which will go into depth on how to <strong>modify</strong> an existing model such as FUND!</p><footer><hr/><a class="previous" href="../tutorial_main/"><span class="direction">Previous</span><span class="title">Tutorials Intro</span></a><a class="next" href="../tutorial_2/"><span class="direction">Next</span><span class="title">2 Modify an Existing Model</span></a></footer></article></body></html>
