<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme Â· GtkUtilities.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>GtkUtilities.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li class="toplevel"><a class="toctext" href="#Alternatives-1">Alternatives</a></li><li class="toplevel"><a class="toctext" href="#What-is-GtkUtilities?-1">What is GtkUtilities?</a></li><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Usage-1">Usage</a></li><li><a class="toctext" href="#Help-1">Help</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="GtkUtilities-1" href="#GtkUtilities-1">GtkUtilities</a></h1><p><a href="https://travis-ci.org/timholy/GtkUtilities.jl"><img src="https://travis-ci.org/timholy/GtkUtilities.jl.svg?branch=master" alt="Build Status"/></a></p><h1><a class="nav-anchor" id="Alternatives-1" href="#Alternatives-1">Alternatives</a></h1><p>New users are encouraged to consider <a href="https://github.com/JuliaGizmos/GtkReactive.jl">GtkReactive</a> instead.</p><h1><a class="nav-anchor" id="What-is-GtkUtilities?-1" href="#What-is-GtkUtilities?-1">What is GtkUtilities?</a></h1><p>This package is a collection of extensions to <a href="https://github.com/JuliaLang/Gtk.jl">Gtk</a> that make interactive graphics easier.  For example, it allows you to:</p><ul><li>&quot;attach&quot; user data to widgets or any other object</li><li>perform rubber-band selection</li><li>use pan and zoom</li><li>synchronize state across multiple UI widgets and canvases</li></ul><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p>Install via</p><pre><code class="language-jl">Pkg.add(&quot;GtkUtilities&quot;)</code></pre><h2><a class="nav-anchor" id="Usage-1" href="#Usage-1">Usage</a></h2><h3><a class="nav-anchor" id="guidata:-associating-user-data-with-widgets-1" href="#guidata:-associating-user-data-with-widgets-1"><code>guidata</code>: associating user data with widgets</a></h3><p>Given a widget (Button, Canvas, Window, etc.) or other graphical object <code>w</code>, a value <code>val</code> can be associated with (&quot;stored in&quot;) <code>w</code> using</p><pre><code class="language-jl">guidata[w, :name] = val</code></pre><p>where <code>:name</code> is the name (a Symbol) you&#39;ve assigned to <code>val</code> for the purposes of storage.</p><p>The value can be retrieved with</p><pre><code class="language-jl">val = guidata[w, :name]</code></pre><p>Here are some other things you can do with <code>guidata</code>:</p><pre><code class="language-jl">alldata = guidata[w]           # fetch all data associated with w
val = get(guidata, (w,:name), default)   # returns default if :name not defined
delete!(guidata, (w,:name))    # deletes the value associated with :name
delete!(guidata, w)            # deletes all data associated with w</code></pre><p>If <code>w</code> is a <code>GtkWidget</code>, the associated data are automatically deleted when the object is destroyed.</p><p>Example:</p><pre><code class="language-jl">    c = @Canvas()
    bb = BoundingBox(0, 1, 0, 1)
    guidata[c, :zoombb] = bb</code></pre><h3><a class="nav-anchor" id="Rubber-band-selection-1" href="#Rubber-band-selection-1">Rubber band selection</a></h3><p><code>rubberband_start(c, x, y, callback_done; minpixels=2)</code> starts a rubber-band selection on Canvas <code>c</code> at position <code>(x,y)</code>.  When the user releases the mouse button, the callback function <code>callback_done(c, bb)</code> is run, where <code>bb</code> is the BoundingBox of the selected region.  To reduce the likelihood that clicks used to raise windows will result in rubber banding, the callback is not executed unless the user drags the mouse by at least <code>minpixels</code> pixels (default value 2).</p><p>Example:</p><pre><code class="language-jl">    c.mouse.button1press = (widget, event) -&gt; begin
        if event.event_type == Gtk.GdkEventType.BUTTON_PRESS
            GtkUtilities.rubberband_start(c, event.x, event.y, (c, bb) -&gt; @show bb)
        end
    end</code></pre><p>sets up a Canvas so that rubberband selection starts when the user clicks the mouse; when the button is released, it prints the bounding box of the selection region.</p><h3><a class="nav-anchor" id="Zooming-and-panning-1" href="#Zooming-and-panning-1">Zooming and panning</a></h3><p>Zooming and panning a Canvas <code>c</code> are performed using four <code>guidata</code> objects, named <code>:xview</code>, <code>:yview</code>, <code>:xviewlimits</code>, <code>:yviewlimits</code>. The first two express the current view region, which includes effects of any previous zoom and pan operations.  The second two encode the allowable area, representing the largest-sized region that may be viewed.</p><p>You intialize panning and zooming with</p><pre><code class="language-none">panzoom(c, [xviewlimits, yviewlimits], [xview, yview])
panzoom_mouse(c)
id = panzoom_key(c)</code></pre><p>This sequence will implement panning and zooming with either the keyboard or wheel-mouse.  You can specify the keys and modifiers, as well as the behavior of scroll-zooming relative to the mouse pointer location, via keyword arguments to these functions. See each individual function (e.g., <code>?panzoom_key</code>) for more information.</p><p>The <code>draw</code> method for your Canvas must make use of the <code>:xview</code>, <code>:yview</code> properties. In the simplest cases, you might achieve this with</p><pre><code class="language-jl">draw(c) do widget
ctx = getgc(c)
h = height(c)
w = width(c)

xviewlimits, yviewlimits = guidata[c, :xviewlimits], guidata[c, :yviewlimits]
bb = BoundingBox( xviewlimits.min, xviewlimits.max, yviewlimits.min, yviewlimits.max)  # you can create bb outside of the draw method instead, by using explicity values for xview/yview-limits. However, &#39;guidata&#39; will not work unless &#39;c&#39; has already been fully defined.
set_coordinates(ctx, BoundingBox(0, w, 0, h), bb)

xview, yview = guidata[c, :xview], guidata[c, :yview]
...
# use xview and yview to manipulate the content of your canvas
...
end</code></pre><p>The returned <code>id</code> can be disabled or enabled via <code>signal_handler_block</code> and <code>signal_handler_unblock</code>, respectively, or removed with <code>signal_handler_disconnect</code>.</p><h3><a class="nav-anchor" id="Managing-state-1" href="#Managing-state-1">Managing state</a></h3><p><strong>Note</strong>: this component will be rebased on Reactive.jl after https://github.com/JuliaLang/Reactive.jl/pull/65 merges, hopefully via https://github.com/jverzani/GtkInteract.jl. This interface is deprecated.</p><p>Suppose you have a slider (a <code>Scale</code>) and an <code>Entry</code> box as two alternative mechanisms for specifying a single number, and you want to use that number in some calculations when you render a <code>Canvas</code>. Who &quot;owns&quot; the number? Does the <code>Entry</code> callback have to be aware of the <code>Scale</code> callback, and vice-versa?</p><p>You can centralize your handling of this piece of information by using a <code>State</code> object and <code>link</code>ing it to the UI elements:</p><pre><code class="language-jl">state = State(5)

e = @Entry()
s = @Scale(false, 1:10)
c = @Canvas()
draw(c) do widget
   ...   # make use of state in here somewhere
end

elink = link(state, e)
slink = link(state, s)
link(state, c)

get(elink)               # returns 5
set!(state, 7)           # wow, the Canvas redraws and the Entry &amp; Scale change!
get(state)               # returns 7
get(slink)               # returns 7
set!(slink, 4)           # everything updates again</code></pre><p>Note that in this example we didn&#39;t have to write any callbacks at all: just <code>link</code>ing the widget to the <code>State</code> object creates the callback we need, and any changes are automatically propagated for you.</p><h2><a class="nav-anchor" id="Help-1" href="#Help-1">Help</a></h2><p>Each function has its own help, e.g., <code>?rubberband_start</code>.</p><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
