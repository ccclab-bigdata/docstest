<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Docstrings · UnsafeArrays.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>UnsafeArrays.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Readme</a></li><li class="current"><a class="toctext" href>Docstrings</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Docstrings</a></li></ul></nav><hr/><div id="topbar"><span>Docstrings</span><a class="fa fa-bars" href="#"></a></div></header><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="UnsafeArrays.@gc_preserve" href="#UnsafeArrays.@gc_preserve"><code>UnsafeArrays.@gc_preserve</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">UnsafeArrays.@gc_preserve A B ... expr</code></pre><p>Protect <code>A</code>, <code>B</code>, ... from garbage collection while executing <code>expr</code>. Contrary to <code>GC.@preserve</code>, expr is executed in a new scope.</p><p>Equivalent to</p><pre><code class="language-none">GC.@preserve A B ... let
    expr
end</code></pre><p>On Julia versions that do not provide <code>GC.@preserve</code>, a fallback implementation is used.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="UnsafeArrays.@uviews" href="#UnsafeArrays.@uviews"><code>UnsafeArrays.@uviews</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@uviews A B ... expr</code></pre><p>Replace arrays <code>A</code>, <code>B</code>, ... by uview(<code>A</code>), uview(<code>B</code>), ... during execution of <code>expr</code>, while protecting the original arrays from garbage collection.</p><p>Equivalent to</p><pre><code class="language-none">GC.@preserve A B ... begin
    let A = uview(A), B = uview(B), ...
        expr
    end
end</code></pre><p>The unsafe views must not be allowed to escape the scope of <code>expr</code>. The original arrays must not be resized/appended/etc. during the execution of <code>expr</code>.</p></div></div></section><pre><code class="language-none">UnsafeArrays.DenseIdx</code></pre><pre><code class="language-none">UnsafeArrays.IdxUnitRange</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="UnsafeArrays.UnsafeArray" href="#UnsafeArrays.UnsafeArray"><code>UnsafeArrays.UnsafeArray</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">UnsafeArray{T,N} &lt;: DenseArray{T,N}</code></pre><p>An <code>UnsafeArray</code> is an bitstype wrapper around a memory pointer and a size tuple. It&#39;s an intended to be used as a short-lived, allocation-free alternative to an an <code>Array</code> returned by <code>unsafe_wrap</code> or a <code>SubArray</code> returned by <code>view</code> or . Use with caution!</p><p>Constructors:</p><pre><code class="language-none">UnsafeArray{T,N}(pointer::Ptr{T}, size::NTuple{N,Int}) where {T,N}
UnsafeArray(pointer::Ptr{T}, size::NTuple{N,Int}) where {T,N}</code></pre><p>UnsafeArray requires <code>isbitstype(T) == true</code>.</p><p>Note: It&#39;s safe to construct an empty multidimensional <code>UnsafeArray</code>:</p><pre><code class="language-none">UnsafeArray(Ptr{Int}(0), (0,...))</code></pre><p>Note: You <em>must</em> ensure that <code>A</code> is not garbage collected or reallocated via (e.g.) <code>resize!</code>, <code>sizehint!</code> etc. while <code>U</code> is in use! Use only in situations where you have full control over the life cycle of <code>A</code> and <code>U</code>.</p><p><code>deepcopy(::UnsafeArray)</code> returns a standard <code>Array</code>.</p></div></div></section><pre><code class="language-none">UnsafeArrays.UnsafeArrays</code></pre><pre><code class="language-none">UnsafeArrays._fast_sub2ind</code></pre><pre><code class="language-none">UnsafeArrays._maybe_unsafe_uview</code></pre><pre><code class="language-none">UnsafeArrays._noinline_nop</code></pre><pre><code class="language-none">UnsafeArrays._require_one_based_indexing</code></pre><pre><code class="language-none">UnsafeArrays._sub_axes</code></pre><pre><code class="language-none">UnsafeArrays._sub_size</code></pre><pre><code class="language-none">UnsafeArrays._unsafe_view_impl</code></pre><pre><code class="language-none">UnsafeArrays.eval</code></pre><pre><code class="language-none">UnsafeArrays.include</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="UnsafeArrays.unsafe_uview" href="#UnsafeArrays.unsafe_uview"><code>UnsafeArrays.unsafe_uview</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">UnsafeArray.unsafe_uview(A::AbstractArray, I::Vararg{Base.ViewIndex,N})
UnsafeArray.unsafe_uview(A::AbstractArray, i::Base.ViewIndex)
UnsafeArray.unsafe_uview(A::AbstractArray)</code></pre><p>To support <code>uview</code> for custom array types, add methods to <code>unsafe_uview</code> instead of <code>uview</code>. Implementing <code>UnsafeArray.unsafe_uview(A::CustomArrayType)</code> will often be sufficient.</p><p>It may be necessary to provide a custom implementation of <code>Base.deepcopy</code> for types with a custom implementation of <code>unsafe_uview</code>, to ensure that the result of <code>deepcopy</code> does <em>NOT</em> contain unsafe views.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="UnsafeArrays.uview" href="#UnsafeArrays.uview"><code>UnsafeArrays.uview</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">uview(A::AbstractArray, I...)</code></pre><p>Unsafe equivalent of <code>view</code>. May return an <code>UnsafeArray</code>, a standard <code>SubArray</code> or <code>A</code> itself, depending on <code>I...</code> and the type of <code>A</code>.</p><p>As <code>uview</code> may return an <code>UnsafeArray</code>, <code>A</code> itself and it&#39;s contents <em>must</em> be protected from garbage collection (e.g. via <code>GC.@preserve</code> on Julia &gt; v0.6) and memory reallocation while the view is in use.</p><p>Use <code>uviews(f::Function, As::AbstractArray...)</code> or <code>@uviews A ... expr</code> to use unsafe views of one or multiple arrays with automatically GC protection.</p><pre><code class="language-none">uviews(A, B, ...) do (A_u, B_u, ...)
    # Do something with the unsafe views A_u, B_u, ...
    # Code here must not resize/append/etc. A, B, ...
end</code></pre><p>To provide support for <code>uview</code> for custom array types, add methods to function <code>UnsafeArrays.unsafe_uview</code>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="UnsafeArrays.uviews" href="#UnsafeArrays.uviews"><code>UnsafeArrays.uviews</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">uviews(f::Function, As::AbstractArray...)</code></pre><p>Equivalent to <code>f(map(uview, As)...)</code>. Automatically protects the array(s) <code>As</code> from garbage collection during execution of <code>f</code>.</p><p>Example:</p><pre><code class="language-none">uviews(A, B, ...) do (A_u, B_u, ...)
    # Do something with the unsafe views A_u, B_u, ...
    # Code here must not resize/append/etc. A, B, ...
end</code></pre><p>In many cases, it may be preferable to use <code>@uviews</code> insted of <code>views</code>.</p></div></div></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Readme</span></a></footer></article></body></html>
