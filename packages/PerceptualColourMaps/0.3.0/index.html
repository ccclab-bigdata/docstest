<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme Â· PerceptualColourMaps.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PerceptualColourMaps.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li class="toplevel"><a class="toctext" href="#(Perceptual-Color-Maps)-1">(Perceptual Color Maps)</a></li><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Summary-1">Summary</a></li><li><a class="toctext" href="#cmap()-1">cmap()</a></li><li><a class="toctext" href="#Organisation-of-the-Colour-Maps-1">Organisation of the Colour Maps</a></li><li><a class="toctext" href="#Links-1">Links</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="PerceptualColourMaps-1" href="#PerceptualColourMaps-1">PerceptualColourMaps</a></h1><h1><a class="nav-anchor" id="(Perceptual-Color-Maps)-1" href="#(Perceptual-Color-Maps)-1">(Perceptual Color Maps)</a></h1><p><a href="https://travis-ci.org/peterkovesi/PerceptualColourMaps.jl"><img src="https://travis-ci.org/peterkovesi/PerceptualColourMaps.jl.svg?branch=master" alt="Build Status"/></a></p><hr/><p><img src="doc/banner.png" alt="banner image"/></p><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p>Install via the package manager.  Currently the package only runs under v0.6</p><pre><code class="language-none">julia&gt;  Pkg.add(&quot;PerceptualColourMaps&quot;)</code></pre><p>If you are after the latest master use:</p><pre><code class="language-none">julia&gt;  Pkg.clone(&quot;https://github.com/peterkovesi/PerceptualColourMaps.jl&quot;)</code></pre><h2><a class="nav-anchor" id="Summary-1" href="#Summary-1">Summary</a></h2><p>The Perceptual Colour/Color Maps package provides functions for creating high quality colour maps that have consistent perceptual contrast over their full range.  It also provides functions for generating colour map test images, functions to assist with the correct rendering of data with colour maps, and functions for generating relief shaded images and perceptually uniform ternary images.</p><p>Many colour maps provided by vendors have highly uneven perceptual contrast over their range. Colour maps may have points of locally high colour contrast leading to the perception of false anomalies in your data when there is none. Conversely colour maps may also have &#39;flat spots&#39; of low perceptual contrast that prevent you from seeing features in the data.</p><p>To illustrate this the colour maps shown below are rendered on a test image consisting of a sine wave superimposed on a ramp function. The amplitude of the sine wave is modulated from its full value at the top of the image to 0 at the bottom.</p><p>What we are hoping to see is the sine wave uniformly visible across the image from left to right. We also want the contrast level, the distance down the image at which the sine wave remains discernible, to be uniform across the image. At the very bottom of the image, where the sine wave amplitude is 0, we just have a linear ramp which simply reproduces the colour map. Given that the underlying data is a featureless ramp, we should not perceive any identifiable features across the bottom of the image.</p><p><img src="doc/VendorColourmapProblem.png" alt="Vendor Colour Map Problem"/></p><p>At the top row of the test image, the sine wave amplitude from peak to trough is 10% of the total data range. It is not unusual for the sine wave pattern to completely disappear in parts of some vendor colour maps. On the other hand the perceptually uniform colour maps exhibit no false features and the sine wave pattern is uniformly visible across the full width of the test image.</p><p>Previous work that has tried to use CIELAB space for the design of colour maps has had mixed results.  This is because CIELAB space is only perceptually uniform for large patches of colour presented at very low spatial frequencies.  The key observation is that at fine spatial frequencies perceptual contrast is dominated by <em>lightness</em> difference; chroma and hue are relatively unimportant.  The colour maps generated by <code>cmap()</code> are designed to have a lightness gradient of constant magnitude.</p><h2><a class="nav-anchor" id="cmap()-1" href="#cmap()-1">cmap()</a></h2><p><code>cmap()</code> is the main function you will use.  It provides a library of perceptually uniform colour maps.  For a full description of all the functions in the package, see the <a href="doc/index.md">Function reference</a>.</p><pre><code class="language-none">Usage:  1:  map = cmap(I, keyword_params ...)
        2:  (map, name, desc) = cmap(I, keyword_params ..., returnname=true)
        3:  cmap(searchStr)
        4:  cmap()

Arguments for Usage 1 and 2:

            I - A string label indicating the colour map to be generated or a
                string specifying a colour map name or attribute to search
                for.  Type &#39;cmap()&#39; with no arguments to get a full list of
                possible colour maps and their corresponding labels.

  labels:  &quot;L1&quot; - &quot;L15&quot;  for linear maps
           &quot;D1&quot; - &quot;D12&quot;  for diverging maps
           &quot;C1&quot; - &quot;C9&quot;   for cyclic maps
           &quot;R1&quot; - &quot;R3&quot;   for rainbow maps
           &quot;I1&quot; - &quot;I3&quot;   for isoluminant maps

 Some colour maps have alternate labels for convenience and readability.

   map = cmap(&quot;L1&quot;)  or map = cmap(&quot;grey&quot;)  will produce a linear grey map.
   cmap()  lists all colour maps and labels.

 Possible keyword parameter options:

    chromaK::Real - The scaling to apply to the chroma values of the colour map,
                    0 - 1.  The default is 1 giving a fully saturated colour map
                    as designed. However, depending on your application you may
                    want a colour map with reduced chroma/saturation values.
                    You can use values greater than 1 however gamut clipping is
                    likely to occur giving rise to artifacts in the colour map.
           N::Int - Number of values in the colour map. Defaults to 256.
      shift::Real - Fraction of the colour map length N that the colour map is
                    to be cyclically rotated, may be negative.  (Should only be
                    applied to cyclic colour maps!). Defaults to 0.
    reverse::Bool - If true reverses the colour map. Defaults to false.
diagnostics::Bool - If true displays various diagnostic plots. Note the
                    diagnostic plots will be for the map _before_ any cyclic
                    shifting or reversing is applied. Defaults to false.
 returnname::Bool - If true the function returns a tuple of the colourmap, its
                    name and its description  (colourmap, name, description)
                    The default value is false, just the colourmap is returned.

Returns:
          map - Array of ColorTypes.RGBA{Float64,1} giving the rgb colour map.

     If returnname=true the function additionally returns
         name - A string giving a nominal name for the colour map
         desc - A string giving a brief description of the colour map</code></pre><p>Usage 3 and 4:  cmap(searchStr)</p><p>Given the large number of colour maps that this function can create this usage option provides some help by listing the numbers of all the colour maps with names containing the string &#39;str&#39;.  Typically this is used to search for colour maps having a specified attribute: &quot;linear&quot;, &quot;diverging&quot;, &quot;rainbow&quot;, &quot;cyclic&quot;, or &quot;isoluminant&quot; etc.  If &#39;searchStr&#39; is omitted all colour maps are listed.  </p><pre><code class="language-none">   cmap()              # lists all colour maps
   cmap(&quot;diverging&quot;)   # lists all diverging colour maps</code></pre><p>Note the listing of colour maps can be a bit slow because each colour map has to be created in order to determine its full name.</p><p><strong>Using the colour maps:</strong></p><p>PyPlot:</p><pre><code class="language-none">&gt; using PyPlot
&gt; sr = sineramp();    # Generate the sineramp() colour map test image.
&gt; imshow(sr);         # Display with matplotlib&#39;s default &#39;jet&#39; colour map.
                      # Note the perceptual dead spots in the map.
&gt; imshow(sr, cmap = ColorMap(cmap(&quot;L3&quot;))); # Apply the cmap() heat colour map.</code></pre><p>Plots:</p><pre><code class="language-none">&gt; using Plots
&gt; y=rand(100);
&gt; Plots.scatter(y, zcolor=y, marker=ColorGradient(cmap(&quot;R3&quot;)));</code></pre><p>Winston:</p><pre><code class="language-none">&gt; Using Winston
&gt; colormap(cmap(&quot;R1&quot;));    # Set Winston&#39;s colour map to the cmap() rainbow
                           # colour map first.
&gt; imagesc(sr);             # Then display the image</code></pre><p>You can also apply a colour map to a single channel image to create a conventional RGB image. This is recommended if you are using a diverging or cyclic colour map because it allows you to ensure data values are honoured appropriately when you map them to colours.</p><pre><code class="language-none">  Apply the L4 heat colour map to the test image
&gt; rgbimg = applycolourmap(sr, cmap(&quot;L4&quot;)[1]);

  Apply a diverging colour map to the test image using 127 as the
  value that is associated with the centre point of the diverging
  colour map
&gt; rgbimg = applydivergingcolourmap(sr, cmap(&quot;D1&quot;)[1],127);

  Apply a cyclic colour map to the circlesineramp() test image specifying
  a data cyclelength of 2*pi.
&gt; (cr,) = circlesineramp();   # Generate a cyclic colour map test image.
&gt; rgbimg = applycycliccolourmap(cr, cmap(&quot;C1&quot;)[1], cyclelength=2*pi);

&gt; ImageView.view(rgbimg)      # Display the image with ImageView
&gt; PyPlot.imshow(rgbimg)       # or with PyPlot</code></pre><p><em>Warning</em> PyPlot and Tk do not seem to coexist very well (Julia can crash!).  ImageView and Winston use Tk which means that you may have to take care which image display functions you choose to use.</p><p>These colour maps can also be passed to the <code>Plots.ColorGradient</code> constructor. Here&#39;s an example using the &#39;Rainbow 3&#39; diverging colour map for a scatter plot.</p><pre><code class="language-none">&gt; Using Plots
&gt; y=rand(100); scatter(y, zcolor=y, marker=ColorGradient(cmap(&quot;R3&quot;)[1]))</code></pre><h2><a class="nav-anchor" id="Organisation-of-the-Colour-Maps-1" href="#Organisation-of-the-Colour-Maps-1">Organisation of the Colour Maps</a></h2><p>The colour maps are organised according to the attributes: Linear, Diverging, Rainbow, Cyclic, and Isoluminant.</p><p><img src="doc/linear_kry_5-98_c75_n256.png" alt="Linear Colour Map"/></p><p><strong>Linear</strong> colour maps are intended for general use and have colour lightness values that increase or decrease linearly over the colour map&#39;s range.</p><p><img src="doc/diverging_bwr_40-95_c42_n256.png" alt="Diverging Colour Map"/></p><p><strong>Diverging</strong> colour maps are suitable where the data being displayed has a well defined reference value and we are interested in differentiating values that lie above, or below, the reference value. The centre point of the colour map will be white, black or grey. <code>cmap()</code> provides diverging maps that have endpoints that are matched in both lightness and chroma.  It should be noted that, in general, diverging colour maps have a small perceptual flat spot at the centre. The exception being linear-diverging maps which avoid this problem, try <code>cmap(&quot;D7&quot;)</code>.</p><p><img src="doc/rainbow_bgyrm_35-85_c71_n256.png" alt="Rainbow Colour Map"/></p><p><strong>Rainbow</strong> colour maps are widely used but often misused. It is suggested that they be avoided because they have reversals in the lightness gradient at yellow and red which can upset a viewer&#39;s perceptual ordering of the colours in the colour map. However, they are attractive and perhaps can have a legitimate use where the main aim is to differentiate data values rather than communicate a data ordering. I believe the rainbow colour maps generated by <code>cmap()</code> (&quot;R1&quot; or &quot;R2&quot;) have minimal badness though they do have localised perceptual flat spots at yellow and red. <code>cmap(&quot;R3&quot;)</code> is a useful diverging rainbow colour map.</p><p><img src="doc/c_cyclic_mygbm_30-95_c78_n256.png" alt="Cyclic Colour Map"/></p><p><strong>Cyclic</strong> colour maps have colours that are matched at each end. They are intended for the presentation of data that is cyclic such as orientation values or angular phase data. They require particular care in their design (the standard colour circle is not a good map). <code>cmap()</code> provides cyclic maps that partition the circle into four colours, suitable for visualising orientation data (try <code>cmap(&quot;C1&quot;)</code>), and into two colours for visualising phase data (try <code>cmap(&quot;C4&quot;)</code>).</p><p><img src="doc/isoluminant_cgo_80_c38_n256.png" alt="Isoluminant Colour Map"/></p><p><strong>Isoluminant</strong> colour maps are constructed from colours of equal perceptual lightness. These colour maps are designed for use with relief shading. On their own these colour maps are not very useful because features in the data are very hard to discern. However, when used in conjunction with relief shading their constant lightness means that the colour map does not induce an independent shading pattern that can interfere with, or even hide, the structures induced by the relief shading. The relief shading provides the structural information and the colours provide the data classification information.</p><p><img src="doc/diverging-protanopic-deuteranopic_bwy_60-95_c32_n256.png" alt="Colour Blind Colour Map"/></p><p><strong>Colour Blind</strong> colour maps. These are not designed to be merely &#39;colour blind safe&#39;. These maps have been constructed to lie within either the 2D model of protanopic/deuteranopic colour space, or the 2D model of tritanopic colour space.  Hopefully by working within these colour spaces people who are colour blind will be able to share a common perceptual interpretation of data with those who have normal colour vision.  It also ensures maximal use of the available colour spaces, and allows chroma and lightness to be properly used in the design of colour maps.  I would value any feedback on the usefulness, or otherwise, of these maps.</p><h2><a class="nav-anchor" id="Links-1" href="#Links-1">Links</a></h2><ul><li><a href="doc/index.md">Function reference</a></li><li><a href="http://www.peterkovesi.com/matlabfns/index.html#colour">MATLAB code</a></li></ul><p>from which this Julia code was ported.</p><ul><li><a href="http://peterkovesi.com/projects/colourmaps/index.html">A set of perceptually uniform colour map files</a> prepared for use with a number of standard visualisation packages.</li><li>Reference: Peter Kovesi. Good Colour Maps: How to Design Them. <a href="https://arxiv.org/abs/1509.03700">arXiv:1509.03700 [cs.GR] 2015</a></li></ul><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
