<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reflection · CUDAnative.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>CUDAnative.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../../man/usage/">Usage</a></li><li><a class="toctext" href="../../man/troubleshooting/">Troubleshooting</a></li><li><a class="toctext" href="../../man/performance/">Performance</a></li><li><a class="toctext" href="../../man/hacking/">Hacking</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../compilation/">Compilation &amp; Execution</a></li><li class="current"><a class="toctext" href>Reflection</a><ul class="internal"><li><a class="toctext" href="#Convenience-macros-1">Convenience macros</a></li><li><a class="toctext" href="#Version-and-related-queries-1">Version and related queries</a></li></ul></li><li><span class="toctext">Device Code</span><ul><li><a class="toctext" href="../device/intrinsics/">Intrinsics</a></li><li><a class="toctext" href="../device/array/">Arrays</a></li><li><a class="toctext" href="../device/libdevice/">libdevice</a></li></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Library</li><li><a href>Reflection</a></li></ul></nav><hr/><div id="topbar"><span>Reflection</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Reflection-1" href="#Reflection-1">Reflection</a></h1><p>Because of using a different compilation toolchain, CUDAnative.jl offers counterpart functions to the <code>code_</code> functionality from Base:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.code_llvm" href="#CUDAnative.code_llvm"><code>CUDAnative.code_llvm</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">code_llvm([io], f, types; optimize=true, cap::VersionNumber, kernel=true,
                          dump_module=false, strip_ir_metadata=true)</code></pre><p>Prints the device LLVM IR generated for the method matching the given generic function and type signature to <code>io</code> which defaults to <code>stdout</code>. The IR is optimized according to <code>optimize</code> (defaults to true), which includes entry-point specific optimizations if <code>kernel</code> is set (defaults to false). The device capability <code>cap</code> to generate code for defaults to the current active device&#39;s capability, or v&quot;2.0&quot; if there is no such active context. The entire module, including headers and other functions, is dumped if <code>dump_module</code> is set (defaults to false). Finally, setting <code>strip_ir_metadata</code> removes all debug metadata (defaults to true).</p><p>See also: <a href="#CUDAnative.@device_code_llvm"><code>@device_code_llvm</code></a>, <a href="lib/@ref"><code>InteractiveUtils.code_llvm</code></a></p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.code_ptx" href="#CUDAnative.code_ptx"><code>CUDAnative.code_ptx</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">code_ptx([io], f, types; cap::VersionNumber, kernel=false, strip_ir_metadata=true)</code></pre><p>Prints the PTX assembly generated for the method matching the given generic function and type signature to <code>io</code> which defaults to <code>stdout</code>. The device capability <code>cap</code> to generate code for defaults to the current active device&#39;s capability, or v&quot;2.0&quot; if there is no such active context. The optional <code>kernel</code> parameter indicates whether the function in question is an entry-point function, or a regular device function. Finally, setting <code>strip_ir_metadata</code> removes all debug metadata (defaults to true).</p><p>See also: <a href="#CUDAnative.@device_code_ptx"><code>@device_code_ptx</code></a></p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.code_sass" href="#CUDAnative.code_sass"><code>CUDAnative.code_sass</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">code_sass([io], f, types, cap::VersionNumber)</code></pre><p>Prints the SASS code generated for the method matching the given generic function and type signature to <code>io</code> which defaults to <code>stdout</code>. The device capability <code>cap</code> to generate code for defaults to the current active device&#39;s capability, or v&quot;2.0&quot; if there is no such active context. The method needs to be a valid entry-point kernel, eg. it should not return any values.</p><p>See also: <a href="#CUDAnative.@device_code_sass"><code>@device_code_sass</code></a></p></div></div></section><h2><a class="nav-anchor" id="Convenience-macros-1" href="#Convenience-macros-1">Convenience macros</a></h2><p>For ease of use, CUDAnative.jl also implements <code>@device_code_</code> macros wrapping the above reflection functionality. These macros evaluate the expression argument, while tracing compilation and finally printing or returning the code for every invoked CUDA kernel. Do note that this evaluation can have side effects, as opposed to similarly-named <code>@code_</code> macros in Base which are free of side effects.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.@device_code_lowered" href="#CUDAnative.@device_code_lowered"><code>CUDAnative.@device_code_lowered</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@device_code_lowered ex</code></pre><p>Evaluates the expression <code>ex</code> and returns the result of <a href="lib/@ref"><code>InteractiveUtils.code_lowered</code></a> for every compiled CUDA kernel.</p><p>See also: <a href="lib/@ref"><code>InteractiveUtils.@code_lowered</code></a></p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.@device_code_typed" href="#CUDAnative.@device_code_typed"><code>CUDAnative.@device_code_typed</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@device_code_typed ex</code></pre><p>Evaluates the expression <code>ex</code> and returns the result of <a href="lib/@ref"><code>InteractiveUtils.code_typed</code></a> for every compiled CUDA kernel.</p><p>See also: <a href="lib/@ref"><code>InteractiveUtils.@code_typed</code></a></p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.@device_code_warntype" href="#CUDAnative.@device_code_warntype"><code>CUDAnative.@device_code_warntype</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@device_code_warntype [io::IO=stdout] ex</code></pre><p>Evaluates the expression <code>ex</code> and prints the result of <a href="lib/@ref"><code>InteractiveUtils.code_warntype</code></a> to <code>io</code> for every compiled CUDA kernel.</p><p>See also: <a href="lib/@ref"><code>InteractiveUtils.@code_warntype</code></a></p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.@device_code_llvm" href="#CUDAnative.@device_code_llvm"><code>CUDAnative.@device_code_llvm</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@device_code_llvm [io::IO=stdout, ...] ex</code></pre><p>Evaluates the expression <code>ex</code> and prints the result of <a href="lib/@ref"><code>InteractiveUtils.code_llvm</code></a> to <code>io</code> for every compiled CUDA kernel. For other supported keywords, see <a href="#CUDAnative.code_llvm"><code>CUDAnative.code_llvm</code></a>.</p><p>See also: <a href="lib/@ref"><code>InteractiveUtils.@code_llvm</code></a></p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.@device_code_ptx" href="#CUDAnative.@device_code_ptx"><code>CUDAnative.@device_code_ptx</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@device_code_ptx [io::IO=stdout, ...] ex</code></pre><p>Evaluates the expression <code>ex</code> and prints the result of <a href="#CUDAnative.code_ptx"><code>CUDAnative.code_ptx</code></a> to <code>io</code> for every compiled CUDA kernel. For other supported keywords, see <a href="#CUDAnative.code_ptx"><code>CUDAnative.code_ptx</code></a>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.@device_code_sass" href="#CUDAnative.@device_code_sass"><code>CUDAnative.@device_code_sass</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@device_code_sass [io::IO=stdout, ...] ex</code></pre><p>Evaluates the expression <code>ex</code> and prints the result of <a href="#CUDAnative.code_sass"><code>CUDAnative.code_sass</code></a> to <code>io</code> for every compiled CUDA kernel. For other supported keywords, see <a href="#CUDAnative.code_sass"><code>CUDAnative.code_sass</code></a>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.@device_code" href="#CUDAnative.@device_code"><code>CUDAnative.@device_code</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@device_code dir::AbstractString=... [...] ex</code></pre><p>Evaluates the expression <code>ex</code> and dumps all intermediate forms of code to the directory <code>dir</code>.</p></div></div></section><h2><a class="nav-anchor" id="Version-and-related-queries-1" href="#Version-and-related-queries-1">Version and related queries</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.version" href="#CUDAnative.version"><code>CUDAnative.version</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">version(k::Kernel)</code></pre><p>Queries the PTX and SM versions a kernel was compiled for. Returns a named tuple.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.maxthreads" href="#CUDAnative.maxthreads"><code>CUDAnative.maxthreads</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">maxthreads(k::Kernel)</code></pre><p>Queries the maximum amount of threads a kernel can use in a single block.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.registers" href="#CUDAnative.registers"><code>CUDAnative.registers</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">registers(k::Kernel)</code></pre><p>Queries the register usage of a kernel.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CUDAnative.memory" href="#CUDAnative.memory"><code>CUDAnative.memory</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">memory(k::Kernel)</code></pre><p>Queries the local, shared and constant memory usage of a compiled kernel in bytes. Returns a named tuple.</p></div></div></section><footer><hr/><a class="previous" href="../compilation/"><span class="direction">Previous</span><span class="title">Compilation &amp; Execution</span></a><a class="next" href="../device/intrinsics/"><span class="direction">Next</span><span class="title">Intrinsics</span></a></footer></article></body></html>
