<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Docstrings · FastClosures.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>FastClosures.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Readme</a></li><li class="current"><a class="toctext" href>Docstrings</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Docstrings</a></li></ul></nav><hr/><div id="topbar"><span>Docstrings</span><a class="fa fa-bars" href="#"></a></div></header><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="FastClosures.@closure" href="#FastClosures.@closure"><code>FastClosures.@closure</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-none">@closure closure_expression</code></pre><p>Wrap the closure definition <code>closure_expression</code> in a let block to encourage the julia compiler to generate improved type information.  For example:</p><pre><code class="language-julia">callfunc(f) = f()

function foo(n)
   for i=1:n
       if i &gt;= n
           # Unlikely event - should be fast.  However, capture of `i` inside
           # the closure confuses the julia-0.6 compiler and causes it to box
           # the variable `i`, leading to a 100x performance hit if you remove
           # the `@closure`.
           callfunc(@closure ()-&gt;println(&quot;Hello $i&quot;))
       end
   end
end</code></pre><p>There&#39;s nothing nice about this - it&#39;s a heuristic workaround for some inefficiencies in the type information inferred by the julia 0.6 compiler. However, it can result in large speedups in many cases, without the need to restructure the code to avoid the closure.</p></div></div></section><pre><code class="language-none">FastClosures.FastClosures</code></pre><pre><code class="language-none">FastClosures.Var</code></pre><pre><code class="language-none">FastClosures.eval</code></pre><pre><code class="language-none">FastClosures.find_var_uses!</code></pre><pre><code class="language-none">FastClosures.find_var_uses_lhs!</code></pre><pre><code class="language-none">FastClosures.include</code></pre><pre><code class="language-none">FastClosures.makelet</code></pre><pre><code class="language-none">FastClosures.wrap_closure</code></pre><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Readme</span></a></footer></article></body></html>
