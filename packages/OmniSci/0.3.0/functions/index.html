<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · OmniSci.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="OmniSci.jl logo"/></a><h1>OmniSci.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Getting Started</a></li><li class="current"><a class="toctext" href>Functions</a><ul class="internal"><li><a class="toctext" href="#Authentication-1">Authentication</a></li><li><a class="toctext" href="#Querying-Data-1">Querying Data</a></li><li><a class="toctext" href="#Loading-Data-1">Loading Data</a></li><li><a class="toctext" href="#Dashboards-1">Dashboards</a></li><li><a class="toctext" href="#Metadata-1">Metadata</a></li></ul></li><li><a class="toctext" href="../apireference/">API Reference</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Functions</a></li></ul></nav><hr/><div id="topbar"><span>Functions</span><a class="fa fa-bars" href="#"></a></div></header><p>These functions constitute the main interface for working with OmniSci. If a function is not exported for the package, the assumption is that an end-user shouldn&#39;t need to use it. If you find otherwise, please <a href="https://github.com/omnisci/OmniSci.jl/issues">open an issue</a> for discussion.</p><h2><a class="nav-anchor" id="Authentication-1" href="#Authentication-1">Authentication</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.connect" href="#OmniSci.connect"><code>OmniSci.connect</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">connect(host::String, port::Int, user::String, passwd::String, dbname::String)</code></pre><p>Connect to an OmniSci database.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; conn = connect(&quot;localhost&quot;, 9091, &quot;mapd&quot;, &quot;HyperInteractive&quot;, &quot;mapd&quot;)
Connected to localhost:9091</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.disconnect" href="#OmniSci.disconnect"><code>OmniSci.disconnect</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">disconnect(conn::OmniSciConnection)</code></pre><p>Close connection to OmniSci database.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; disconnect(conn)
Connection to localhost:9091 closed</code></pre></div></div></section><h2><a class="nav-anchor" id="Querying-Data-1" href="#Querying-Data-1">Querying Data</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.sql_execute" href="#OmniSci.sql_execute"><code>OmniSci.sql_execute</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">sql_execute(conn::OmniSciConnection, query::String; first_n::Int = -1, at_most_n::Int = -1, as_df::Bool = true)</code></pre><p>Execute a SQL query.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.sql_execute_df" href="#OmniSci.sql_execute_df"><code>OmniSci.sql_execute_df</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">sql_execute_df(conn::OmniSciConnection, query::String, device_type::Int, device_id::Int, first_n::Int = -1)</code></pre><p>Execute a SQL query using Apache Arrow IPC (CPU). This method requires running the code in the same environment where OmniSci is running.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.sql_execute_gdf" href="#OmniSci.sql_execute_gdf"><code>OmniSci.sql_execute_gdf</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">sql_execute_gdf(conn::OmniSciConnection, query::String, device_id::Int; first_n::Int = -1)</code></pre><p>Execute a SQL query using Apache Arrow IPC (GPU). This method requires running the code in the same environment where OmniSci is running.</p></div></div></section><h2><a class="nav-anchor" id="Loading-Data-1" href="#Loading-Data-1">Loading Data</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.create_table" href="#OmniSci.create_table"><code>OmniSci.create_table</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">create_table(conn::OmniSciConnection, table_name::String, df::DataFrame; dryrun::Bool = false)</code></pre><p>Create a table in the database specified during authentication. This method takes a Julia DataFrame, reads the column types and creates the equivalent <code>create table</code> statement, optionally printing the <code>create table</code> statement instead of executing the statement using <code>sql_execute</code> method.</p><p>Note: This method is for convenience purposes only! It does not guarantee an optimized table statement. Additionally, decimal support is not fully implemented.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; create_table(conn, &quot;test&quot;, df)</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.load_table" href="#OmniSci.load_table"><code>OmniSci.load_table</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">load_table(conn::OmniSciConnection, table_name::String, rows::Vector{TStringRow})</code></pre></div></div><div><div><pre><code class="language-none">load_table(conn::OmniSciConnection, table_name::String, rows::DataFrame)</code></pre><p>Load a dataframe into OmniSci. This method loads data row-wise, converting data elements to string before upload. Currently, this method requires the table to already exist on OmniSci.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; load_table(conn, &quot;test&quot;, df)</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.load_table_binary_columnar" href="#OmniSci.load_table_binary_columnar"><code>OmniSci.load_table_binary_columnar</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">load_table_binary_columnar(conn::OmniSciConnection, table_name::String, cols::Vector{TColumn})</code></pre></div></div><div><div><pre><code class="language-none">load_table_binary_columnar(conn::OmniSciConnection, table_name::String, df::DataFrame)</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.load_table_binary_arrow" href="#OmniSci.load_table_binary_arrow"><code>OmniSci.load_table_binary_arrow</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">load_table_binary_arrow(conn::OmniSciConnection, table_name::String, arrow_stream::Vector{UInt8})</code></pre></div></div></section><h2><a class="nav-anchor" id="Dashboards-1" href="#Dashboards-1">Dashboards</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_dashboards" href="#OmniSci.get_dashboards"><code>OmniSci.get_dashboards</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_dashboards(conn::OmniSciConnection; as_df::Bool = true)</code></pre><p>Gets dashboards that user submitted during connect() can access.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; getdbs = get_dashboards(conn)
7×8 DataFrame. Omitted printing of 3 columns
│ Row │ dashboard_id │ dashboard_metadata │ dashboard_name │ dashboard_owner │ dashboard_state │
│     │ Int32        │ String             │ String         │ String          │ String          │
├─────┼──────────────┼────────────────────┼────────────────┼─────────────────┼─────────────────┤
│ 1   │ 9            │ metadata           │ 0vcAQEO1ZD     │ mapd            │                 │
│ 2   │ 6            │ metadata           │ QI0JsthBsB     │ mapd            │                 │
│ 3   │ 5            │ metadata           │ Srm72rCJHa     │ mapd            │                 │
│ 4   │ 4            │ metadata           │ sO0XgMUOZH     │ mapd            │                 │
│ 5   │ 1            │ metadata           │ testdash       │ mapd            │                 │
│ 6   │ 2            │ metadata           │ testdash2      │ mapd            │                 │
│ 7   │ 3            │ metadata           │ testdash3      │ mapd            │                 │</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_dashboard_grantees" href="#OmniSci.get_dashboard_grantees"><code>OmniSci.get_dashboard_grantees</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_dashboard_grantees(conn::OmniSciConnection, dashboard_id::Integer)</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.render_vega" href="#OmniSci.render_vega"><code>OmniSci.render_vega</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">render_vega(conn::OmniSciConnection, vega_json::String, compression_level::Int = 0)</code></pre><p>Render an OmniSci-flavored Vega specification using the backend rendering engine. Note that OmniSci does not currently support the full Vega specification; this method is mostly useful for rendering choropleths and related geospatial charts.</p><p>compression_level ranges from 0 (low compression, faster) to 9 (high compression, slower).</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; vg = {&quot;width&quot; : 1024, &quot;height&quot; : 1024...}

julia&gt; vega_json = render_vega(conn, vg)</code></pre></div></div></section><h2><a class="nav-anchor" id="Metadata-1" href="#Metadata-1">Metadata</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_tables_meta" href="#OmniSci.get_tables_meta"><code>OmniSci.get_tables_meta</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_tables_meta(conn::OmniSciConnection; as_df::Bool = true)</code></pre><p>Get metadata for tables in database specified in <code>connect()</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; metad = get_tables_meta(conn)
5×6 DataFrame
│ Row │ is_replicated │ is_view │ max_rows            │ num_cols │ shard_count │ table_name        │
│     │ Bool          │ Bool    │ Int64               │ Int64    │ Int64       │ String            │
├─────┼───────────────┼─────────┼─────────────────────┼──────────┼─────────────┼───────────────────┤
│ 1   │ false         │ false   │ 4611686018427387904 │ 4        │ 0           │ omnisci_states    │
│ 2   │ false         │ false   │ 4611686018427387904 │ 6        │ 0           │ omnisci_counties  │
│ 3   │ false         │ false   │ 4611686018427387904 │ 64       │ 0           │ omnisci_countries │
│ 4   │ false         │ false   │ 4611686018427387904 │ 4        │ 0           │ test2             │
│ 5   │ false         │ false   │ 4611686018427387904 │ 4        │ 0           │ test              │</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_table_details" href="#OmniSci.get_table_details"><code>OmniSci.get_table_details</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_table_details(conn::OmniSciConnection, table_name::String; as_df::Bool = true)</code></pre><p>Get table details such as column names and types.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; tbl_detail = get_table_details(conn, &quot;omnisci_states&quot;)
4×21 DataFrame. Omitted printing of 15 columns
│ Row │ col_name    │ col_type     │ comp_param │ encoding │ is_array │ is_physical │
│     │ String      │ DataType     │ Int32      │ String   │ Bool     │ Bool        │
├─────┼─────────────┼──────────────┼────────────┼──────────┼──────────┼─────────────┤
│ 1   │ id          │ String       │ 32         │ Dict     │ false    │ false       │
│ 2   │ abbr        │ String       │ 32         │ Dict     │ false    │ false       │
│ 3   │ name        │ String       │ 32         │ Dict     │ false    │ false       │
│ 4   │ omnisci_geo │ MultiPolygon │ 32         │ GeoInt   │ false    │ false       │</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_databases" href="#OmniSci.get_databases"><code>OmniSci.get_databases</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_databases(conn::OmniSciConnection; as_df::Bool=true)</code></pre><p>Get list of databases.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; db = get_databases(conn)
1×2 DataFrame
│ Row │ db_name │ db_owner │
│     │ String  │ String   │
├─────┼─────────┼──────────┤
│ 1   │ mapd    │ mapd     │</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_users" href="#OmniSci.get_users"><code>OmniSci.get_users</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_users(conn::OmniSciConnection; as_df::Bool = true)</code></pre><p>Get list of users who have access to database specified in <code>connect()</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; users = get_users(conn)
1×1 DataFrame
│ Row │ users  │
│     │ String │
├─────┼────────┤
│ 1   │ mapd   │</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_roles" href="#OmniSci.get_roles"><code>OmniSci.get_roles</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_roles(conn::OmniSciConnection; as_df::Bool = true)</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_hardware_info" href="#OmniSci.get_hardware_info"><code>OmniSci.get_hardware_info</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_hardware_info(conn::OmniSciConnection)</code></pre><p>Displays selected properties of hardware where OmniSci running, such as GPU and CPU information.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; hardware = get_hardware_info(conn)
OmniSci.TClusterHardwareInfo(OmniSci.THardwareInfo[THardwareInfo(0, 12, 0, 0, &quot;&quot;, OmniSci.TGpuSpecification[])])</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_status" href="#OmniSci.get_status"><code>OmniSci.get_status</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_status(conn::OmniSciConnection)</code></pre><p>Displays properties of OmniSci server, such as version and rendering capabilities.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; status = get_status(conn)
OmniSci.TServerStatus

  read_only: false
  version: 4.1.3-20180926-66c2aee949
  rendering_enabled: false
  start_time: 1540579280
  edition: ce
  host_name: aggregator
  poly_rendering_enabled: false</code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="OmniSci.get_all_roles_for_user" href="#OmniSci.get_all_roles_for_user"><code>OmniSci.get_all_roles_for_user</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">get_all_roles_for_user(conn::OmniSciConnection, userName::String; as_df::Bool = true)</code></pre></div></div></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Getting Started</span></a><a class="next" href="../apireference/"><span class="direction">Next</span><span class="title">API Reference</span></a></footer></article></body></html>
