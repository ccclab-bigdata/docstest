<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Walkthrough Â· NCEI.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>NCEI.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">NCEI.jl Documentation</a></li><li><a class="toctext" href="../GettingStarted/">Getting Started</a></li><li class="current"><a class="toctext" href>Walkthrough</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Walkthrough</a></li></ul></nav><hr/><div id="topbar"><span>Walkthrough</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Walkthrough-1" href="#Walkthrough-1">Walkthrough</a></h1><ul><li>Set Up</li></ul><p>After installing the package one can call it in a new session as any other package. A good practice is to define the <code>cdo_token</code> one intends to use for that session.</p><pre><code class="language-">using NCEI
const cdo_token = ENV[&quot;cdo_token&quot;]
# A token has form: r&quot;[A-Za-z]{32}&quot;</code></pre><ul><li>Datasets</li></ul><p>One should first inspect the datasets available to select the ones the appropriate ones. Good information about a dataset is its ID which one needs to query data from that dataset, the temporal coverage, and documentation that can be accessed through the uid. For example, the daily summaries dataset (GHCND) has uid: C00861. The information for this dataset can be accessed at: <a href="https://data.nodc.noaa.gov/cgi-bin/iso?id=gov.noaa.ncdc:C00861">https://data.nodc.noaa.gov/cgi-bin/iso?id=gov.noaa.ncdc:C00861</a>.</p><pre><code class="language-"># Fetch all available datasets
cdo_datasets(cdo_token)</code></pre><pre><code class="language-"># Fetch all information about the GSOY dataset specifically
cdo_datasets(cdo_token, &quot;GSOY&quot;)</code></pre><pre><code class="language-"># Fetch all available datasets with the Temperature at the time of observation (TOBS) data type
cdo_datasets(cdo_token, datatypes = &quot;TOBS&quot;)</code></pre><pre><code class="language-"># Fetch all available datasets with data for a given set of stations
cdo_datasets(cdo_token, stations = &quot;GHCND:USC00010008&quot;)</code></pre><ul><li>Data Categories</li></ul><p>The next step is to find the data categories one might need (e.g., temperature vs precipitation).</p><pre><code class="language-"># Fetch all available data categories
cdo_datacategories(cdo_token)</code></pre><pre><code class="language-"># Fetch all information about the Annual Agricultural dataset specifically
cdo_datacategories(cdo_token, &quot;ANNAGR&quot;)</code></pre><pre><code class="language-"># Fetch data categories for a given set of locations
cdo_datacategories(cdo_token, locations = [&quot;FIPS:37&quot;, &quot;CITY:US390029&quot;])</code></pre><ul><li>Data Types</li></ul><p>Now we can inspect which variables we want to query from what data set.</p><pre><code class="language-"># Fetch available data types
cdo_datatypes(cdo_token)</code></pre><pre><code class="language-"># Fetch more information about the ACMH data type id
cdo_datatypes(cdo_token, &quot;ACMH&quot;)</code></pre><pre><code class="language-"># Fetch data types with the air temperature data category
cdo_datatypes(cdo_token, datacategories = &quot;TEMP&quot;)</code></pre><pre><code class="language-"># Fetch data types that support a given set of stations
cdo_datatypes(cdo_token, stations = [&quot;COOP:310090&quot;, &quot;COOP:310184&quot;, &quot;COOP:310212&quot;])</code></pre><ul><li>Location Categories</li></ul><p>We must identify the spatial constraints of the search and that can be accomplished at various levels (e.g., State vs Zip code).</p><pre><code class="language-"># Fetch all available location categories
cdo_locationcategories(cdo_token)</code></pre><pre><code class="language-"># Fetch more information about the climate region location category
cdo_locationcategories(cdo_token, &quot;CLIM_REG&quot;)</code></pre><pre><code class="language-"># Fetch available location categories that have data after 1970
cdo_locationcategories(cdo_token, startdate = Date(1970, 1, 1))</code></pre><ul><li>Locations</li></ul><p>Now select which locations are of interest.</p><pre><code class="language-"># Fetch available locations
cdo_locations(cdo_token)</code></pre><pre><code class="language-"># Fetch more information about location id FIPS:37
cdo_locations(cdo_token, &quot;FIPS:37&quot;)</code></pre><pre><code class="language-"># Fetch available locations for the GHCND (Daily Summaries) dataset
cdo_locations(cdo_token, datasets = &quot;GHCND&quot;)</code></pre><pre><code class="language-"># Fetch all U.S. States
cdo_locations(cdo_token, locationcategories = &quot;ST&quot;)</code></pre><ul><li>Stations</li></ul><p>Lastly, one can obtain the relevant stations and verify their spatial information, temporal coverage, and data quality. To select from feasible weather stations one can use packages such as <code>Distances.jl</code> to obtain the nearest acceptable weather station to the desired location.</p><pre><code class="language-"># Fetch a list of stations that support a given set of data types
cdo_stations(cdo_token, datatypes = [&quot;EMNT&quot;, &quot;EMXT&quot;, &quot;HTMN&quot;])</code></pre><pre><code class="language-"># Fetch all information about the Abbeville AL station specifically
cdo_stations(cdo_token, &quot;COOP:010008&quot;)</code></pre><pre><code class="language-"># Fetch all the stations in North Carolina, US (FIPS:37)
cdo_stations(cdo_token, locations = &quot;FIPS:37&quot;)</code></pre><ul><li>Data</li></ul><p>The final step is to obtain the raw data itself. A few transformations are recommended before proceeding with the analysis of the data (e.g., transforming the dataframe from long to short and filling the missing records with missing values for those observations). Read the documentation to interpret the various flags under the attributes column.</p><pre><code class="language-"># Fetch data from the GHCND dataset (Daily Summaries) for zip code 28801, May 1st of 2010
cdo_data(cdo_token, &quot;GHCND&quot;, Date(2010, 5, 1), Date(2010, 5, 1), locations = &quot;ZIP:28801&quot;)</code></pre><pre><code class="language-"># Fetch data from the PRECIP_15 dataset (Precipitation 15 Minute) for COOP station 010008, for May of 2010 with metric units
cdo_data(cdo_token, &quot;PRECIP_15&quot;, Date(2010, 5, 1), Date(2010, 5, 31), stations = &quot;COOP:010008&quot;)</code></pre><pre><code class="language-"># Fetch data from the GSOM dataset (Global Summary of the Month) for GHCND station USC00010008, for May of 2010 with standard units
cdo_data(cdo_token, &quot;GSOM&quot;, Date(2010, 5, 1), Date(2010, 5, 31),
         stations = &quot;GHCND:USC00010008&quot;, metric = false)</code></pre><footer><hr/><a class="previous" href="../GettingStarted/"><span class="direction">Previous</span><span class="title">Getting Started</span></a></footer></article></body></html>
