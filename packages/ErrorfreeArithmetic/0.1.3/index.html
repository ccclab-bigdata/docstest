<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme · ErrorfreeArithmetic.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>ErrorfreeArithmetic.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li><a class="toctext" href="#exports-1">exports</a></li><li><a class="toctext" href="#introduction-1">introduction</a></li><li><a class="toctext" href="#use-1">use</a></li><li><a class="toctext" href="#compatibility-with-earlier-versions-1">compatibility with earlier versions</a></li><li><a class="toctext" href="#references-1">references</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="ErrorfreeArithmetic.jl-1" href="#ErrorfreeArithmetic.jl-1">ErrorfreeArithmetic.jl</a></h1><p>Error-free transformations are used to get results with extra accuracy.</p><h4><a class="nav-anchor" id="Copyright-2016-2017-by-Jeffrey-Sarnoff.-Released-under-the-MIT-License.-1" href="#Copyright-2016-2017-by-Jeffrey-Sarnoff.-Released-under-the-MIT-License.-1">Copyright © 2016-2017 by Jeffrey Sarnoff.  Released under the MIT License.</a></h4><hr/><p><a href="https://travis-ci.org/JeffreySarnoff/ErrorfreeArithmetic.jl"><img src="https://travis-ci.org/JeffreySarnoff/ErrorfreeArithmetic.jl.svg?branch=master" alt="Build Status"/></a></p><hr/><h2><a class="nav-anchor" id="exports-1" href="#exports-1">exports</a></h2><p><em>These are error-free transformations.</em></p><ul><li><code>two_sum</code>, <code>two_diff</code>, <code>two_prod</code></li><li><code>two_square</code>, <code>two_cube</code></li><li><code>three_sum</code>, <code>three_diff</code>, <code>three_prod</code></li><li><code>three_fma</code></li></ul><p><em>These are error-free transformations with magnitude sorted arguments.</em></p><ul><li><code>two_hilo_sum</code>, <code>two_lohi_sum</code></li><li><code>two_hilo_diff</code>, <code>two_lohi_diff</code></li><li><code>three_hilo_sum</code>, <code>three_lohi_sum</code></li><li><code>three_hilo_diff</code>, <code>three_lohi_diff</code></li></ul><p><em>These are least-error transformations, as close to error-free as possible.</em></p><ul><li><code>two_inv</code>, <code>two_sqrt</code></li><li><code>two_div</code></li></ul><h3><a class="nav-anchor" id="naming-1" href="#naming-1">naming</a></h3><p>The routines named with the prefix <code>two_</code> return a two-tuple holding <code>(high_order_part, low_order_part)</code>.</p><p>Those named with the prefix <code>three_</code> return a three-tuple holding <code>(high_part, mid_part, low_part)</code>.</p><h2><a class="nav-anchor" id="introduction-1" href="#introduction-1">introduction</a></h2><p>Error-free transformations return a tuple of the nominal result and the residual from the result (the left-over part).    </p><p>Error-free addition sums two floating point values (a, b) and returns two floating point values (hi, lo) such that:    </p><ul><li><code>(+)(a, b) == hi</code> </li><li><code>|hi| &gt; |lo|</code> and <code>(+)(hi, lo) == hi</code>  <em>abs(hi) and abs(lo) do not share significant bits</em></li></ul><p>Here is how it is done:</p><pre><code class="language-julia">function add_errorfree(a::T, b::T) where T&lt;:Union{Float64, Float32}
    a_plus_b_hipart = a + b
    b_asthe_summand = a_plus_b_hipart - a
    a_plus_b_lopart = (a - (a_plus_b_hipart - b_asthe_summand)) + (b - b_asthe_summand)
    return a_plus_b_hipart, a_plus_b_lopart
end

a = Float32(1/golden^2)                           #   0.3819_6602f0
b = Float32(pi^3)                                 #  31.0062_7700f0
a_plus_b = a + b                                  #  31.3882_4300f0

hi, lo = add_errorfree(a,b)                       # (31.3882_4300f0, 3.8743_0270f-7)

a_plus_b == hi                                    # true
abs(hi) &gt; abs(lo) &amp;&amp; hi + lo == hi                # true
</code></pre><p>The <code>lo</code> part is a portion of the accurate value, it is (most of) the residuum that the <code>hi</code> part could not represent.     The <code>hi</code> part runs out of significant bits before the all of the accurate value is represented.  We can see this:        </p><pre><code class="language-julia">a = Float32(1/golden^2)                           #   0.3819_6602f0
b = Float32(pi^3)                                 #  31.0062_7700f0

hi, lo = add_errorfree(a,b)                       # (31.3882_4300f0, 3.8743_0270f-7)

a_plus_b_accurate = BigFloat(a) + BigFloat(b)
lo_accurate  = Float32(a_plus_b_accurate - hi)

lo == lo_accurate                                 # true</code></pre><h2><a class="nav-anchor" id="use-1" href="#use-1">use</a></h2><p>This package is intended to be used in the support of other work.     All routines expect Float64 or Float32 or Float16 values.</p><h2><a class="nav-anchor" id="compatibility-with-earlier-versions-1" href="#compatibility-with-earlier-versions-1">compatibility with earlier versions</a></h2><p>Here are the aliases</p><pre><code class="language-julia">using ErrorfreeArithmetic

@inline add_errorfree(a::T, b::T) where {T&lt;:Base.IEEEFloat} = two_sum(a, b)
@inline subtract_errorfree(a::T, b::T) where {T&lt;:Base.IEEEFloat} = two_diff(a, b)
@inline multiply_errorfree(a::T, b::T) where {T&lt;:Base.IEEEFloat} = two_prod(a, b)
@inline square_errorfree(a::T) where {T&lt;:Base.IEEEFloat} = two_square(a)</code></pre><h2><a class="nav-anchor" id="references-1" href="#references-1">references</a></h2><p>Takeshi Ogita, Siegfried M. Rump, and Shin&#39;ichi Oishi     Accurate Sum and Dot Product     SIAM J. Sci. Comput., 26(6), 1955–1988.     Published online: 25 July 2006     <a href="http://dx.doi.org/10.1137/030601818">DOI: 10.1137/030601818</a>  </p><p>Stef Graillat, Valérie Ménissier-Morain     Error-Free Transformations in Real and Complex Floating Point Arithmetic     International Symposium on Nonlinear Theory and its Applications (NOLTA&#39;07), Sep 2007, Vancouver, Canada.      Proceedings of International Symposium on Nonlinear Theory and its Applications (NOLTA&#39;07), pp.341-344.     https://hal.archives-ouvertes.fr/hal-01306229    </p><p>Sylvie Boldo, Stef Graillat, and Jean-Michel Muller     On the robustness of the 2Sum and Fast2Sum algorithms     ACM Transactions on Mathematical Software, Association for Computing Machinery, 2017     https://hal.inria.fr/ensl-01310023    </p><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
