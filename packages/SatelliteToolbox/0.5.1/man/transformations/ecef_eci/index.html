<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ECEF and ECI · Satellite Toolbox</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link href="../../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../../../index.html"><img class="logo" src="../../../assets/logo.png" alt="Satellite Toolbox logo"/></a><h1>Satellite Toolbox</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../../">Home</a></li><li><span class="toctext">Earth</span><ul><li><a class="toctext" href="../../earth/atmospheric_models/">Earth atmospheric models</a></li><li><a class="toctext" href="../../earth/geomagnetic_field_models/">Earth geomagnetic field models</a></li><li><a class="toctext" href="../../earth/space_indices/">Space indices</a></li></ul></li><li><span class="toctext">Orbit</span><ul><li><a class="toctext" href="../../orbit/anomalies/">Anomalies</a></li><li><a class="toctext" href="../../orbit/general/">General analysis</a></li><li><a class="toctext" href="../../orbit/propagators/">Orbit propagators</a></li><li><a class="toctext" href="../../orbit/tle/">TLE</a></li></ul></li><li><span class="toctext">Transformations</span><ul><li class="current"><a class="toctext" href>ECEF and ECI</a><ul class="internal"><li><a class="toctext" href="#EOP-Data-1">EOP Data</a></li><li><a class="toctext" href="#ECEF-to-ECEF-1">ECEF to ECEF</a></li><li><a class="toctext" href="#ECI-to-ECI-1">ECI to ECI</a></li><li><a class="toctext" href="#ECEF-to-ECI-1">ECEF to ECI</a></li><li class="toplevel"><a class="toctext" href="#ECI-to-ECEF-1">ECI to ECEF</a></li></ul></li><li><a class="toctext" href="../geodetic_geocentric/">Geodetic and Geocentric</a></li></ul></li><li><a class="toctext" href="../../../lib/library/">Library</a></li></ul></nav><article id="docs"><header><nav><ul><li>Transformations</li><li><a href>ECEF and ECI</a></li></ul></nav><hr/><div id="topbar"><span>ECEF and ECI</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="ECEF-and-ECI-1" href="#ECEF-and-ECI-1">ECEF and ECI</a></h1><p>This package currently provides the entire IAU-76/FK5 model to transform reference systems. The following table lists the available coordinate frames and how they can be referenced in the functions that will be described later on.</p><table><tr><th>Reference</th><th>Type</th><th>Coordinate frame name</th></tr><tr><td><code>ITRF()</code></td><td>ECEF</td><td>International Terrestrial Reference Frame</td></tr><tr><td><code>PEF()</code></td><td>ECEF</td><td>Pseudo-Earth Fixed reference frame</td></tr><tr><td><code>MOD()</code></td><td>ECI</td><td>Mean-Of-Date reference frame</td></tr><tr><td><code>TOD()</code></td><td>ECI</td><td>True-Of-Data reference frame</td></tr><tr><td><code>GCRF()</code></td><td>ECI</td><td>Geocentric Celestial Reference Frame (GCRF)</td></tr><tr><td><code>J2000()</code></td><td>ECI</td><td>J2000 reference frame</td></tr><tr><td><code>TEME()</code></td><td>ECI</td><td>True Equator, Mean Equinox reference frame</td></tr></table><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>ECEF stands for Earth-Centered, Earth-Fixed whereas ECI stands for Earth-Centered Inertial.</p></div></div><h2><a class="nav-anchor" id="EOP-Data-1" href="#EOP-Data-1">EOP Data</a></h2><p>The conversions here sometimes requires additional data related to the Earth orientation. This information is provided by <a href="https://www.iers.org">IERS</a> (International Earth Rotation and Reference Systems Service). The SatelliteToolbox.jl has the capability to automatically download and parse the IERS EOP (Earth Orientation Parameters) data.</p><p>The function that will automatically download the files, store them in the file system, and parse the data is:</p><pre><code class="language-julia">function get_iers_eop(data_type::Symbol = :IAU1980; force_download = false)</code></pre><p>in which:</p><ul><li><code>data_type</code> is a symbol that specify what kind of data is desired (<code>:IAU1980</code> for IAU1980 data and <code>:IAU2000A</code> for IAU2000A data). If omitted, then it defaults to <code>:IAU1980</code>.</li><li>The files are obtained on a daily-basis by the package RemoteFiles.jl. If the user wants to force the download, then the keyword <code>force_download</code> should be set to <code>true</code>.</li><li>This function returns an instance of the structure <code>EOPData_IAU1980</code> or <code>EOPData_IAU2000A</code> depending on the selection of <code>data_type</code>. The returned value should be passed to the reference frame conversion functions as described in the following.</li></ul><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Notice that, although we can fetch IAU2000A data, this IAU2000A theory is not implemented yet.</p></div></div><pre><code class="language-julia-repl">julia&gt; eop_IAU1980 = get_iers_eop();
[ Info: Downloading file &#39;EOP_IAU1980.TXT&#39; from &#39;https://datacenter.iers.org/data/latestVersion/223_EOP_C04_14.62-NOW.IAU1980223.txt&#39;.</code></pre><h2><a class="nav-anchor" id="ECEF-to-ECEF-1" href="#ECEF-to-ECEF-1">ECEF to ECEF</a></h2><p>One ECEF frame can be converted to another one by the following function:</p><pre><code class="language-julia">function rECEFtoECEF([T,] ECEFo, ECEFf, JD_UTC::Number, eop_data)</code></pre><p>where it will be computed the rotation from the ECEF reference frame <code>ECEFo</code> to the ECEF reference frame <code>ECEFf</code> at the Julian Day [UTC] <code>JD_UTC</code>. The rotation description that will be used is given by <code>T</code>, which can be <code>DCM</code> or <code>Quaternion</code>. If <code>T</code> is omitted, then it defaults to <code>DCM</code>. The EOP data <code>eop_data</code> in this case is always necessary. Hence, the user must initialize it as described in the section <a href="#EOP-Data-1">EOP Data</a>.</p><pre><code class="language-julia-repl">julia&gt; rECEFtoECEF(PEF(), ITRF(), DatetoJD(1986,6,19,21,35,0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
  1.0          0.0         -4.3531e-7
 -6.30011e-13  1.0         -1.44727e-6
  4.3531e-7    1.44727e-6   1.0

julia&gt; rECEFtoECEF(Quaternion, PEF(), ITRF(), DatetoJD(1986,6,19,21,35,0), eop_IAU1980)
Quaternion{Float64}:
  + 0.9999999999997147 - 7.236343481310813e-7.i + 2.1765518308012794e-7.j + 0.0.k</code></pre><h2><a class="nav-anchor" id="ECI-to-ECI-1" href="#ECI-to-ECI-1">ECI to ECI</a></h2><p>One ECI frame can be converted to another ECI frame by one of the following functions:</p><pre><code class="language-julia">function rECEFtoECI([T,] ECIo, ECIf, JD_UTC::Number [, eop_data])
function rECEFtoECI([T,] ECIo, JD_UTCo::Number, ECIf, JD_UTCf::Number [, eop_data])</code></pre><p>where it will be computed compute the rotation from the ECI reference frame <code>ECIo</code> to another ECI reference frame <code>ECIf</code>. If the origin and destination frame contain only one <em>of date</em> frame, then the first signature is used and <code>JD_UTC</code> is the epoch of this frame. On the other hand, if the origin and destination frame contain two <em>of date</em> frame<a href="#footnote-1">[1]</a>, e.g. <code>TOD =&gt; MOD</code>, then the second signature must be used in which <code>JD_UTCo</code> is the epoch of the origin frame and <code>JD_UTCf</code> is the epoch of the destination frame. The rotation description that will be used is given by <code>T</code>, which can be <code>DCM</code> or <code>Quaternion</code>. If <code>T</code> is omitted, then it defaults to <code>DCM</code>. The EOP data <code>eop_data</code>, as described in section <a href="#EOP-Data-1">EOP Data</a>, is required in some conversions, as described in the following table.</p><div class="footnote" id="footnote-1"><a href="#footnote-1"><strong>[1]</strong></a><p>TEME is an <em>of date</em> frame.</p></div><table><tr><th>Model</th><th>ECIo</th><th>ECIf</th><th>EOP Data</th><th>Function Signature</th></tr><tr><td>IAU-76/FK5</td><td><code>GCRF</code></td><td><code>J2000</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>GCRF</code></td><td><code>MOD</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>GCRF</code></td><td><code>TOD</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>GCRF</code></td><td><code>TEME</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>J2000</code></td><td><code>GCRF</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>J2000</code></td><td><code>MOD</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>J2000</code></td><td><code>TOD</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>J2000</code></td><td><code>TEME</code></td><td>Not required</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>MOD</code></td><td><code>GCRF</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>MOD</code></td><td><code>J2000</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>MOD</code></td><td><code>TOD</code></td><td>EOP IAU1980</td><td>Second</td></tr><tr><td>IAU-76/FK5</td><td><code>MOD</code></td><td><code>TEME</code></td><td>EOP IAU1980</td><td>Second</td></tr><tr><td>IAU-76/FK5</td><td><code>TOD</code></td><td><code>GCRF</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>TOD</code></td><td><code>J2000</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>TOD</code></td><td><code>MOD</code></td><td>EOP IAU1980</td><td>Second</td></tr><tr><td>IAU-76/FK5</td><td><code>TOD</code></td><td><code>TEME</code></td><td>EOP IAU1980</td><td>Second</td></tr><tr><td>IAU-76/FK5</td><td><code>TEME</code></td><td><code>GCRF</code></td><td>EOP IAU1980</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>TEME</code></td><td><code>J2000</code></td><td>Not requrired</td><td>First</td></tr><tr><td>IAU-76/FK5</td><td><code>TEME</code></td><td><code>MOD</code></td><td>EOP IAU1980</td><td>Second</td></tr><tr><td>IAU-76/FK5</td><td><code>TEME</code></td><td><code>TOD</code></td><td>EOP IAU1980</td><td>Second</td></tr></table><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In this function, MOD and TOD frames are always defined with IERS EOP corrections. Hence, if one wants to obtain the MOD and TOD frames according to the original IAU-76/FK5 theory, it is necessary to use the low-level functions in file <code>./src/transformations/fk5/fk5.jl</code>.</p></div></div><pre><code class="language-julia-repl">julia&gt; rECItoECI(DCM, GCRF(), J2000(), DatetoJD(1986, 6, 19, 21, 35, 0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
  1.0          -2.45469e-12   4.56602e-10
  2.45466e-12   1.0          -1.84455e-9
 -4.56602e-10   1.84455e-9    1.0

julia&gt; rECItoECI(Quaternion, TEME(), GCRF(), DatetoJD(1986, 6, 19, 21, 35, 0), eop_IAU1980)
Quaternion{Float64}:
  + 0.9999986335698654 + 1.8300414020900853e-5.i + 0.0006653038276169474.j - 0.0015132396749411375.k

julia&gt; rECItoECI(TOD(), DatetoJD(1986,6,19,21,35,0), TOD(), DatetoJD(1987,5,19,3,0,0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 1.0          -0.000224087  -9.73784e-5
 0.000224086   1.0          -5.79859e-6
 9.73797e-5    5.77677e-6    1.0

julia&gt; rECItoECI(Quaternion, TOD(), JD_J2000, MOD(), JD_J2000, eop_IAU1980)
Quaternion{Float64}:
  + 0.9999999993282687 - 1.400220690336851e-5.i + 1.3473593746216003e-5.j - 3.107834312843103e-5.k

julia&gt; rECItoECI(J2000(), TEME(), DatetoJD(1986,6,19,21,35,0))
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
  0.999995    0.0030265    0.00133055
 -0.00302645  0.999995    -3.86125e-5
 -0.00133066  3.45854e-5   0.999999</code></pre><h2><a class="nav-anchor" id="ECEF-to-ECI-1" href="#ECEF-to-ECI-1">ECEF to ECI</a></h2><p>One ECEF frame can be convert to one ECI frame using the following function:</p><pre><code class="language-julia">function rECEFtoECI([T,] ECEF, ECI, JD_UTC::Number [, eop_data])</code></pre><p>where it will be compute the rotation from the ECEF frame <code>ECEF</code> to the ECI frame <code>ECI</code> at the Julian Day [UTC] <code>JD_UTC</code>. The rotation description that will be used is given by <code>T</code>, which can be <code>DCM</code> or <code>Quaternion</code>. If it is omitted, then it defaults to <code>DCM</code>. The EOP data <code>eop_data</code>, as described in section <a href="#EOP-Data-1">EOP Data</a>, is required in some conversions, as described in the following table.</p><table><tr><th>Model</th><th>ECEF</th><th>ECI</th><th>EOP Data</th></tr><tr><td>IAU-76/FK5</td><td><code>ITRF</code></td><td><code>GCRF</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>ITRF</code></td><td><code>J2000</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>ITRF</code></td><td><code>MOD</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>ITRF</code></td><td><code>TOD</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>ITRF</code></td><td><code>TEME</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>PEF</code></td><td><code>GCRF</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>PEF</code></td><td><code>J2000</code></td><td>Not required*</td></tr><tr><td>IAU-76/FK5</td><td><code>PEF</code></td><td><code>MOD</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>PEF</code></td><td><code>TOD</code></td><td>EOP IAU1980</td></tr><tr><td>IAU-76/FK5</td><td><code>PEF</code></td><td><code>TEME</code></td><td>Not required*</td></tr></table><p><code>*</code>: In this case, the Julian Time UTC will be assumed equal to Julian Time UT1 to compute the Greenwich Mean Sidereal Time. This is an approximation, but should be sufficiently accurate for some applications. Notice that, if EOP Data is provided, the Julian Day UT1 will be accurately computed.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In this function, MOD and TOD frames are always defined with IERS EOP corrections. Hence, if one wants to obtain the MOD and TOD frames according to the original IAU-76/FK5 theory, it is necessary to use the low-level functions in file <code>./src/transformations/fk5/fk5.jl</code>.</p></div></div><pre><code class="language-julia-repl">julia&gt; rECEFtoECI(DCM, ITRF(), GCRF(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619267      0.78518     -0.00132979
 -0.78518      -0.619267     3.33492e-5
 -0.000797313   0.00106478   0.999999

julia&gt; rECEFtoECI(ITRF(), GCRF(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619267      0.78518     -0.00132979
 -0.78518      -0.619267     3.33492e-5
 -0.000797313   0.00106478   0.999999

julia&gt; rECEFtoECI(PEF(), J2000(), DatetoJD(1986, 06, 19, 21, 35, 0))
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619271      0.785176    -0.00133066
 -0.785177     -0.619272     3.45854e-5
 -0.000796885   0.00106622   0.999999

julia&gt; rECEFtoECI(PEF(), J2000(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619267      0.78518     -0.00133066
 -0.78518      -0.619267     3.45854e-5
 -0.000796879   0.00106623   0.999999

julia&gt; rECEFtoECI(Quaternion, ITRF(), GCRF(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
Quaternion{Float64}:
  + 0.4363098936462618 - 0.0005909969666939257.i + 0.00030510511316206974.j + 0.8997962182293519.k</code></pre><h1><a class="nav-anchor" id="ECI-to-ECEF-1" href="#ECI-to-ECEF-1">ECI to ECEF</a></h1><p>One ECI frame can be converted to one ECEF frame using the following function:</p><pre><code class="language-julia">function rECItoECEF([T,] ECI, ECEF, JD_UTC::Number [, eop_data])</code></pre><p>which has the same characteristics of the function <code>rECEFtoECI</code> described in Section <a href="#ECEF-to-ECI-1">ECEF to ECI</a>, but with the inputs <code>ECI</code>  and <code>ECEF</code> swapped.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>This function actually calls <code>rECEFtoECI</code> first and then uses <code>inv_rotation</code>. Hence, it has a slightly overhead on top of <code>rECEFtoECI</code>, which should be negligible for both rotation representations that are supported.</p></div></div><pre><code class="language-julia-repl">julia&gt; rECItoECEF(DCM, GCRF(), ITRF(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619267    -0.78518     -0.000797313
  0.78518     -0.619267     0.00106478
 -0.00132979   3.33492e-5   0.999999

julia&gt; rECItoECEF(GCRF(), ITRF(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619267    -0.78518     -0.000797313
  0.78518     -0.619267     0.00106478
 -0.00132979   3.33492e-5   0.999999

julia&gt; rECItoECEF(J2000(), PEF(), DatetoJD(1986, 06, 19, 21, 35, 0))
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619271    -0.785177    -0.000796885
  0.785176    -0.619272     0.00106622
 -0.00133066   3.45854e-5   0.999999

julia&gt; rECItoECEF(J2000(), PEF(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
3×3 StaticArrays.SArray{Tuple{3,3},Float64,2,9}:
 -0.619267    -0.78518     -0.000796879
  0.78518     -0.619267     0.00106623
 -0.00133066   3.45854e-5   0.999999

julia&gt; rECItoECEF(Quaternion, GCRF(), ITRF(), DatetoJD(1986, 06, 19, 21, 35, 0), eop_IAU1980)
Quaternion{Float64}:
  + 0.4363098936462618 + 0.0005909969666939257.i - 0.00030510511316206974.j - 0.8997962182293519.k</code></pre><footer><hr/><a class="previous" href="../../orbit/tle/"><span class="direction">Previous</span><span class="title">TLE</span></a><a class="next" href="../geodetic_geocentric/"><span class="direction">Next</span><span class="title">Geodetic and Geocentric</span></a></footer></article></body></html>
