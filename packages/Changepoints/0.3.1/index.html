<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme · Changepoints.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Changepoints.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Documentation-1">Documentation</a></li><li class="toplevel"><a class="toctext" href="#Usage-1">Usage</a></li><li><a class="toctext" href="#Simulation-1">Simulation</a></li><li><a class="toctext" href="#Penalty-selection-1">Penalty selection</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Changepoints.jl-1" href="#Changepoints.jl-1">Changepoints.jl</a></h1><p><a href="https://travis-ci.org/STOR-i/Changepoints.jl"><img src="https://travis-ci.org/STOR-i/Changepoints.jl.png" alt="Build Status"/></a></p><p>A Julia package for the detection of multiple changepoints in time series.</p><ul><li>Detection is based on optimising a cost function over segments of the data.</li><li>Implementations of the most efficient search algorithms (PELT , Binary Segmentation).</li><li>A wide choice of parametric cost functions already implemented such as a change in mean/variance/mean and variance for Normal errors.</li><li>Changepoint algorithms have an interface which allows users to input their own cost functions</li></ul><p>For a general overview of the multiple changepoint problem and mathematical details see <a href="http://arxiv.org/pdf/1101.1438.pdf">PELT</a>.</p><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p>Changepoints requires Julia version 0.7 or above. To install Changepoints simply run the following command inside Julia package mode (started by typing<code>]</code> in the Julia REPL):</p><pre><code class="language-julia-repl">(v0.7) pkg&gt;  add Changepoints</code></pre><h2><a class="nav-anchor" id="Documentation-1" href="#Documentation-1">Documentation</a></h2><p>Most of the functionality of Changepoints has been documented. This is accessible in the Julia REPL in help mode. (started by typing &#39;?&#39; in the Julia REPL):</p><pre><code class="language-julia-repl">help?&gt; @PELT
  @PELT data changepoint_model [β₁ [β₂] ]

  Runs the PELT algorithm on time series data using a specified changepoint_model and penalties. 
  If no penalty β₁ provided, a default of value log(length(data)) is used. If two penalties β₁ and β₂ are provided
  then the CROPS algorithm is run which finds all optimal segmentations for all penalties between β₁ and β₂.

  See also: PELT, CROPS

  Example
  ≡≡≡≡≡≡≡≡≡

  n = 1000
  λ = 100
  μ, σ = Normal(0.0, 10.0), 1.0
  # Samples changepoints from Normal distribution with changing mean
  sample, cps = @changepoint_sampler n λ Normal(μ, σ)
  # Run PELT on sample
  pelt_cps, pelt_cost = @PELT sample Normal(:?, σ)</code></pre><h1><a class="nav-anchor" id="Usage-1" href="#Usage-1">Usage</a></h1><p>As an example first we simulate a time series with multiple changes in mean and then segment it using PELT plotting the time series as we go.</p><h2><a class="nav-anchor" id="Simulation-1" href="#Simulation-1">Simulation</a></h2><p>This code simulates a time series of length n with segments that have lengths drawn from a Poisson distribution with mean lambda. The variance is fixed in this case as one but for each new segment a new mean is drawn from a standard gaussian distribution.</p><pre><code class="language-none">n = 1000                   # Sample size
λ = 70                     # freq of changepoints
μ, σ = Normal(0,1), 1.0
data, cps = @changepoint_sampler n λ Normal(μ, σ)</code></pre><p><img src="/docs/example.png?raw=true &quot;Simulated Changepoints&quot;" alt="Gadfly plot of simulated changepoints"/></p><p>To segment the data assuming it is Normally distributed and has a constant variance of one, using a default penalty (the log of the length of the data) can be done using the @PELT macro. Currently, this package supports the Gadfly and Winston packages for the convenient plotting of the results. These packages must be explicity loaded to make use of this functionality. If the plotting package was loaded after Changepoints, then the user must run an additional command to load the plotting functionaly, e.g.  <code>Changepoints.Gadfly_init()</code>.</p><pre><code class="language-none">pelt_cps, cost = @PELT data Normal(:?, 1.0)
plot(data, pelt_cps)</code></pre><p><img src="/docs/example_pelt.png?raw=true &quot;Changepoints detected by PELT&quot;" alt="Gadfly plot of Changepoints detected by PELT"/></p><h2><a class="nav-anchor" id="Penalty-selection-1" href="#Penalty-selection-1">Penalty selection</a></h2><p>The methods implemented view the problem as one of optimising a penalised cost function where the penalty comes in whenever a new changepoint is added. Assuming we have specified the correct parametric (non-parametric cost coming soon) model/cost function then the only area of possible misspecification is in the value of the penalty. There is no &quot;correct&quot; choice of penalty however it can be very instructive to look at the segmentations and especially the number of changepoints for a range of penalties. The Changepoints for a Range Of Penalties (CROPS) method allows us to do this efficiently using PELT, by exploiting the relationship between the penalised and constrained versions of the same optimisation problem. For more information see <a href="http://arxiv.org/abs/1412.3617">CROPS</a>.</p><p>To run the PELT algorithm for a range of penalties say pen1 to pen2 where pen1 &lt; pen2 then we can use the following code:</p><pre><code class="language-none">crops_output = @PELT data Normal(:?, 1.0) pen1 pen2</code></pre><p>Having segmented the dataset for a range of penalties the problem now becomes one of model selection. Again, if a plotting package has been loaded, we can create a so called &quot;elbow&quot; plot from these results.</p><pre><code class="language-none">plot(crops_output)</code></pre><p><img src="/docs/elbowplot.png?raw=true &quot;Elbow plot&quot;" alt="Gadfly plot of cost against number of changepoints"/></p><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
