<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · DeIdentification.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../assets/bcbi.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="DeIdentification.jl logo"/></a><h1>DeIdentification.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../usage/">Guide</a></li><li class="current"><a class="toctext" href>API</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>API</a></li></ul></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="API-Reference-1" href="#API-Reference-1">API Reference</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.DeIdDicts-Tuple{Any}" href="#DeIdentification.DeIdDicts-Tuple{Any}"><code>DeIdentification.DeIdDicts</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">DeIdDicts(maxdays)</code></pre><p>Structure containing dictionaries for project level mappings</p><ul><li>Primary ID -&gt; Research ID</li><li>Research ID -&gt; DateShift number of days</li><li>Research ID -&gt; Salt value</li></ul></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.ProjectConfig-Tuple{String}" href="#DeIdentification.ProjectConfig-Tuple{String}"><code>DeIdentification.ProjectConfig</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">ProjectConfig(config_file::String)</code></pre><p>Structure containing configuration information for project level information in the configuration YAML file.  This includes an array containing the FileConfig structures for dataset level information.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.deidentify-Tuple{ProjectConfig}" href="#DeIdentification.deidentify-Tuple{ProjectConfig}"><code>DeIdentification.deidentify</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">deidentify(cfg::ProjectConfig)</code></pre><p>This is the constructor for the <code>DeIdentified</code> struct. We use this type to store arrays of <code>DeIdDataFrame</code> variables, while also keeping a common <code>salt_dict</code> and <code>dateshift_dict</code> between <code>DeIdDataFrame</code>s. The <code>salt_dict</code> allows us to track what salt was used on what cleartext. This is only necessary in the case of doing re-identification. The <code>id_dict</code> argument is a dictionary containing the hash digest of the original primary ID to our new research IDs.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.deidentify-Tuple{String}" href="#DeIdentification.deidentify-Tuple{String}"><code>DeIdentification.deidentify</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">deidentify(config_path)</code></pre><p>Run entire pipeline: Processes configuration YAML file, de-identifies the data, and writes the data to disk.  Returns the dictionaries containing the mappings.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.FileConfig" href="#DeIdentification.FileConfig"><code>DeIdentification.FileConfig</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">FileConfig(name, filename, colmap, rename_cols)</code></pre><p>Structure containing configuration information for each datset in the configuration YAML file.  The colmap contains mapping of column names to their deidentification action (e.g. hash, salt, drop).</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.dateshift_val!-Tuple{DeIdDicts,Union{Missing, Date, DateTime},Int64}" href="#DeIdentification.dateshift_val!-Tuple{DeIdDicts,Union{Missing, Date, DateTime},Int64}"><code>DeIdentification.dateshift_val!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">dateshift_val!(dicts, val, pid)</code></pre><p>Dateshift fields containing dates. Dates are shifted by a maximum number of days specified in the project config.  All of the dates for the same primary key are shifted the same number of days. Of note is that missing values are left missing.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.deid_file!-Tuple{DeIdDicts,DeIdentification.FileConfig,ProjectConfig,Any}" href="#DeIdentification.deid_file!-Tuple{DeIdDicts,DeIdentification.FileConfig,ProjectConfig,Any}"><code>DeIdentification.deid_file!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">deid_file!(dicts, file_config, project_config, logger)</code></pre><p>Reads raw file and deidentifies per file configuration and project configurationg. Writes the deidentified data to a CSV file and updates the global dictionaries tracking identifier mappings.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.hash_salt_val!-Tuple{DeIdDicts,Any,Int64}" href="#DeIdentification.hash_salt_val!-Tuple{DeIdDicts,Any,Int64}"><code>DeIdentification.hash_salt_val!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">hash_salt_val!(dicts, val, pid)</code></pre><p>Salt and hash fields containing unique identifiers. Hashing is done in place using SHA256 and a 64-bit salt. Of note is that missing values are left missing.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.setrid-Tuple{Any,DeIdDicts}" href="#DeIdentification.setrid-Tuple{Any,DeIdDicts}"><code>DeIdentification.setrid</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">setrid(val, dicts)</code></pre><p>Set the value passed (a hex string) to a human readable integer.  It generates a new ID if the value hasn&#39;t been seen before, otherwise the existing ID is used.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DeIdentification.write_dicts-Tuple{DeIdDicts,Any,Any}" href="#DeIdentification.write_dicts-Tuple{DeIdDicts,Any,Any}"><code>DeIdentification.write_dicts</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">write_dicts(deid_dicts)</code></pre><p>Writes DeIdDicts structure to file. The dictionaries are written to josn. The files are written to the  <code>output_path</code> specified in the configuration YAML.</p></div></div></section><footer><hr/><a class="previous" href="../usage/"><span class="direction">Previous</span><span class="title">Guide</span></a></footer></article></body></html>
