<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme · Cascadia.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Cascadia.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Cascadia-1" href="#Cascadia-1">Cascadia</a></h1><p><a href="https://travis-ci.org/Algocircle/Cascadia.jl"><img src="https://travis-ci.org/Algocircle/Cascadia.jl.svg?branch=master" alt="Build Status"/></a></p><h3><a class="nav-anchor" id="A-CSS-Selector-library-in-Julia.-1" href="#A-CSS-Selector-library-in-Julia.-1">A CSS Selector library in Julia.</a></h3><p>Inspired by, and mostly a direct translation of, the <a href="https://github.com/andybalholm/cascadia">Cascadia</a> CSS Selector library, written in <a href="https://golang.org/">Go</a>, by <a href="https://github.com/andybalholm">@andybalhom</a>.</p><p>This package depends on the <a href="https://github.com/porterjamesj/Gumbo.jl">Gumbo.jl</a> package by <a href="https://github.com/porterjamesj">@porterjamesj</a>, which is a Julia wrapper around <a href="https://github.com/google/gumbo-parser">Google&#39;s Gumbo HTML parser library</a></p><h3><a class="nav-anchor" id="Usage-1" href="#Usage-1">Usage</a></h3><p>Usage is simple. Use <code>Gumbo</code> to parse an HTML string into a document, create a <code>Selector</code> from a string, and then use <code>eachmatch</code> to get the nodes in the document that match the selector. Alternatively, use <code>sel&quot;&lt;selector string&gt;&quot;</code> to do the same thing as <code>Selector</code>. The <code>eachmatch</code> function returns an array of elements which match the selector. If no match is found, a zero element array is returned. For unique matches, the array contains one element. Thus, check the length of the array to test whether a selector matches.</p><pre><code class="language-julia">using Cascadia
using Gumbo

n=parsehtml(&quot;&lt;p id=\&quot;foo\&quot;&gt;&lt;p id=\&quot;bar\&quot;&gt;&quot;)
s=Selector(&quot;#foo&quot;)
sm = sel&quot;#foo&quot;
eachmatch(s, n.root)
# 1-element Array{Gumbo.HTMLNode,1}:
#  Gumbo.HTMLElement{:p}

eachmatch(sm, n.root)
# 1-element Array{Gumbo.HTMLNode,1}:
#  Gumbo.HTMLElement{:p}</code></pre><p><strong>Note:</strong> The top level matching function name has changed from <code>matchall</code> in <code>v0.6</code> to <code>eachmatch</code> in <code>v0.7</code> and higher to reflect the change in Julia base.</p><h3><a class="nav-anchor" id="Webscraping-Example-1" href="#Webscraping-Example-1">Webscraping Example</a></h3><p>The primary use case for this library is to enable webscraping – the automatic extraction of information from html pages. As an example, consider the following code, which returns a list of questions that have been tagged with <code>julia-lang</code> on StackOverflow.</p><pre><code class="language-julia">using Cascadia
using Gumbo
using Requests

r = get(&quot;http://stackoverflow.com/questions/tagged/julia-lang&quot;)
h = parsehtml(convert(String, r.data))

qs = eachmatch(Selector(&quot;.question-summary&quot;),h.root)

println(&quot;StackOverflow Julia Questions (votes  answered?  url)&quot;)

for q in qs
    votes = nodeText(eachmatch(Selector(&quot;.votes .vote-count-post &quot;), q)[1])
    answered = length(eachmatch(Selector(&quot;.status.answered&quot;), q)) &gt; 0
    href = eachmatch(Selector(&quot;.question-hyperlink&quot;), q)[1].attributes[&quot;href&quot;]
    println(&quot;$votes  $answered  http://stackoverflow.com$href&quot;)
end</code></pre><p>This code produces the following output:</p><pre><code class="language-none">StackOverflow Julia Questions (votes  answered?  url)

0  false  http://stackoverflow.com/questions/48067945/making-subset-of-julia-dataframe-with-values-greater-than-x
1  true  http://stackoverflow.com/questions/48060390/initialize-fields-of-user-defined-types-in-arbitrary-order
1  true  http://stackoverflow.com/questions/48059544/keyword-argument-aliases
5  false  http://stackoverflow.com/questions/48055583/change-julia-promt-to-include-evalutation-numbers
1  false  http://stackoverflow.com/questions/48053516/applying-replacement-rules-to-julia-expressions
1  false  http://stackoverflow.com/questions/48045608/whats-wrong-with-my-euclidean-distance-calculation-julia
0  false  http://stackoverflow.com/questions/48044567/loading-a-package-in-each-julia-lang-session-avoid-retyping-using-xxx-every-t
2  false  http://stackoverflow.com/questions/48037732/how-to-save-julia-for-loop-returns-in-an-array-or-dataframe
3  true  http://stackoverflow.com/questions/48036171/why-does-array-without-produce-so-much-memory-allocation
1  true  http://stackoverflow.com/questions/48031603/julia-string-interpolation-of-array-element

...

3  false  http://stackoverflow.com/questions/47840667/is-there-a-way-to-tell-which-kernel-a-jupyter-notebook-was-built-with
0  false  http://stackoverflow.com/questions/47826378/can-julia-capture-the-results-shell-command
0  false  http://stackoverflow.com/questions/47823695/julia-analog-to-ipython-not-a-notebook-e-g-ijulia
1  false  http://stackoverflow.com/questions/47822388/julia-comprehension-can-one-index-reference-another
1  false  http://stackoverflow.com/questions/47822190/display-interaction-with-julia-list-comprehension
1  false  http://stackoverflow.com/questions/47819748/in-julia-how-do-i-run-an-external-program-and-process-its-output-line-by-line
2  false  http://stackoverflow.com/questions/47818035/julia-three-dimensional-arrays-performance
0  false  http://stackoverflow.com/questions/47800014/saving-settings-changes-in-vscode
0  true  http://stackoverflow.com/questions/47784339/can-broadcast-be-applied-to-subarrays-slices-of-array-in-julia
2  false  http://stackoverflow.com/questions/47762777/how-to-check-if-a-variable-is-scalar-in-julia
1  false  http://stackoverflow.com/questions/47762625/tensorflow-jl-output-shape-of-dynamic-rnn
</code></pre><p>Note that this returns the elements on the first page of the query results. Getting the values from subsequent pages is left as an exercise for the reader.</p><h3><a class="nav-anchor" id="Current-Status-1" href="#Current-Status-1">Current Status</a></h3><p>Most selector types are supported, but a few are still not fully functional. Examples of selectors that currently work, and some that don&#39;t  yet, are listed below.</p><table><tr><th>Selector</th><th>Status</th></tr><tr><td><code>address</code></td><td>Works</td></tr><tr><td><code>*</code></td><td>Works</td></tr><tr><td><code>#foo</code></td><td>Works</td></tr><tr><td><code>li#t1</code></td><td>Works</td></tr><tr><td><code>*#t4</code></td><td>Works</td></tr><tr><td><code>.t1</code></td><td>Works</td></tr><tr><td><code>p.t1</code></td><td>Works</td></tr><tr><td><code>div.teST</code></td><td>Works</td></tr><tr><td><code>.t1.fail</code></td><td>Works</td></tr><tr><td><code>p.t1.t2</code></td><td>Works</td></tr><tr><td><code>p[title]</code></td><td>Works</td></tr><tr><td><code>address[title=&quot;foo&quot;]</code></td><td>Works</td></tr><tr><td><code>[      title        ~=       foo    ]</code></td><td>Works</td></tr><tr><td><code>[title~=&quot;hello world&quot;]</code></td><td>Works</td></tr><tr><td>`[lang</td><td>=&quot;en&quot;]`</td></tr><tr><td><code>[title^=&quot;foo&quot;]</code></td><td>Works</td></tr><tr><td><code>[title$=&quot;bar&quot;]</code></td><td>Works</td></tr><tr><td><code>[title*=&quot;bar&quot;]</code></td><td>Works</td></tr><tr><td><code>.t1:not(.t2)</code></td><td>Works</td></tr><tr><td><code>div:not(.t1)</code></td><td>Works</td></tr><tr><td><code>li:nth-child(odd)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>li:nth-child(even)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>li:nth-child(-n+2)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>li:nth-child(3n+1)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>li:nth-last-child(odd)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>li:nth-last-child(even)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>li:nth-last-child(-n+2)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>li:nth-last-child(3n+1)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>span:first-child</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>span:last-child</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>p:nth-of-type(2)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>p:nth-last-of-type(2)</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>p:last-of-type</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>p:first-of-type</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>p:only-child</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>p:only-of-type</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>:empty</code></td><td>Works</td></tr><tr><td><code>div p</code></td><td>Works</td></tr><tr><td><code>div table p</code></td><td>Works</td></tr><tr><td><code>div &gt; p</code></td><td>Works</td></tr><tr><td><code>p ~ p</code></td><td>Works</td></tr><tr><td><code>p + p</code></td><td>Works</td></tr><tr><td><code>li, p</code></td><td>Works</td></tr><tr><td><code>p +/*This is a comment*/ p</code></td><td>Works</td></tr><tr><td><code>p:contains(&quot;that wraps&quot;)</code></td><td>Works</td></tr><tr><td><code>p:containsOwn(&quot;that wraps&quot;)</code></td><td>Works</td></tr><tr><td><code>:containsOwn(&quot;inner&quot;)</code></td><td>Works</td></tr><tr><td><code>p:containsOwn(&quot;block&quot;)</code></td><td>Works</td></tr><tr><td><code>div:has(#p1)</code></td><td>Works</td></tr><tr><td><code>div:has(:containsOwn(&quot;2&quot;))</code></td><td>Works</td></tr><tr><td><code>body :has(:containsOwn(&quot;2&quot;))</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>body :haschild(:containsOwn(&quot;2&quot;))</code></td><td>Works</td></tr><tr><td><code>p:matches([\d])</code></td><td>Works</td></tr><tr><td><code>p:matches([a-z])</code></td><td>Works</td></tr><tr><td><code>p:matches([a-zA-Z])</code></td><td>Works</td></tr><tr><td><code>p:matches([^\d])</code></td><td>Works</td></tr><tr><td>`p:matches(^(0</td><td>a))`</td></tr><tr><td><code>p:matches(^\d+$)</code></td><td>Works</td></tr><tr><td><code>p:not(:matches(^\d+$))</code></td><td>Works</td></tr><tr><td><code>div :matchesOwn(^\d+$)</code></td><td>Works</td></tr><tr><td><code>[href#=(fina)]:not([href#=(\/\/[^\/]+untrusted)])</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>[href#=(^https:\/\/[^\/]*\/?news)]</code></td><td>Doesn&#39;t Work</td></tr><tr><td><code>:input</code></td><td>Works</td></tr></table><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
