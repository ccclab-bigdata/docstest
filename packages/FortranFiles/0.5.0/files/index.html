<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Files · FortranFiles.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="FortranFiles.jl logo"/></a><h1>FortranFiles.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>Files</a><ul class="internal"><li><a class="toctext" href="#Terminology-1">Terminology</a></li><li><a class="toctext" href="#Opening-files-1">Opening files</a></li><li><a class="toctext" href="#Other-functions-on-FortranFiles-1">Other functions on <code>FortranFile</code>s</a></li><li><a class="toctext" href="#Examples-1">Examples</a></li></ul></li><li><a class="toctext" href="../types/">Datatypes</a></li><li><a class="toctext" href="../read/">Reading Data</a></li><li><a class="toctext" href="../write/">Writing Data</a></li><li><a class="toctext" href="../exceptions/">Exceptions</a></li><li><a class="toctext" href="../tests/">Package Tests</a></li><li><a class="toctext" href="../theindex/">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Files</a></li></ul></nav><hr/><div id="topbar"><span>Files</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Files-1" href="#Files-1">Files</a></h1><h2><a class="nav-anchor" id="Terminology-1" href="#Terminology-1">Terminology</a></h2><p>When opening a file in Fortran, you can specify its <em>access mode</em>. The default and most commonly used mode is <em>sequential access</em>. This package additionally supports <em>direct access</em> mode. (If the Fortran program uses <em>stream access</em> mode, then the file contains plain binary data, which can be easily read with Julia&#39;s built-in facilities.)</p><p>In Fortran, files are organized into <em>records</em>. Each <code>READ</code> or <code>WRITE</code> statement in Fortran processes a complete record. This Julia package emulates this behavior, i.e. each call to <code>read</code> or <code>write</code> will process a whole record.</p><p>In sequential access mode, records can only be accessed sequentially, but they can be of variable length. The length of a record is determined by the amount of data passed to the <code>WRITE</code> statement. The length of the record is also written to the file, encoded in <em>record markers</em> which preceed and follow the record. Unfortunately, Fortran compilers have used various ways to encode the record markers (the following is from personal recollection and may be incorrect):</p><ul><li>g77 used 4 bytes, so that records could be no longer than 2 GiB.</li><li>ifort uses 4 bytes, and uses the sign bit to signal that more data will follow. That is, the record is split into <em>subrecords</em>, where each subrecord has its own record markers. For records smaller than 2 GiB, this is compatible to g77.</li><li>gfortran 4.0 and 4.1 offered 8-byte record markers as an alternative to g77-style record markers, and used them by default (at least on 64-bit systems).</li><li>gfortran 4.2 introduced ifort-compatible record markers. These are now the default.</li></ul><p>All these kinds of record markers are supported by this package.</p><p>In direct access mode, all records have the same, fixed size. This record size must be specified when opening the file. Records can be accessed in random order, by specifying the number of the record to be read/written in each <code>READ</code> or <code>WRITE</code> statement.  Currently it is assumed that records are stored in the file without any header or record marker.  This is compatible with the standard behaviour of gfortran and ifort.</p><h2><a class="nav-anchor" id="Opening-files-1" href="#Opening-files-1">Opening files</a></h2><p>To open a file which contains Fortran unformatted data, use one of the following methods:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="FortranFiles.FortranFile" href="#FortranFiles.FortranFile"><code>FortranFiles.FortranFile</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">FortranFile(io::IO; kwargs...)</code></pre><p>Wrap the given <code>IO</code> stream as a <code>FortranFile</code> containing Fortran &quot;unformatted&quot; (i.e. binary) data. The keyword arguments can be:</p><ul><li><code>access</code> for specifying the access mode; a <code>String</code> being one of<ul><li>&quot;sequential&quot;: sequential access as in Fortran, where records have leading and trailing record markers. This is the default.</li><li>&quot;direct&quot;: direct access as in Fortran, where records have fixed length and can be accessed in random order. The &quot;recl&quot; keyword must be given to specify the record length. <code>read</code> and <code>write</code> operations on these files must use the <code>rec</code> keyword argument to specify which record to read/write.</li></ul></li><li><code>marker</code>: for specifying the type of record marker; one of<ul><li><code>RECMRK4B</code>: 4-byte record markers (with support for subrecords) [default]</li><li><code>RECMRK8B</code>: 8-byte record markers</li></ul>This is ignored for direct access files.</li><li><code>recl</code>: for specifying the record length if access==&quot;direct&quot;. The record length is counted in bytes and must be specified as an Integer.</li><li><code>convert</code>: for specifying the byte-order of the file data; one of<ul><li>&quot;native&quot;: use the host byte order [default]</li><li>&quot;big-endian&quot;: use big-endian byte-order</li><li>&quot;little-endian&quot;: use little-endian byte-order</li></ul></li></ul><p>The returned <code>FortranFile</code> can be used with Julia&#39;s <code>read</code> and <code>write</code> functions. See their documentation for more information.</p></div></div><div><div><pre><code class="language-none">FortranFile(fn::String [, mode=&quot;r&quot; ]; kwargs...)</code></pre><p>Open a file containing Fortran unformatted (i.e. binary) data for reading or writing, depending on <code>mode</code> which is used as in <code>open</code>. The keyword arguments are as in <code>FortranFile(io::IO; kwargs...)</code>.</p></div></div></section><p>See <a href="../read/#Reading-Data-1">Reading Data</a> and <a href="../write/#Writing-Data-1">Writing Data</a> for how to read or write data to <code>FortranFile</code>s.</p><h2><a class="nav-anchor" id="Other-functions-on-FortranFiles-1" href="#Other-functions-on-FortranFiles-1">Other functions on <code>FortranFile</code>s</a></h2><p>To close the file, use the standard Julia <code>close</code> function.</p><p>The following functions are provided to emulate certain Fortran I/O statements:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="FortranFiles.rewind" href="#FortranFiles.rewind"><code>FortranFiles.rewind</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Re-position a <code>FortranFile</code> at its beginning.</p></div></div></section><h2><a class="nav-anchor" id="Examples-1" href="#Examples-1">Examples</a></h2><p>The following examples show how to write Julia code that corresponds to certain Fortran <code>OPEN</code> statements.</p><h4><a class="nav-anchor" id="Opening-a-file-read-only-1" href="#Opening-a-file-read-only-1">Opening a file read-only</a></h4><pre><code class="language-julia">f = FortranFile(&quot;data.bin&quot;)</code></pre><p>corresponds to</p><pre><code class="language-fortran">integer::lun
open(newunit=lun, file=&quot;data.bin&quot;, form=&quot;unformatted&quot;, action=&quot;read&quot;, status=&quot;old&quot;)</code></pre><h4><a class="nav-anchor" id="Opening-a-file-for-writing-1" href="#Opening-a-file-for-writing-1">Opening a file for writing</a></h4><pre><code class="language-julia">f = FortranFile(&quot;data.bin&quot;, &quot;w&quot;)</code></pre><p>corresponds to</p><pre><code class="language-fortran">integer::lun
open(newunit=lun, file=&quot;data.bin&quot;, form=&quot;unformatted&quot;, action=&quot;write&quot;, status=&quot;replace&quot;)</code></pre><h4><a class="nav-anchor" id="Opening-a-file-for-reading-and-writing-in-append-mode-1" href="#Opening-a-file-for-reading-and-writing-in-append-mode-1">Opening a file for reading and writing in append mode</a></h4><pre><code class="language-julia">f = FortranFile(&quot;data.bin&quot;, &quot;a+&quot;)</code></pre><p>probably corresponds to</p><pre><code class="language-fortran">integer::lun
open(newunit=lun, file=&quot;data.bin&quot;, form=&quot;unformatted&quot;, action=&quot;readwrite&quot;, position=&quot;append&quot;, status=&quot;unknown&quot;)</code></pre><h4><a class="nav-anchor" id="Opening-a-file-read-only-in-direct-access-mode-1" href="#Opening-a-file-read-only-in-direct-access-mode-1">Opening a file read-only in direct access mode</a></h4><pre><code class="language-julia">f = FortranFile(&quot;data.bin&quot;, &quot;r&quot;, access=&quot;direct&quot;, recl=640)</code></pre><p>for reading a file containing 640-byte records, and corresponds to</p><pre><code class="language-fortran">integer::lun
open(newunit=lun, file=&quot;data.bin&quot;, form=&quot;unformatted&quot;, action=&quot;read&quot;, status=&quot;old&quot;, access=&quot;direct&quot;, recl=640)</code></pre><p>if compiled with gfortran; ifort measures <code>recl</code> not in bytes, but in 4-byte longwords, unless the compiler switch <code>-assume byterecl</code> is used.</p><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../types/"><span class="direction">Next</span><span class="title">Datatypes</span></a></footer></article></body></html>
