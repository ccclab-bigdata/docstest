<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Pidfile.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Pidfile.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Home</a><ul class="internal"><li><a class="toctext" href="#Primary-Functions-1">Primary Functions</a></li><li><a class="toctext" href="#Helper-Functions-1">Helper Functions</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Home</a></li></ul></nav><hr/><div id="topbar"><span>Home</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Pidfile.jl-1" href="#Pidfile.jl-1">Pidfile.jl</a></h1><p>Documentation for <a href="https://github.com/vtjnash/Pidfile.jl">Pidfile.jl</a>:</p><p>A simple utility tool for creating advisory pidfiles (lock files).</p><h2><a class="nav-anchor" id="Primary-Functions-1" href="#Primary-Functions-1">Primary Functions</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Pidfile.mkpidlock" href="#Pidfile.mkpidlock"><code>Pidfile.mkpidlock</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">mkpidlock(at::String, [pid::Cint, proc::Process]; kwopts...)</code></pre><p>Create a pidfile lock for the path &quot;at&quot; for the current process or the process identified by pid or proc.</p><p>Optional keyword arguments:</p><ul><li>mode: file access mode (modified by the process umask). Defaults to world-readable.</li><li>poll<em>interval: Specify the maximum time to between attempts (if watch</em>file doesn&#39;t work)</li><li>stale<em>age: Delete an existing pidfile (ignoring the lock) if its mtime is older than this.   The file won&#39;t be deleted until 25x longer than this if the pid in the file appears that it may be valid.   By default this is disabled (stale</em>age = 0), but a typical recommended value would be about 3-5x an   estimated normal completion time.</li></ul></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close" href="#Base.close"><code>Base.close</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">close(lock::LockMonitor)</code></pre><p>Release a pidfile lock.</p></div></div></section><h2><a class="nav-anchor" id="Helper-Functions-1" href="#Helper-Functions-1">Helper Functions</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Pidfile.open_exclusive" href="#Pidfile.open_exclusive"><code>Pidfile.open_exclusive</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">open_exclusive(path::String; mode, poll_interval, stale_age) :: File</code></pre><p>Create a new a file for read-write advisory-exclusive access, blocking until it can succeed.</p><p>For a description of the keyword arguments, see <a href="#Pidfile.mkpidlock"><code>mkpidlock</code></a>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Pidfile.tryopen_exclusive" href="#Pidfile.tryopen_exclusive"><code>Pidfile.tryopen_exclusive</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">tryopen_exclusive(path::String, mode::Integer = 0o444) :: Union{Void, File}</code></pre><p>Try to create a new file for read-write advisory-exclusive access, return nothing if it already exists.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Pidfile.write_pidfile" href="#Pidfile.write_pidfile"><code>Pidfile.write_pidfile</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">write_pidfile(io, pid)</code></pre><p>Write our pidfile format to an open IO descriptor.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Pidfile.parse_pidfile" href="#Pidfile.parse_pidfile"><code>Pidfile.parse_pidfile</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">parse_pidfile(file::Union{IO, String}) =&gt; (pid, hostname, age)</code></pre><p>Attempt to parse our pidfile format, replaced an element with (0, &quot;&quot;, 0.0), respectively, for any read that failed.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Pidfile.stale_pidfile" href="#Pidfile.stale_pidfile"><code>Pidfile.stale_pidfile</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">stale_pidfile(path::String, stale_age::Real) :: Bool</code></pre><p>Helper function for open_exclusive for deciding if a pidfile is stale.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Pidfile.isvalidpid" href="#Pidfile.isvalidpid"><code>Pidfile.isvalidpid</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">isvalidpid(hostname::String, pid::Cuint) :: Bool</code></pre><p>Attempt to conservatively estimate whether pid is a valid process id.</p></div></div></section><footer><hr/></footer></article></body></html>
