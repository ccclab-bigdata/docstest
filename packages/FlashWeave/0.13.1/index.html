<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Readme Â· FlashWeave.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>FlashWeave.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Readme</a><ul class="internal"><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Basic-usage-1">Basic usage</a></li><li><a class="toctext" href="#Versioning-and-API-1">Versioning and API</a></li></ul></li><li><a class="toctext" href="autodocs/">Docstrings</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Readme</a></li></ul></nav><hr/><div id="topbar"><span>Readme</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="FlashWeave-1" href="#FlashWeave-1">FlashWeave</a></h1><p><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."/></a> <a href="https://travis-ci.org/meringlab/FlashWeave.jl"><img src="https://travis-ci.org/meringlab/FlashWeave.jl.svg?branch=master" alt="Build Status"/></a> <a href="https://ci.appveyor.com/project/jtackm/flashweave-jl"><img src="https://ci.appveyor.com/api/projects/status/vdesge86ssj91htc?svg=true" alt="Build status"/></a> <a href="https://codecov.io/gh/meringlab/FlashWeave.jl"><img src="https://codecov.io/gh/meringlab/FlashWeave.jl/branch/master/graph/badge.svg" alt="codecov"/></a> <a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"/></a></p><p>FlashWeave predicts ecological interactions between microbes from large-scale compositional abundance data (i.e. OTU tables constructed from sequencing data) through statistical co-occurrence or co-abundance. It reports direct associations, with adjustment for bystander effects and other confounders, and can furthermore integrate environmental or technical factors into the analysis of microbial systems.</p><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p>To install Julia, please follow instructions on https://github.com/JuliaLang/julia. The preferred way is to obtain a binary from https://julialang.org/downloads/. Make sure you install Julia 1.0, the version currently supported by FlashWeave.</p><p>In an interactive Julia session, you can then install FlashWeave after typing <code>]</code> via</p><pre><code class="language-julia">(v1.0) pkg&gt; add FlashWeave
# to run tests: (v1.0) pkg&gt; test FlashWeave</code></pre><h2><a class="nav-anchor" id="Basic-usage-1" href="#Basic-usage-1">Basic usage</a></h2><p>OTU tables can be provided in several formats: delimited formats (&quot;.csv&quot;, &quot;.tsv&quot;), <a href="http://biom-format.org/documentation/format_versions/biom-1.0.html">BIOM 1.0</a> (&quot;.biom&quot;) or the high-performance formats <a href="http://biom-format.org/documentation/format_versions/biom-2.0.html">BIOM 2.0</a> and <a href="https://github.com/simonster/JLD2.jl">JLD2</a> (&quot;.jld2&quot;). Meta data should be provided as delimited format (except for JLD2, see below). See the <code>test/data/HMP_SRA_gut</code> directory for examples. IMPORTANT NOTE: For delimited and JLD2 formats, FlashWeave treats rows of the table as observations (i.e. samples) and columns as variables (i.e. OTUs or meta variables), consistent with the majority of statistical and machine-learning applications, but in contrast to several other microbiome analysis frameworks. Behavior can be switched with the <code>transposed=true</code> flag.</p><p>To learn an interaction network, you can do</p><pre><code class="language-julia">julia&gt; using FlashWeave # this has some pre-compilation delay the first time it&#39;s called, subsequent imports are fast

julia&gt; data_path = &quot;/my/example/data.tsv&quot; # or .csv, .biom
julia&gt; meta_data_path = &quot;/my/example/meta_data.tsv&quot;
julia&gt; netw_results = learn_network(data_path, meta_data_path, sensitive=true, heterogeneous=false)

&lt;&lt; summary statistics of the learned network &gt;&gt;

julia&gt; G = graph(netw_results) # weighted graph representing interactions + weights

julia&gt; # for JLD2, you can provide keys:
julia&gt; # data_path = &quot;/my/example/data.jld2&quot;
julia&gt; # netw_results = learn_network(data_path, otu_data_key=&quot;otu_data&quot;, otu_header_key=&quot;otu_header&quot;, meta_data_key=&quot;meta_data&quot;, meta_header_key=&quot;meta_header&quot;, sensitive=true, heterogeneous=false)</code></pre><p>Results can currently be saved in JLD2, fast for large networks, or as traditional <a href="https://en.wikipedia.org/wiki/Graph_Modelling_Language">Graph Modelling Language</a> (&quot;.gml&quot;) or edgelist (&quot;.edgelist&quot;) formats:</p><pre><code class="language-julia">julia&gt; save_network(&quot;/my/example/network_output.jld2&quot;, netw_results)
julia&gt; ## or: save_network(&quot;/my/example/network_output.gml&quot;, netw_results)</code></pre><p>For output of additional information (such as discarding sets, if available) in separate files you can specify the &quot;detailed&quot; flag:</p><pre><code class="language-julia">julia&gt; save_network(&quot;/my/example/network_output.edgelist&quot;, netw_results, detailed=true)
julia&gt; # for .jld2, additional information is always saved if available</code></pre><p>A convenient loading function is available:</p><pre><code class="language-julia">julia&gt; netw_results = load_network(&quot;/my/example/network_output.jld2&quot;)
 ```

To get more information on a function, use `?`:
</code></pre><p>julia julia&gt; ?learn_network</p><pre><code class="language-none">
## Performance tips ##

Depending on your data, make sure to chose the appropriate flags (```heterogeneous=true``` for multi-habitat or -protocol data sets with ideally at least thousands of samples; ```sensitive=false``` for faster, but more coarse-grained associations) to achieve optimal runtime. If FlashWeave should get stuck on a small fraction of nodes with large neighborhoods, try increasing the convergence criterion (```conv```). To learn a network in parallel, see the section below.

Note, that this package is optimized for large-scale data sets. On small data (hundreds of samples and OTUs) its speed advantages can be negated by JIT-compilation overhead.

## Parallel computing ##

FlashWeave leverages Julia&#39;s built-in [parallel infrastructure](https://docs.julialang.org/en/stable/manual/parallel-computing/). In the most simple case, you can start julia with several workers
</code></pre><p>bash $ julia -p 4 # for 4 workers</p><pre><code class="language-none">
or manually add workers at the beginning of an interactive session
</code></pre><p>julia julia&gt; using Distributed; addprocs(4) # can be skipped if julia was started with -p julia&gt; @everywhere using FlashWeave julia&gt; learn_network(...</p><pre><code class="language-none">
and network learning will be parallelized in a shared-memory, multi-process fashion.

If you want to run FlashWeave remotely on a computing cluster, a ```ClusterManager``` can be used (for example from the [ClusterManagers.jl](https://github.com/JuliaParallel/ClusterManagers.jl) package, installable via ```]``` and then ```add ClusterManagers```). Details differ depending on the setup (queueing system, resource requirements etc.), but a simple example for a Sun Grid Engine (SGE) system would be:
</code></pre><p>julia julia&gt; using ClusterManagers julia&gt; addprocs<em>qrsh(20) # 20 remote workers julia&gt; ## for more fine-grained control: addprocs(QRSHManager(20, &quot;&lt;your queue&gt;&quot;), qsub</em>env=&quot;&lt;your environment&gt;&quot;, params=Dict(:res_list=&gt;&quot;&lt;requested resources&gt;&quot;))</p><p>julia&gt; # or</p><p>julia&gt; addprocs<em>sge(20) julia&gt; ## addprocs</em>sge(5, queue=&quot;&lt;your queue&gt;&quot;, qsub<em>env=&quot;&lt;your environment&gt;&quot;, res</em>list=&quot;&lt;requested resources&gt;&quot;)</p><pre><code class="language-none">
Please refer to the [ClusterManagers.jl documentation](https://github.com/JuliaParallel/ClusterManagers.jl) for further details.

## Citing ##

To cite FlashWeave, please refer to our [preprint on bioRxiv](https://www.biorxiv.org/content/early/2018/08/13/390195):
</code></pre><p>Tackmann, Janko, Joao Frederico Matias Rodrigues, and Christian von Mering. &quot;Rapid inference of direct interactions in large-scale ecological networks from heterogeneous microbial sequencing data.&quot; bioRxiv (2018): 390195.</p><pre><code class="language-none">
Example BibTeX entry:
</code></pre><p>@article {tackmann2018rapid, 	author = {Tackmann, Janko and Rodrigues, Joao Frederico Matias and von Mering, Christian}, 	title = {Rapid inference of direct interactions in large-scale ecological networks from heterogeneous microbial sequencing data}, 	year = {2018}, 	doi = {10.1101/390195}, 	publisher = {Cold Spring Harbor Laboratory}, 	URL = {https://www.biorxiv.org/content/early/2018/08/13/390195}, 	eprint = {https://www.biorxiv.org/content/early/2018/08/13/390195.full.pdf}, 	journal = {bioRxiv} } ```</p><h2><a class="nav-anchor" id="Versioning-and-API-1" href="#Versioning-and-API-1">Versioning and API</a></h2><p>FlashWeave follows <a href="https://semver.org/">semantic versioning</a>. Stability guarantees are only provided for exported functions (official API), anything else should be considered untested and subject to change.</p><footer><hr/><a class="next" href="autodocs/"><span class="direction">Next</span><span class="title">Docstrings</span></a></footer></article></body></html>
